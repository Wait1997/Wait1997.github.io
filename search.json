[{"word":["React","中的","state","1",".","不能","直接","修改","state","12345","wrongths",".","state",".","comment","=","'","Hello","'","correctths",".","setState","(","&","#","123",";","comment",":","'","Hello","'","&","#","125",";",")","2",".","state","中","数据","的","修改","通过","setState","修改","state","中","的","数据","setState","中","的","关键","点","setState","不会","立刻","改变","React","组件","中","state","的","值","setState","通过","引发","一次","组件","的","更新过程","来","引发","重新","绘制","重","绘指","的","就是","引起","React","的","更新","生命周期","函数","4个","函数","：","shoulComponentUpate","（","被","调用","时","ths",".","state","没有","更新","；","如果","返回","了","false","，","生命周期","被","中断","，","虽然","不","调用","之后","的","函数","了","，","但是","state","仍然","会","被","更新","）","componentWllUpate","（","被","调用","时","ths",".","state","没有","更新","）","rener","（","被","调用","时","ths",".","state","得到","更新","）","componentDUpate","多次","setState","函数","调用","产生","的","效果","会合","并","。","1234","ths",".","setState","(","&","#","123",";","name",":","'","Pororo","'","&","#","125",";",")","ths",".","setState","(","&","#","123",";","age",":","20","&","#","125",";",")","相当于","ths",".","setState","(","&","#","123",";","name",":","'","Pororo","'","，","age",":","20","&","#","125",";",")","上面","两块","代码","的","效果","是","一样","的","。","如果","每次","调用","都","引发","一次","生命周期","更新","，","那","性能","就","会","消耗","很大了","。","所以","，","React","会","将","多","个","ths",".","setState","产生","的","修改","放进","一个","队列","里","，","等","差不多","的","时候","就","会","引发","一次","生命周期","更新","。","1234567891011121314151617181920212223242526272829303132333435363738394041","mport","React",",","&","#","123",";","Component","&","#","125",";","from","'","react","'","export","efault","class","Eg","extens","Component","&","#","123",";","constructor","(",")","&","#","123",";","super","(",")","ths",".","state","=","&","#","123",";","alue",":","0",",","nex",":","0","&","#","125",";","&","#","125",";","react","生命周期","componentDMount","(",")","&","#","123",";","ths",".","setState","(","&","#","123",";","alue",":","ths",".","state",".","alue","+","1","&","#","125",";",")","console",".","log","(","ths",".","state",".","alue",")","第一次","输出","ths",".","setState","(","&","#","123",";","alue",":","ths",".","state",".","alue","+","1","&","#","125",";",")","console",".","log","(","ths",".","state",".","alue",")","第二次","输出","setTmeout","(","(",")","=","&","#","123",";","ths",".","setState","(","&","#","123",";","alue",":","ths",".","state",".","alue","+","1","&","#","125",";",")","console",".","log","(","ths",".","state",".","alue",")","第三次","输出","ths",".","setState","(","&","#","123",";","alue",":","ths",".","state",".","alue","+","1","&","#","125",";",")","console",".","log","(","ths",".","state",".","alue",")","第四次","输出","&","#","125",";",",","0",")","通过","aEentLstener","监听","的","会同","步","执行","setState","(",")","ths",".","refs",".","button",".","aEentLstener","(","'","clck","'",",","ths",".","clck",")","&","#","125",";","clck","=","(",")","=","&","#","123",";","ths",".","setState","(","&","#","123",";","nex",":","ths",".","state",".","nex","+","1","&","#","125",";",")","console",".","log","(","ths",".","state",".","nex",")","同步","时","输出","1","异步","时","（","通过","react","事件","机制","定义","的","事件","处理","函数","）","输出","0","ths",".","setState","(","&","#","123",";","nex",":","ths",".","state",".","nex","+","1","&","#","125",";",")","console",".","log","(","ths",".","state",".","nex",")","同步","时","输出","2","异步","时","（","通过","react","事件","机制","定义","的","事件","处理","函数","）","输出","0","&","#","125",";","rener","(",")","&","#","123",";","return","(","spanalue",":","&","#","123",";","ths",".","state",".","alue","&","#","125",";","nex",":","&","#","123",";","ths",".","state",".","nex","&","#","125",";","span","button","ref","=","\"","button","\"","onClck","=","&","#","123",";","ths",".","clck","&","#","125",";","点击","button",")","&","#","125",";","&","#","125",";","分析","：","前","两次","setState","：","123456","异步","ths",".","setState","(","&","#","123",";","alue",":","ths",".","state",".","alue","+","1","&","#","125",";",")",";","console",".","log","(","ths",".","state",".","alue",")",";","第一次","输出","0","ths",".","setState","(","&","#","123",";","alue",":","ths",".","state",".","alue","+","1","&","#","125",";",")",";","console",".","log","(","ths",".","state",".","alue",")",";","第二次","输出","0","由于","setState","不会","立即","改变","React","组件","中","state","的","值","，","所以","两次","setState","中","ths",".","state",".","alue","都是","同一个","值","0","，","故而","，","这","两次","输出","都是","0","。","因而","alue","只","被","加","1","。","既然","这样","，","那么","是不是","可以","直接","操作","ths",".","state","呢","？","比如","：","ths",".","state",".","alue","=","ths",".","state",".","alue","+","1",";","这样","的确","可以","修改","ths",".","state",".","alue","的","状态","但是","却","不可以","引发","重复","渲染","。","所以","，","就","必须","通过","React","设定","的","setState","函数","去","改变","ths",".","state","，","从而","引发","重新","渲染","。","setTmeout","里面","的","两次","setState",":","1234567","同步","setTmeout","(","(",")","=","&","#","123",";","ths",".","setState","(","&","#","123",";","alue",":","ths",".","state",".","alue","+","1","&","#","125",";",")","console",".","log","(","ths",".","state",".","alue",")","第三次","输出","2","ths",".","setState","(","&","#","123",";","alue",":","ths",".","state",".","alue","+","1","&","#","125",";",")","console",".","log","(","ths",".","state",".","alue",")","第四次","输出","3","&","#","125",";",",","0",")","在","React","中","，","如果","是","由","React","引发","的","事件","处理","（","比如","：","onClck","引发","的","事件","处理","）","，","调用","setState","不会","同步","更新","ths",".","state","，","除此之外","的","setState","调用","会同","步","执行","ths",".","setState","。","“","除此之外","”","指","的","是","：","绕过","React","通过","aEentLstener","直接","添加","的","事件","处理","函数","和","setTmeoutsetInteral","产生","的","异步","调用","。","每次","setState","产生","新的","state","会","依次","被","存入","一个","队列","，","然后","会","根据","sBathngUpates","变量","判断","是","直接","更新","ths",".","state","还是","放进","rtyComponent","里","回头","再说","。","sBatchngUpates","默认","是","false","，","也","就","表示","setState","会同","步","更新","ths",".","state","。","但是","，","当","React","在","调用","事件","处理","函数","之前","就","会","调用","batcheUpates","，","这个","函数","会","把","sBatchngUpates","修改","为","true","，","造成","的","后果","就是","由","React","控制","的","事件","处理","过程","setState","不会","同步","更新","ths",".","state","。","3",".","同步","更新","state","的","办法","—","函数","式","setState","如果","ths",".","setState","的","参数","不是","一个","对象","而是","一个","函数","时","，","这个","函数","会","接收","到","两个","参数","，","第","一个","是","当前","的","state","值","，","第二个","是","当前","的","props","，","这个","函数","应该","返回","一个","对象","，","这个","对象","代表","想要","对","ths",".","state","的","更改","，","换句话说","，","之前","你想","给","ths",".","setState","传递","什么","对象","参数","，","在","这种","函数","里","就","返回","什么","对象","。","不过","，","计算","这个","对象","的","方法","有些","改变","，","不再","依赖","于","ths",".","state","，","而是","依赖于","输入","参数","state","。","123","functon","ncrement","(","state",",","props",")","&","#","123",";","return","&","#","123",";","count",":","state",".","count","+","1","&","#","125",";",";","&","#","125",";","12345","functon","ncrementMultple","(",")","&","#","123",";","ths",".","setState","(","ncrement",")",";","ths",".","setState","(","ncrement",")",";","ths",".","setState","(","ncrement",")",";","&","#","125",";","假如","当前","ths",".","state",".","count","的","值","是","0","，","第一次","调用","ths",".","setState","(","ncrement",")","，","传给","ncrement","的","state","参数","是","0","，","第二次","调用","时","，","state","参数","是","1","，","第三次","调用","时","参数","是","2","，","最终","ncrementMultple","让","ths",".","state",".","count","变成","了","3","。","对于","多次","调用","函数","式","setState","的","情况","，","React","会","保证","调用","每次","ncrement","时","，","state","都","已经","合并","了","之前","的","状态","修改","结果","。","4",".","把","两种","setState","的","用法","混用","把","ncrementMultple","改成","这样","123456","functon","ncrementMultple","(",")","&","#","123",";","ths",".","setState","(","ncrement",")",";","ths",".","setState","(","ncrement",")",";","ths",".","setState","(","&","#","123",";","count",":","ths",".","state",".","count","+","1","&","#","125",";",")",";","ths",".","setState","(","ncrement",")",";","&","#","125",";","在","几个","函数","式","setState","调用","中","插入","一个","传统","式","setState","调用","，","最后","得到","的","结果","是","让","ths",".","state",".","count","增加","了","2","，","而不是","增加","4","。","这是","因为","React","会","依次","合并","所有","setState","产生","的","效果","，","虽然","前","两个","函数","式","setState","调用","产生","的","效果","是","count","加","2","，","但是","中间","出现","一个","传统","式","setState","调用","，","一下子","强行","把","积攒","的","效果","清","空","，","用","count","加","1","取代","。","所以","，","传统","式","setState","与","函数","式","setState","一定","不要","混用","。"],"url":"http://yoursite.com/2020/02/04/React%E5%AD%A6%E4%B9%A0%E2%80%94setState/","title":"React学习—setState","content":"React中的state1. 不能直接修改 state12345// wrongthis.state.comment = 'Hello'// correctthis.setState(&#123;comment: 'Hello'&#1...","author":"xiaoxiong","categorie":{},"date":"2020-02-04 15:11:17"},{"word":["React","与","Vue","的","对比","上","1","、","监听","数据","变化","的","实现","原理","不同","Vue","通过","gettersetter","以及","一些","函数","的","劫持","，","能","精确","知道","数据","变化","，","不需要","特","别的","优化","就","能","达到","很好","的","性能","React","默认","是","通过","比较","引用","地址","的","方式","进行","的","，","如果","不","优化","（","PureComponentshoulComponentUpate","）","可能","导致","大量","不必要的","VDOM","的","重新","渲染","为什么","React","不精确","监听","数据","变化","呢","？","这是","因为","Vue","和","React","设计","理念","上","的","区别","，","Vue","使用","的","是","可变","数据","，","而","React","更","强调","数据","的","不","可变","。","所以","应该说","没有","好坏","之","分","，","Vue","更加","简单","，","而","React","构建","大型","应用","的","时候","更加","鲁棒","。","因为","一般","都会","用","一个","数据","层","的","框架","比如","Vuex","和","Reux","，","所以","这","部分","不","作","过多","解释","，","在","最后","的","uex","和","reux","的","区别","中","也","会","讲到","。","2","、","数据流","的","不同","大家","都","知道","Vue","中","默认","是","支持","双向","绑定","的","。","在","Vue","1.0","中","我们","可以","实现","两种","双向","绑定","：","父子","组件","之间","，","props","可以","双向","绑定","组件","与","DOM","之间","可以","通过","-","moel","双向","绑定","在","Vue","2",".","x","中","去掉","了","第一种","，","也就是","父子","组件","之间","不能","双向","绑定","了","（","但是","提供","了","一个","语法","糖","自动","帮","你","通过","事件","的","方式","修改","）","，","并且","Vue","2",".","x","已经","不","鼓励","组件","对","自己","的","props","进行","任何","修改","了","。","所以","现在","我们","只","有","组件","––","DOM","之间","的","双向","绑定","这","一种","。","然而","React","从","诞生","之","初","就","不支持","双向","绑定","，","React","一直","提倡","的","是","单向","数据流","，","他","称之为","onChangesetState","(",")","模式","。","不过","由于","我们","一般","都会","用","Vuex","以及","Reux","等","单向","数据流","的","状态","管理","框架","，","因此","很多","时候","我们","感受","不到","这一点","的","区别","了","。","3","、","模板","渲染","方式","的","不","同在","表层","上","，","模板","的","语法","不同","React","是","通过","JSX","渲染","模板","而","Vue","是","通过","一种","拓展","的","HTML","语法","进行","渲染","但","其实","这","只","是","表面","现象","，","毕竟","React","并不","必须","依赖","JSX","。","在","深层","上","，","模板","的","原理","不同","，","这","才是","他们","的","本质","区别","：","React","是","在","组件","JS","代码","中","，","通过","原生","JS","实现","模板","中的","常见","语法","，","比如","插","值","，","条件","，","循环","等","，","都是","通过","JS","语法","实现","的","Vue","是","在","和","组件","JS","代码","分离","的","单独","的","模板","中","，","通过","指令","来","实现","的","，","比如","条件","语句","就","需要","-","f","来","实现","4","、","Vuex","和","Reux","的","区别","从","表面","上来","说","，","store","注入","和","使用","方式","有一些","区别","。","在","Vuex","中","，","$","store","被","直接","注入","到了","组件","实例","中","，","因此","可以","比较","灵活的","使用","：","使用","spatch","和","commt","提交","更新","通过","mapState","或者","直","接通","过","ths",".","$","store","来","读取","数据","在","Reux","中","，","我们","每一个","组件","都","需要","显示","的","用","connect","把","需要","的","props","和","spatch","连接","起来","。","另外","Vuex","更加","灵活","一些","，","组件","中","既","可以","spatch","acton","也","可以","commt","upates","，","而","Reux","中","只","能","进行","spatch","，","并不","能","直接","调用","reucer","进行","修改","。","从","实现","原理","上","来说","，","最大","的","区别","是","两点","：","Reux","使用","的","是","不","可变","数据","，","而","Vuex","的","数据","是","可变","的","。","Reux","每次","都是","用","新的","state","替换","旧的","state","，","而","Vuex","是","直接","修改","Reux","在","检测","数据","变化","的","时候","，","是","通过","ff","的","方式","比较","差异","的","，","而","Vuex","其实","和","Vue","的","原理","一样","，","是","通过","gettersetter","来","比较","的","（","如果","看","Vuex","源码","会","知道","，","其实","他","内部","直接","创建","一个","Vue","实例","用来","跟踪","数据","变化","）"],"url":"http://yoursite.com/2020/02/04/React%E5%AD%A6%E4%B9%A0%E2%80%94React%E4%B8%8EVue%E6%AF%94%E8%BE%831/","title":"React学习—React与Vue比较1","content":"React与Vue的对比上1、监听数据变化的实现原理不同\nVue 通过 getter/setter 以及一些函数的劫持，能精确知道数据变化，不需要特别的优化就能达到很好的性能\nReact 默认是通过比较引用地址的方式进行的，如果不优化...","author":"xiaoxiong","categorie":{},"date":"2020-02-04 14:58:44"},{"word":["1",".","create","-","react","-","app","创建","及","使用","Create","React","App","是","FaceBook","的","React","团队","官方","出","的","一个","构建","React","单","页面","应用","的","脚手架","工具","。","它本身","集成","了","Webpack","，","并","配置","了","一系列","内置","的","loaer","和","默认","的","npm","的","脚本","，","可以","很","轻松的","实现","零","配置","就","可以","快速","开发","React","的","应用","12345678910","#","全局","安装","npm","nstall","-","g","create","-","react","-","app","#","构建","一个","my","-","app","的","项目","(","my","-","app","是","你","的","项目","的","名称",")","npx","create","-","react","-","app","my","-","appc","my","-","app","#","启动","编译","当前","的","React","项目","，","并","自动","打开","http",":","localhost",":","3000","npm","start","#","oryar","start","注意","：","如果","你","不能","确保","最新","版本","，","可以","尝试","卸载","：","npm","unnstall","-","g","create","-","react","-","app","然后","全局","安装","1.1","项目","目录","（","默认","）","：","对于","要","创建","的","项目","，","这些","文件","必须","以","明确的","文件名","存在","：","publcnex",".","html","是","页面","模板",";","srcnex",".","js","是","JaaScrpt","入口","点","。","在","src","中","创建","子目","录","。","为了","加快","重新","构建","的","速度","，","Webpack","只","处理","src","中的","文件","。","你","需要","将","任何","JS","和","CSS","文件","放","在","src","中","，","否则","Webpack","将","发现","不了","它们","在","package",".","json","中","：","只有","三个","依赖","，","分","别","是","react","，","react","-","om",",","react","-","scrpts",",","依赖","为什么","这么","少","，","是","因","为","像","webpack","，","babel","等等","都是","被","creat","-","react","-","app","封装","到了","react","-","scrpts","这个","项目","当中","，","包括","基本","启动","命令","都是","通过","调用","react","-","scrpts","这个","依赖","下面","的","命令","进行","启动","的",",","creat","-","react","-","app","搭建","出来","的","项目","默认","支持","这","4种","命令","，","start","以","开发","模式","启动","项目","，","bul","将","整个","项目","进行","构建","，","test","进行","测试","，","eject","会","将","原本","creat","-","react","-","app","对","webpack","，","babel","等","相关","配置","的","封装","弹射","出来","，","如果","我们","要","将","creat","-","react","-","app","配置","文件","进行","修改","，","现有","目录","下","是","没有","地方","修改","的","，","此时","，","我们","就","可以","通过","eject","命令","将","原本","被","封装","到","脚手架","当中","的","命令","弹射","出来","，","然后","就","可以","在","项目","的","目录","下","看到","很多","配置文件","1.1.1","可用","的","Scrpts","npm","start","在","开发","模式","下","运行","应用","程序","npm","test","以","交互式","监视","模式","启动","测试","运行","器","npm","run","bul","将","生产","应用","程序","构建","到","bul","文件夹","npm","run","eject","1.2","在","create","-","react","-","app","中","使用","css","moule","两种","方式","1.2.1","使用","css","moule","的","第一种","方式","create","-","react","-","app","中","内置","了","使用","CSS","Moules","的","配置","，","当前","方式","就是","使用","create","-","react","-","app","内置","的","用法","方式","：","将","所有","的",".","css",".","scss","等","样式","文件","都","修改","成",".","moule",".","css",".","moule",".","scss","等","。","即可","使用","CSS","Moules","的","方式","进行","引入","使用","了","用法","：","编写","一个","css","文件","：","unon",".","moule",".","css","123",".","error","&","#","123",";","backgroun","-","color",":","re","&","#","125",";","在编","写","一个","普通的","css","文件","：","common",".","css","123",".","error","&","#","123",";","color",":","pnk",";","&","#","125",";","在","App",".","jsx","文件","中","使用","CSS","Moules","的","方式","进行","引用","：","unon",".","moule",".","css","123456789101112131415","mport","React","from","'","react","'",";","mport","unon","from","'",".","cssunon",".","moule",".","css","'","mport","'",".","csscommon",".","css","'","console",".","log","(","unon",")","functon","App","(",")","&","#","123",";","return","(","p","className","=","&","#","123",";","unon",".","error","&","#","125",";","悲催","的","一天","开始","了","p",")",";","&","#","125",";","export","efault","App",";","在","浏览器","中","查看","效果",":","此时","App","组件","的","背景","颜色","是","红色","，","但是","字体","颜色","却","不是","红色","，","因","为","使用","了","Css","Moules","之后","，","普通的","css","样式","就","不起","效果","了","，","需要","用","全局","的","方式","编写","才","可以","(",":","global",")","。","最后","添加","到","元素","上","的","样式","结果","为","：","1","p","class","=","\"","unon","_","error","_","3","UaRT","\"","悲催","的","一天","开始","了","p","使用","scss","的","效果","和","css","效果","一样",",","但是","使用","scsss","时","需要","安装","：","1","npm","noe","-","sass","-","D","因为","create","-","react","-","app","中","没有","内置","然后","就","可以","使用",".","scss","的","文件","编译","了","1.2.2","使用","css","Moule","的","第","二种","方式","方式","：","在","命令行","运行","npm","run","eject","命令",",","此","命令","会","将","脚手架","中","隐藏","的","配置","都","展示","出来","，","此","过程","不","可逆","运行","完成","之后","，","打开","confg","目录","下","的","webpack",".","confg",".","js","文件","，","找到","test",":","cssRegex","这","一行","在","use","属性","执行","的","方法","中","添加","moules",":","true","，","如","下图","：","用法","：","和","第一种","方式","的","用法","一致","，","只","是","不需要","在","css","文件","后面","加",".","moule","后缀","了","在","浏览器","中","查看","效果",":","1","p","class","=","\"","_","2","elxDxw","6","P","93","-","x","9","qDZkogR","\"","悲催","的","一天","开始","了","p","如","想","使用","第二种","方式","对","sass","和","less","也","使用","CSS","Moules","的","方式","进行","引用","，","则","类似的","在","sass","和","less","解析","配置","上","也","添加","moules",":","true","即可","。","注意","：","默认","create","-","react","-","app","脚手架","不能","直接","使用","sass","和","less","直接","编写","css","，","需要","先进","行","相应","配置","1.3","在","Create","-","React","-","App","中","启用","Sass","和","Less","1.3.1","启用","sass","语法","编写","css","create","-","react","-","app","脚手架","中","已经","添加","了","sass","-","loaer","的","支","持","，","所以","只","需要","安装","noe","-","sass","插件","即可","安装","：","noe","-","sass","插","件","123","npm","nstall","noe","-","sass","-","-","sae","#","oryarn","a","noe","-","sass","用法","：","编写","sass","文件","：","App",".","scss","12345678910",".","App","&","#","123",";","wth",":","100%",";","heght",":","100","px",";","backgroun",":","hotpnk",";",".","common","&","#","123",";","text","-","algn",":","center",";","color",":","pnk",";","lne","-","heght",":","100","px",";","&","#","125",";","&","#","125",";","在","js","文件","中","直接","使用","：","1234567891011121314151617181920","mport","React","from","'","react","'",";","mport","User","from","'",".","componentsUser","'","mport","'",".","App",".","scss","'","functon","App","(",")","&","#","123",";","return","(","className","=","\"","App","\"","p","className","=","\"","common","\"","悲催","的","一天","开始","了","p","User",")",";","&","#","125",";","export","efault","App",";","*","因为","此时","scss","中","没有","开启","模块化","所以","在","全局","中","引用","该","样式","属性","都会","被","使用","该类","的","样式","*","1.3.2","启用","less","语法","编写","css","由于","create","-","react","-","app","脚手架","中","并没有","配置","关于","less","文件","的","解析","，","所以","我们","需要","自己","进行","配置","。","需要","安装","的","插件","less","，","less","-","loaer","安装","：","less","、","less","-","loaer","12","npm","less","-","Snpm","less","-","loaer","-","S","打开","web",".","confg",".","js","文件","找到","style","fles","regexes","注释","位置","，","仿照","其","解析","sass","的","规则","，","在下","面","添加","两","行","代码","123","添加","less","解析","规则","const","lessRegex","=","\\",".","less","$",";","const","lessMouleRegex","=","\\",".","moule","\\",".","less","$",";","找到","rules","属性","配置","，","在","其中","添加","less","解析","配置","注意","：","这里","有","一个","需要","注意的","地方","，","下面","的","这些","less","配置","规则","放","在","sass","的","解析","规则","下面","即可","，","如果","放","在","了","fle","-","loaer","的","解析","规则","下面","，","less","文件","解析","不会","生效","。","12345678910111213141516171819202122232425","Less","解析","配置","&","#","123",";","test",":","lessRegex",",","exclue",":","lessMouleRegex",",","use",":","getStyleLoaers","(","&","#","123",";","mportLoaers",":","2",",","sourceMap",":","sEnProucton","&","amp",";","&","amp",";","shoulUseSourceMap",",","&","#","125",";",",","'","less","-","loaer","'",")",",","seEffects",":","true",",","&","#","125",";",",","&","#","123",";","test",":","lessMouleRegex",",","use",":","getStyleLoaers","(","&","#","123",";","mportLoaers",":","2",",","sourceMap",":","sEnProucton","&","amp",";","&","amp",";","shoulUseSourceMap",",","moules",":","true",",","getLocalIent",":","getCSSMouleLocalIent",",","&","#","125",";",",","'","less","-","loaer","'",")","&","#","125",";",",","用法",":","编写","less","文件","：","App",".","less","12345678910",".","App","&","#","123",";","wth",":","100%",";","heght",":","150","px",";","backgroun",":","#","00","a","4","ff",";",".","common","&","#","123",";","text","-","algn",":","center",";","lne","-","heght",":","150","px",";","color",":","hotpnk",";","&","#","125",";","&","#","125",";","在","js","文件","中","直接","使用","：","改写","App",".","js","12345678910111213141516","mport","React","from","'","react","'",";","mport","User","from","'",".","componentsUser","'","mport","'",".","App",".","less","'","functon","App","(",")","&","#","123",";","return","(","className","=","\"","App","\"","p","className","=","\"","common","\"","悲催","的","一天","开始","了","p","User",")",";","&","#","125",";","export","efault","App",";","注意","：","刚刚","启用","的","scss","、","less","是","没有","启动","模块化","的","，","在","web",".","confg",".","js","中","启动","模块化","然后","在","css","中","不要","启动","模块化",",","确保","引入","第三方","插件","时","能够","正常","使用","123456789101112131415","Less","解析","配置","&","#","123",";","test",":","lessRegex",",","exclue",":","lessMouleRegex",",","use",":","getStyleLoaers","(","&","#","123",";","mportLoaers",":","2",",","moules",":","true",",","localIentName",":","'","[","name","]","_","_","[","local","]","-","[","hash",":","base","64",":","5","]","'",",","sourceMap",":","sEnProucton","&","amp",";","&","amp",";","shoulUseSourceMap",",","&","#","125",";",",","'","less","-","loaer","'",")",",","seEffects",":","true",",","&","#","125",";",",","1.4","添加","图片","、","字体","图标","、","文件","使用","：","在","js","文件","中","使用",":","12345","引用","例如","mport","logo","from","'",".","logo",".","png","'","mg","src","=","&","#","123",";","logo","&","#","125",";","alt","=","\"","Logo","\"","在","css","文件","中","使用","：","1234","例如",".","Logo","&","#","123",";","backgroun","-","mage",":","url","(",".","logo",".","png",")",";","&","#","125",";","使用","：","在","nex",".","js","或者","App","根","组件","中","直接","引入","confont",".","css","12345","例如","mport","'",".","styleconfont",".","css","'","引用","p","className","=","\"","con","-","fenxang","\"","子","组件","p","2",".","配置","代理","环境变量","：","在","根目录","直接","新建","文件","：",".","en",".","proucton","就是","生产","环境","的","变量","变量","规则","：","必须","是","REACT","_","APP","_","开头","的","1","REACT","_","APP","_","ROOT","=","'","ap","'","读取","不变","还是","1","let","root","=","process",".","en",".","REACT","_","APP","_","ROOT","设置","代理","在","src","根目录","新建","：","setupProxy",".","js","配置","还是","一样","的","1234567891011","const","proxy","=","requre","(","'","http","-","proxy","-","mleware","'",")","moule",".","exports","=","functon","(","app",")","&","#","123",";","app",".","use","(","proxy","(","'","ap","'",",","&","#","123",";","target",":","'","http",":","192.168.152.55",":","6666","'",",","changeOrgn",":","true",",","pathRewrte",":","&","#","123",";","\"","^","ap","\"",":","\"","\"","&","#","125",";","&","#","125",";",")",")","&","#","125",";","*","react","会","自动","加载","这个","文件","*","3",".","Reux","使用","3.1","Reux","介绍","Reux","是","一个","用来","管理","管理","数据","状态","和","UI","状态","的","JaaScrpt","应用","工具","。","随着","JaaScrpt","单页","应用","（","SPA","）","开发","日趋","复杂","，","JaaScrpt","需要","管理","比","任何","时候","都","要多","的","state","（","状态","）","，","Reux","就是","降低","管理","难度","的","安装","：","1","npm","reux","-","S","项目","src","下","新建","TooLst",".","jsx","：","1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556","mport","React",",","&","#","123",";","Component","&","#","125",";","from","'","react","'","mport","store","from","'",".","storenex","'","src","下","的","创建","的","store","文件","mport","&","#","123",";","changeInputActon",",","aItemActon",",","eleteItemActon",",","getLst","&","#","125",";","from","'",".","storeactonCreators","'","mport","TooLstUI","from","'",".","TooLstUI","'","mport","axos","from","'","axos","'","class","TooLst","extens","Component","&","#","123",";","constructor","(","props",")","&","#","123",";","super","(","props",")",";","store",".","getState","(",")","会","拿到","store","中","存储","的","值","ths",".","state","=","store",".","getState","(",")","ths",".","changeInputValue","=","ths",".","changeInputValue",".","bn","(","ths",")","ths",".","storeChange","=","ths",".","storeChange",".","bn","(","ths",")","ths",".","clckBtn","=","ths",".","clckBtn",".","bn","(","ths",")","ths",".","eleteItem","=","ths",".","eleteItem",".","bn","(","ths",")","订阅","Reux","的","状态","store",".","subscrbe","(","ths",".","storeChange",")","&","#","125",";","rener","(",")","&","#","123",";","return","TooLstUI","nputValue","=","&","#","123",";","ths",".","state",".","nputValue","&","#","125",";","lst","=","&","#","123",";","ths",".","state",".","lst","&","#","125",";","changeInputValue","=","&","#","123",";","ths",".","changeInputValue","&","#","125",";","clckBtn","=","&","#","123",";","ths",".","clckBtn","&","#","125",";","eleteItem","=","&","#","123",";","ths",".","eleteItem","&","#","125",";","&","#","125",";","componentDMount","(",")","&","#","123",";","axos",".","get","(","'","http",":","localhost",":","3000","Lst",".","json","'",")",".","then","(","res","=","&","#","123",";","console",".","log","(","res",".","ata",")","const","acton","=","getLst","(","res",".","ata",".","ata",")","store",".","spatch","(","acton",")","&","#","125",";",")","&","#","125",";","changeInputValue","(","e",")","&","#","123",";","const","acton","=","changeInputActon","(","e",".","target",".","alue",")","store",".","spatch","(","acton",")","&","#","125",";","clckBtn","(",")","&","#","123",";","const","acton","=","aItemActon","(",")","store",".","spatch","(","acton",")","&","#","125",";","eleteItem","(","nex",")","&","#","123",";","const","acton","=","eleteItemActon","(","nex",")","store",".","spatch","(","acton",")","&","#","125",";","订阅","Reux","的","状态","storeChange","(",")","&","#","123",";","ths",".","setState","(","store",".","getState","(",")",")","&","#","125",";","&","#","125",";","export","efault","TooLst",";","项目","src","下","新建","TooLstUI",".","jsx","1234567891011121314151617181920212223242526272829","mport","React","from","'","react","'","mport","'","antstant",".","css","'","mport","&","#","123",";","Input",",","Button",",","Lst","&","#","125",";","from","'","ant","'","const","TooLstUI","=","(","props",")","=","&","#","123",";","console",".","log","(","props",")","return","(","Input","placeholer","=","&","#","123",";","props",".","nputValue","&","#","125",";","style","=","&","#","123",";","&","#","123",";","wth",":","'","250","px","'",",","margnRght",":","'","10","px","'","&","#","125",";","&","#","125",";","onChange","=","&","#","123",";","props",".","changeInputValue","&","#","125",";","alue","=","&","#","123",";","props",".","nputValue","&","#","125",";","Button","type","=","\"","prmary","\"","onClck","=","&","#","123",";","props",".","clckBtn","&","#","125",";","增加","Button","style","=","&","#","123",";","&","#","123",";","margn",":","'","10","px","'",",","wth",":","'","300","px","'","&","#","125",";","&","#","125",";","Lst","borere","ataSource","=","&","#","123",";","props",".","lst","&","#","125",";","renerItem","=","&","#","123",";","(","tem",",","nex",")","=","(","Lst",".","Item","onClck","=","&","#","123",";","(",")","=","&","#","123",";","props",".","eleteItem","(","nex",")","&","#","125",";","&","#","125",";","&","#","123",";","tem","&","#","125",";","Lst",".","Item",")","&","#","125",";",")","&","#","125",";","export","efault","TooLstUI",";","项目","src","下","新建","store","文件夹","，","然后","创建","nex",".","js","1234567891011","引入","createStore","方法","mport","&","#","123",";","createStore","&","#","125",";","from","'","reux","'","mport","reucer","from","'",".","reucer","'","创建","数据","存储","仓库","const","store","=","createStore","(","reucer",",","wnow",".","_","_","REDUX","_","DEVTOOLS","_","EXTENSION","_","_","&","amp",";","&","amp",";","wnow",".","_","_","REDUX","_","DEVTOOLS","_","EXTENSION","_","_","(",")",")","export","efault","store","在","创建","reucer",".","jsx","(","reucer","配合","nex",".","js","使用",")","12345678910111213141516171819202122232425262728293031323334353637","mport","&","#","123",";","CHANGE","_","INPUT",",","ADD","_","ITEM",",","DELETE","_","ITEM",",","GET","_","LIST","&","#","125",";","from","'",".","actonType","'","默认","数据","const","efaultState","=","&","#","123",";","nputValue",":","'","Wrte","SomeThng",".",".",".","'",",","lst",":","[","]","&","#","125",";","Reucer","里","只","能","接收","state","，","不能","改变","stateexport","efault","(","state","=","efaultState",",","acton",")","=","&","#","123",";","就是","一个","方法","函数","*","*","*","state",":","指","的","是","原始","仓库","里","的","状态","*","acton",":","指","的","是","acton","新","传递","的","状态","*","f","(","acton",".","type","=","=","=","CHANGE","_","INPUT",")","&","#","123",";","let","newState","=","JSON",".","parse","(","JSON",".","strngfy","(","state",")",")","深度","拷贝","newState",".","nputValue","=","acton",".","alue","return","newState","&","#","125",";","f","(","acton",".","type","=","=","=","ADD","_","ITEM",")","&","#","123",";","let","newState","=","JSON",".","parse","(","JSON",".","strngfy","(","state",")",")","深度","拷贝","newState",".","lst",".","unshft","(","newState",".","nputValue",")","newState",".","nputValue","=","'","'","return","newState","&","#","125",";","f","(","acton",".","type","=","=","=","DELETE","_","ITEM",")","&","#","123",";","let","newState","=","JSON",".","parse","(","JSON",".","strngfy","(","state",")",")","深度","拷贝","newState",".","lst",".","splce","(","acton",".","nex",",","1",")","return","newState","&","#","125",";","f","(","acton",".","type","=","=","=","GET","_","LIST",")","&","#","123",";","console",".","log","(","acton",")","let","newState","=","JSON",".","parse","(","JSON",".","strngfy","(","state",")",")","newState",".","lst","=","acton",".","lst",".","lst","return","newState","&","#","125",";","return","state","&","#","125",";","publc","文件夹","下","创建","Lst",".","json","1234567891011","当作","axos","请求","的","数据","&","#","123",";","\"","ata","\"",":","&","#","123",";","\"","lst","\"",":","[","\"","早上","起","不","来","，","起床","困难","族","\"",",","\"","中午","没","精神",",","没","办法",",","我","太","难了","\"",",","\"","别","说","了",",","晚上","加班","搞","工作","、","学习","、","学习","使","我","快乐","\"",",","\"","我","要","加班","、","我","要","加班","、","我","要","加班","、","重要的","事情","说","三遍","!","!","!","\"","]","&","#","125",";","&","#","125",";","Reux","的","三个","小","坑","1",".","store","必须","是","唯一","的","，","多","个","store","是","坚决","不","被","允许","的","，","只能","有","一个","store","空间","2",".","只","有","store","能","改变","自己","的","内容","，","Reucer","不能","改变","3",".","Reucer","必须","是","纯","函数","纯","函数","的","定义","是","：","如果","函数","的","调用","参数","相同","，","则","永远","返回","相同","的","结果","。","它","不依赖","于","程序","执行","期间","函数","外部","任何","状态","或","数据","的","变化","，","必须","只","依赖于","其","输入","参数"],"url":"http://yoursite.com/2020/02/04/React%E5%AD%A6%E4%B9%A0%E2%80%94Create-React-App/","title":"React学习—Create-React-App","content":"1. create-react-app 创建及使用\nCreate React App是FaceBook的React团队官方出的一个构建React单页面应用的脚手架工具。它本身集成了Webpack，并配置了一系列内置的loader和默认...","author":"xiaoxiong","categorie":{},"date":"2020-02-04 14:37:18"},{"word":["1",".","React","Router","4","react","-","router","React","Router","核心","react","-","router","-","om","用于","DOM","绑定","的","React","Router","react","-","router","-","nate","用于","React","Nate","的","React","Router","react","-","router","-","reux","React","Router","和","Reux","的","集成","react","-","router","-","confg","用于","配置","静态","路由","因此","，","在","实际","的","web","项目","开发","中","，","react","-","router","和","react","-","router","-","om","不必","同时","引用","。","在","react","-","router","-","om","中","包含","BrowserRouter","类似","的","DOM","类","组件","，","所以","只","需要","引入","react","-","router","-","om","包","就","可以","了","使用方法",":","1","mport","&","#","123",";","BrowserRouter","as","Router",",","Route",",","Lnk",",","Swtch","&","#","125",";","from","\"","react","-","router","-","om","\"",";","2",".","页面","中","多","个","模块","同时","渲染","问题","12345678910","ReactDOM",".","rener","(","(","BrowserRouter","className","=","\"","contaner","\"","Route","path","=","\"","\"","component","=","&","#","123",";","Inex","&","#","125",";","Route","path","=","\"","car","\"","component","=","&","#","123",";","Car","&","#","125",";","BrowserRouter",")",",","ocument",".","getElementByI","(","'","app","'",")",")",";","当","访问","path","=","&","quot",";","car","&","quot",";","的","页面","时","，","path","=","&","quot",";","&","quot",";","的","页面","也","会","被","渲染","出来","。","匹配","path","=","&","quot",";","car","&","quot",";","的","路由","会","匹配","path","=","&","quot",";","&","quot",";","的","路由","。","那么","这个问题","怎么","解决","呢","？","有","以下","两种","方法","使用","Router","的","exact","关键字","12345678910","ReactDOM",".","rener","(","(","BrowserRouter","className","=","\"","contaner","\"","Route","path","=","\"","\"","exact","component","=","&","#","123",";","Inex","&","#","125",";","Route","path","=","\"","car","\"","component","=","&","#","123",";","Car","&","#","125",";","BrowserRouter",")",",","ocument",".","getElementByI","(","'","app","'",")",")",";","使用","独立","路由","：","swtch","1234567891011121314","mport","&","#","123",";","BrowserRouter",",","Route",",","Swtch",",","Rerect","&","#","125",";","from","'","react","-","router","-","om","'",";","ReactDOM",".","rener","(","(","BrowserRouter","Swtch","className","=","\"","contaner","\"","Route","path","=","\"","\"","exact","component","=","&","#","123",";","Inex","&","#","125",";","Route","path","=","\"","car","\"","component","=","&","#","123",";","Car","&","#","125",";","Swtch","BrowserRouter",")",",","ocument",".","getElementByI","(","'","app","'",")",")",";","首先","需要","了","解下","Router","。","它是","所有","路由","组件","共用","的","底层","接口","，","你","可以","将","各种","组件","及","标签","放进","Router","组件","中","，","比如","：","12345678910","Router","ul","lLnk","to","=","\"","\"","HomeLnkl","ul","hr","Route","exact","path","=","\"","\"","component","=","&","#","123",";","Home","&","#","125",";","Route","path","=","\"","about","\"","component","=","&","#","123",";","About","&","#","125",";","Router","需要","注意的","是","：","下","值","允许","存在","一","个子","元素","，","如","存在","多","个","则","会报","错","。","所以","上面","的","代码","中","，","需要","使用","包裹","起来","在","实际","的","项目","中","，","我们","一般","不会","直接","使用","Router",",","而是","使用","如下","的","更高","级","的","路由","。","在","这里","将","介绍","到","第","一个","问题","中用","到","的","BrowserRouter","以及","其他","常用的","高级","路由","。","BrowserRouter","使用","HTML","5","提供","的","hstory","API","(","pushState",",","replaceState","和","popstate","事件",")","来","保持","UI","和","url","的","同步","。","下面","介绍","一下","该","路由","组件","中的","5","个","属性","：","basename",":","strng","当前位置","的","基准","url","。","如果","你","的","页面","部署","在","服务器","的","二级","（","子","）","目录","，","你","需要","将","basename","设置","到","此","子目录","。","正确的","url","格式","是","前面","有","一个","前导","斜杠","，","但","不能","有","尾部","斜杠","。","12","BrowserRouter","basename","=","\"","calenar","\"","Lnk","to","=","\"","toay","\"","渲染","为","a","href","=","\"","calenartoay","\"","getUserConfrmaton",":","func","当","导航","需要","确认","时","执行","的","函数","。","默认","使用","wnow",".","confrm","。","123456","使用","默认","的确","认","函数","const","getConfrmaton","=","(","message",",","callback",")","=","&","#","123",";","const","allowTranston","=","wnow",".","confrm","(","message",")","callback","(","allowTranston",")","&","#","125",";","BrowserRouter","getUserConfrmaton","=","&","#","123",";","getConfrmaton","&","#","125",";","forceRefresh",":","bool","当","设置","为","true","时","，","在","导航","的","过程","中","整个","页面","将会","刷新","。","只有","当","浏览器","不支持","HTML","5","的","hstory","API","时","，","才","设置","为","true","。","12","const","supportsHstory","=","'","pushState","'","n","wnow",".","hstoryBrowserRouter","forceRefresh","=","&","#","123",";","!","supportsHstory","&","#","125",";","keyLength",":","number","locaton",".","key","的","长度","，","默认","是","6","。","点击","同一个","链接","时","，","每次","该","路由","下","的","locaton",".","key","都会","改变","，","可以","通过","key","的","变化","来","刷新","页面","。","1","BrowserRouter","keyLength","=","&","#","123",";","12","&","#","125",";","chlren",":","noe","渲染","单一","子","组件","（","元素","）","。","HashRouter","HashRouter","是","一种","特定","的","Router","，","HashRouter","使用","url","的","hash","(","例如","：","wnow",".","locaton",".","hash",")","来","保持","UI","和","url","的","同步","。","由于","使用","hash","的","方式","记录","导航","历史","不支持","locaton",".","key","和","locaton",".","state","，","该","技术","仅","用于","支持","传统","的","浏览器","。","介绍","完","，","当然","也","要说","下","，","我们","使用","最","频繁的","组件","，","主要职责","是","当","页面","的","访问","地址","与","Route","上","的","path","匹配","时","渲染","出","对应","的","UI","界面","。","Route","属性","值","主要","有","：","path",":","strng","可以","被","path","-","to","-","regexp","解析","的","有效","url","路径","。","如果","没有","path","，","路由","将","总是","被","匹配","。","1","Route","path","=","\"","users",":","\"","component","=","&","#","123",";","User","&","#","125",";","exact",":","bool","为","true","时","，","则","要求","路径","与","locaton",".","pathname","必须","完全","匹配","。","通过","下","表解","释","一下","：","strct",":","bool","为","true","时","，","有","结尾","斜线","的","路径","只能","匹配","有","斜线","的","locaton",".","pathname","。","见","下","表","：","第二个","属性","值","exact","就是","我们","用来","解决","多","个","模块","同时","渲染","问题","的","，","默认","值","为","true","。","在","这里","简要","提","下","Route","渲染","的","三种","方法","：","Route","component","当","访问","地址","和","路由","匹配","时","，","一个","React","component","将会","被","渲染","Route","rener","此","方法","适用于","内联","渲染","，","而且","不会","产生","重复","装载","问题","Route","chlren","当","需要","判断","访问","地址","与","路由","是否","匹配","时","，","可以","使用","此","方法","。","当","不","匹配","时","，","match","为","null","。","我们","上面","代码","示例","中","使用","的","是","第一种","方法","Route","Component","，","这","三种","渲染","方法","都会","用到","match","、","locaton","、","hstory","这些","属性","值","。","需要","注意的","是","：","每一种","渲染","方法","都","有","其","适用","背景",",","Route","component","的","优先级","比","Route","rener","高","，","而","他们","又","都","优先","于","Route","chlren","，","所以","在","同一个","Route","应该","只","使用","一种","方法","，","我们","大多数","使用","的","是","component","方法","。","说完","第一种","解决方法","的","原理","，","来","剖析","下第","二种","方法","：","Swtch","。","该","组件","只","渲染","第","一个","与","当前","访问","地址","匹配","的","Route","或","Rerect","。","它","和","多","个","堆叠","的","Route","组件","之间","的","区别","是","：","Swtch","只","渲染","一个","路由","。","在","解决方法","（","2","）","中","，","当","我们","访问","car","，","Swtch","将会","开始","寻找","与之","匹配","的","路由","，","查找","到","Route","path","=","&","quot",";","car","&","quot",";","匹配","后","，","Swtch","将会","停止","寻找","然后","开始","渲染","car","。","chlren",":","noe","Swtch","下","的","子","节点","只","能","是","Route","或","Rerect","元素","且","只有","与","当前","访问","地址","匹配","的","第一","个子","节点","才","会","被","渲染","。","3",".","如何","定义","默认","访问","页面","有时","我们","需要","定义","一个","默认","页面","，","重新","引导","用户","的","操作","使用","Rerect","。","比如","当","用户","手动","输入","test","之后","，","我们","需要","跳转","至","首页","，","则","代码","如下","所","示","：","12345678910111213","ReactDOM",".","rener","(","(","BrowserRouter","className","=","\"","contaner","\"","Swtch","Route","path","=","&","#","123",";","routePaths",".","INDEX","&","#","125",";","exact","component","=","&","#","123",";","Inex","&","#","125",";","Route","path","=","&","#","123",";","routePaths",".","CARD","&","#","125",";","component","=","&","#","123",";","Car","&","#","125",";","Rerect","to","=","\"","\"","Swtch","BrowserRouter",")",",","ocument",".","getElementByI","(","'","app","'",")",")",";","方法","解析","：","Rerect","渲染","时","将会","导向","一个","新的","地址","，","这个","新的","地址","将会","覆盖","掉","hstory","堆栈","中的","当前","地址","。","Rerect","其","常用的","属性","是","：","to",":","strng","重","定向","的","url","地址","。","1","Rerect","to","=","\"","somewhereelse","\"","to",":","object","重","定向","的","locaton","对象","。","12345","Rerect","to","=","&","#","123",";","&","#","123",";","pathname",":","'","logn","'",",","search",":","'","?","utm","=","your","+","face","'",",","state",":","&","#","123",";","referrer",":","currentLocaton","&","#","125",";","&","#","125",";","&","#","125",";","push",":","bool","取","值","为","true","时","，","重","定向","操作","将会","把","新","地址","加入","到访","问","的","历史记录","里面","，","并不","会","替换","掉","当前","的","地址","。","1","Rerect","push","to","=","\"","somewhereelse","\"","from",":","strng","需要","匹配","的","将要","被","重","定向","的","路径","。","1234","Swtch","Rerect","from","=","'","ol","-","path","'","to","=","'","new","-","path","'","Route","path","=","'","new","-","path","'","component","=","&","#","123",";","Place","&","#","125",";","Swtch","需要","注意的","是","：","Route","元素","使用","path","属性","进行","匹配","，","Rerect","元素","使用","from","属性","进行","匹配","。","如果","元素","中","没有","对应","的","path","或","from","，","那么","它们","将","匹配","任何","当前","的","访问","地址","。","4",".","路由","激活","状态","的","控制","使用","组件","或者","例如","：","1234","NaLnk","to","=","\"","faq","\"","acteClassName","=","\"","selecte","\"","FAQsNaLnk","NaLnk","是","Lnk","的","特殊","版本","，","当","遇到","匹配","的","URL","渲染","元素","时会","添加","样式","属性","，","适用于","页面","导航","部分","。","acteClassName",":","strng","导航","选中","时","的","样式","名","，","默认","样式","名为","acte","。","1234","NaLnk","to","=","\"","faq","\"","acteClassName","=","\"","selecte","\"","FAQsNaLnk","acteStyle",":","object","导航","选中","时","的","样式","。","1234567","NaLnk","to","=","\"","faq","\"","acteStyle","=","&","#","123",";","&","#","123",";","fontWeght",":","'","bol","'",",","color",":","'","re","'","&","#","125",";","&","#","125",";","FAQsNaLnk","exact",":","bool","若值","为","true","，","当","访问","地址","严格","匹配","时","激活","样式","才","会","生效","。","1234","NaLnk","exact","to","=","\"","profle","\"","ProfleNaLnk","strct",":","bool","若值","为","true","，","只有","当","访问","地址","后缀","斜杠","严格","匹配","（","有","或","无","）","时","激活","样式","才","会","生效","1234","NaLnk","strct","to","=","\"","eents","\"","EentsNaLnk","sActe",":","func","用于","添加","页面","激活","时","的","操作","逻辑","。","123456789101112","const","oEent","=","(","match",",","locaton",")","=","&","#","123",";","f","(","!","match",")","&","#","123",";","return","false","&","#","125",";","const","eentID","=","parseInt","(","match",".","params",".","eentID",")","return","!","sNaN","(","eentID",")","&","amp",";","&","amp",";","eentID","%","2","=","=","=","1","&","#","125",";","NaLnk","to","=","\"","eents","123","\"","sActe","=","&","#","123",";","oEent","&","#","125",";","Eent","123","NaLnk","5",".","页面","跳转","使用","hstory","控制","路由","的","跳转","1","ths",".","props",".","hstory",".","push","(","'","somepath","'",")",";","hstory","指","的","是","hstory","包","，","是","4",".","x","中的","重要","依赖","之一","。","常见的","hstory","路由","方案","有","三种","形式","，","分","别","是","：","browser","hstory","在","DOM","上","的","实现","，","用于","支持","HTML","5","hstory","API","的","浏览器","；","hash","hstory","在","DOM","上","的","实现","，","用于","旧版","浏览器","；","memory","hstory","在","内存","上","的","实现","，","用于","测试","或","非","DOM","环境","（","如","React","Nate","）","hstory","对象","包含","的","属性","和","方法","如下","所","示","：","length",":","number","hstory","堆栈","中的","地址","数目","acton",":","strng","当前","的","动作","(","PUSH",",","REPLACE",",","或者","是","POP",")","locaton",":","object","当前","访问","地址","信息","组成","的","对象","push","(","path",",","[","state","]",")",":","func","在","hstory","堆栈","信息","里加","入","一个","新","路径","replace","(","path",",","[","state","]",")",":","func","替换","hstory","堆栈","信息","里","的","当前","路径","go","(","n",")",":","func","将","hstory","堆栈","中的","指针","向前","移动","n","goBack","(",")",":","func","等同于","go","(","-","1",")","goForwar","(",")",":","func","等同于","go","(","1",")","block","(","prompt",")",":","func","阻止","跳转","需要","注意的","是","：","hstory","对象","是","可变","的","，","所以","不要","从","hstory",".","locaton","直接","获取","，","而是","需要","通过","Route","的","prop","来","获取","locaton","。","使用","Context","，","获得","router","对象","12345678910111213141516","mport","React","from","\"","react","\"",";","mport","PropTypes","from","\"","prop","-","types","\"",";","class","MyComponent","extens","React",".","Component","&","#","123",";","statc","contextTypes","=","&","#","123",";","router",":","PropTypes",".","object","&","#","125",";","constructor","(","props",",","context",")","&","#","123",";","super","(","props",",","context",")",";","&","#","125",";",".",".",".","myFuncton","(",")","&","#","123",";","ths",".","context",".","router",".","hstory",".","push","(","\"","somePath","\"",")",";","&","#","125",";",".",".",".","&","#","125",";","6",".","切换","路由","后","，","页面","仍然","停留","在","上一个","页面","的","位置","问题","：","由","A","页面","跳转","到","B","页面","，","B","页面","停留","在","A","页面","的","位置","，","没有","返回","到顶","部","。","用户","可以","对","wnow","和","独立","组件","的","滚动","位置","进行","管理","。","可以","使用","wthRouter","组件","：","wthRouter","可以","访问","历史","对象","的","属性","和","最近","的","Route","匹配","项","，","当路","由","的","属性","值","{","match",",","locaton",",","hstory","}","改变","时","，","wthRouter","都会","重新","渲染","。","该","组件","可以","携带","组件","的","路由","信息","，","避免","组件","之间","一层层","传递","。","使用方法","如下","：","1","wthRouter","(","MyComponent",")","这样","就","可以","获取","到","MyComponent","组件","的","路由","信息","了","。","解决方法","：","使用","wthRouter","封装","ScrollToTop","组件","。","这里","就","用到","了","wthRouter","携带","路由","信息","的","特性","，","通过","对比","props","中","locaton","的","变化","，","实现","页面","的","滚动","定义","ScrollToTop","组件","，","代码","如下","：","1234567891011121314","mport","React",",","&","#","123",";","Component","&","#","125",";","from","'","react","'",";","mport","&","#","123",";","Route",",","wthRouter","&","#","125",";","from","'","react","-","router","-","om","'",";","class","ScrollToTop","extens","Component","&","#","123",";","componentDUpate","(","preProps",")","&","#","123",";","f","(","ths",".","props",".","locaton","!","=","=","preProps",".","locaton",")","&","#","123",";","wnow",".","scrollTo","(","0",",","0",")","&","#","125",";","&","#","125",";","rener","(",")","&","#","123",";","return","ths",".","props",".","chlren","&","#","125",";","&","#","125",";","export","efault","wthRouter","(","ScrollToTop",")",";","在","定义","路由","处","引用","该","组件","，","例如","：","123456789101112","ReactDOM",".","rener","(","(","BrowserRouter","ScrollToTop","className","=","\"","contaner","\"","Route","path","=","&","#","123",";","routePaths",".","INDEX","&","#","125",";","exact","component","=","&","#","123",";","Inex","&","#","125",";","Route","path","=","&","#","123",";","routePaths",".","CARD","&","#","125",";","component","=","&","#","123",";","Car","&","#","125",";","ScrollToTop","BrowserRouter",")",",","ocument",".","getElementByI","(","'","app","'",")",")",";","这样","处理","之后","，","当","跳转","页面","时","都会","自动","回到","该","页面","的","顶部","位置","。","7",".","页面","之间","如何","传值","问题","背景","：","当路","由","发生","跳转","时","我们","可能","需要","携带","一些","参数","解决方法","：","使用","props","属性","，","介绍","以下","三种","传值","方法","：","props",".","params","指定","一个","path","，","然后","指定","通配符","可以","携带","参数","到","指定","的","path","：","1","Route","path","=","'","user",":","name","'","component","=","&","#","123",";","UserPage","&","#","125",";","Route","跳转","UserPage","页面","时","，","可以","这样","写","1234","lnk","方法","Lnk","to","=","\"","usersam","\"","用户","Lnkpush","方法","ths",".","props",".","hstory",".","push","(","\"","usersam","\"",")",";","在","UserPage","页面","中","通过","ths",".","props",".","params",".","name","获取","值","。","上面","的","方法","可以","传递","一个","或","多","个","值","，","但是","每个","值","的","类型","都是","字符串","，","没法","传递","一个","对象","。","如果","要传","的话","可以","将","json","对象","转换","为","字符串","，","传递","过去","之后","再","将","json","字符串","转换","为","对象","。","123456","let","ata","=","&","#","123",";",":","3",",","name",":","sam",",","age",":","36","&","#","125",";",";","ata","=","JSON",".","strngfy","(","ata",")",";","let","path","=","'","user","$","&","#","123",";","ata","&","#","125",";","'",";","在","页面","中","获取","值时","let","ata","=","JSON",".","parse","(","ths",".","props",".","params",".","ata",")",";","queryquery","方式","可以","传递","任意","类型","的","值","，","但是","页面","的","url","也是","由","query","的","值","拼接","的","，","url","很","长","且","是","明文","传输","。","1234567891011121314151617","定义","路由","Route","path","=","'","user","'","component","=","&","#","123",";","UserPage","&","#","125",";","Route","数据","定义","let","ata","=","&","#","123",";",":","3",",","name",":","sam",",","age",":","36","&","#","125",";",";","let","path","=","&","#","123",";","pathname",":","'","user","'",",","query",":","ata",",","&","#","125",";","页面","跳转","Lnk","to","=","&","#","123",";","path","&","#","125",";","用户","Lnkths",".","props",".","hstory",".","push","(","path",")",";","页面","取","值","let","ata","=","ths",".","props",".","locaton",".","query",";","let","&","#","123",";",",","name",",","age","&","#","125",";","=","ata",";","statestate","方式","类似于","post","，","依然","可以","传递","任意","类型","的","数据","，","而且","可以","不","以","明文","方式","传输","。","1234567891011121314151617","定义","路由","Route","path","=","'","user","'","component","=","&","#","123",";","UserPage","&","#","125",";","Route","数据","定义","let","ata","=","&","#","123",";",":","3",",","name",":","sam",",","age",":","36","&","#","125",";",";","let","path","=","&","#","123",";","pathname",":","'","user","'",",","state",":","ata",",","&","#","125",";","页面","跳转","Lnk","to","=","&","#","123",";","path","&","#","125",";","用户","Lnkths",".","props",".","hstory",".","push","(","path",")",";","页面","取","值","let","ata","=","ths",".","props",".","locaton",".","state",";","let","&","#","123",";",",","name",",","age","&","#","125",";","=","ata",";","8",".","使用","BrowserRouter","配置","路由","，","上传","页面","至","服务器","后","页面","出现","404","问题","背景","：","项目","中","控制","路由","跳转","使用","的","是","BrowserRouter","，","代码","如下","：","12345678910","ReactDOM",".","rener","(","(","BrowserRouter","className","=","\"","contaner","\"","Route","path","=","&","#","123",";","routePaths",".","INDEX","&","#","125",";","exact","component","=","&","#","123",";","Inex","&","#","125",";","Route","path","=","&","#","123",";","routePaths",".","CARD","&","#","125",";","component","=","&","#","123",";","Car","&","#","125",";","BrowserRouter",")",",","ocument",".","getElementByI","(","'","app","'",")",")",";","在","开发","过程","中","使用","是","没有","问题","的","，","但是","将","页面","上传","至","服务器","之后","，","问题","就","来","了","：","用户","访问","的","资源","不存在","，","页面","是","空白","的","。","问题","分析","：","`","`","是","使用","React","-","Router","应用","推荐","的","hstory","方案","。","它","使用","浏览器","中的","Hstory","API","用于","处理","url","，","创建","一个","像","example",".","comlst","123","这样","真实的","url","。","当","通过","真实","url","访问","网站","的","时候","，","由于","路径","是","指向","服务器","的","真实","路径","，","但","该","路径","下","并没有","相关","资源","，","所以","用户","访问","的","资源","不存在","。","解决方法","：","1",".","使用","HashRouter","。","它","使用","url","中的","hash","（","#","）","部分","去","创建","路由","，","举例","来说","，","用户","访问","http",":","www",".","example",".","com","，","实际","会","看到","的","是","http",":","www",".","example",".","com","#","。","为什么","本地","开发","时","没有","问题","呢","？","那是","因为","我们","的","React","脚手架","中","使用","webpack","-","e","-","serer","做","了","配置","。","123456","webpackConfg",".","eSerer","=","&","#","123",";","sableHostCheck",":","true",",","contentBase",":","path",".","resole","(","_","_","rname",",","'","bul","'",")",",","compress",":","true",",","gzp","压缩","hstoryApFallback",":","true","&","#","125",";",";","2",".","如果","要","使用","BrowserRouter","的话","，","服务器","需要","进行","相关","路由","配置"],"url":"http://yoursite.com/2020/02/03/React%E5%AD%A6%E4%B9%A0%E2%80%94React%20Router4/","title":"React学习—React Router4","content":"1. React Router 4\nreact-router React Router核心\nreact-router-dom 用于DOM绑定的React Router\nreact-router-native用于React Native...","author":"xiaoxiong","categorie":{},"date":"2020-02-03 23:58:29"},{"word":["1",".","Express","中","路由","和","中间件","路由","：","就是","如何","处理","HTTP","请求","中的","路径","部分","中间件","：","就是","在","收到","请求","后","和","发送","响应","之前","这个","阶段","执行","的","一些","函数","1.1","应用","及","中间件","123456789101112131415161718192021","next","方法","的","作用","就是","将","请求","传递","到","下一个","中间件","*","当","请求","进来","，","会","从","第一个","中间件","开始","进行","匹配","如果","匹配","，","则","进来","如果","请求","进入","中间件","之后","，","没有","调用","next","则","代码","会","停在","当前","中间件","如果","调用","了","next","则","继续","向后","找到","第","一个","匹配","的","中间件","如果","不","匹配","，","则","继续","判断","匹配","下一个","中间件","*","不关心","请求","路径","的","请求","不管","以","什么","路径","请求","只","要有","next","(",")","传递","app",".","use","(","(","req",",","res",",","next",")","=","&","#","123",";","console",".","log","(","'","1","'",")","1","next","(",")","&","#","125",";",")","app",".","use","(","(","req",",","res",",","next",")","=","&","#","123",";","console",".","log","(","'","2","'",")","2","next","(",")","&","#","125",";",")","app",".","use","(","(","req",",","res",".","next",")","=","&","#","123",";","console",".","log","(","'","3","'",")","3","&","#","125",";",")","1234567891011121314151617181920212223","关心","请求","路径","的","请求","app",".","use","(","(","req",",","res",",","next",")","=","&","#","123",";","console",".","log","(","'","1","'",")","next","(",")","&","#","125",";",")","app",".","use","(","'","b","'",",","(","req",",","res",",","next",")","=","&","#","123",";","console",".","log","(","'","b","'",")","&","#","125",";",")","以","a","开头","的","路径","中间件","app",".","use","(","'","a","'",",","(","req",",","res",",","next",")","=","&","#","123",";","console",".","log","(","'","a","'",")","next","(",")","&","#","125",";",")","app",".","use","(","(","req",",","res",",","next",")","=","&","#","123",";","console",".","log","(","'","2","'",")","&","#","125",";",")","当","在","浏览器","中","以","a","开头","的","请求","时","，","会","输出","1","a","2","当","在","浏览器","中","以","b","开头","的","请求","时","，","会","输出","1","b",",","这里","不会","输出","2","因为","当","请求","b","开头","的","请求","后","没有","next","(",")","方法","传递","就","会","停留","在","那个","请求","中","1.2","错误","处理","中间","件","1234567891011121314","app",".","use","(","'","user","'",",","(","req",",","res",",","next",")","=","&","#","123",";","try","&","#","123",";","console",".","log","(","has","error",")","next","(",")","&","#","125",";","catch","(","err",")","&","#","123",";","console",".","log","(","'","error","'",")","next","(","err",")","&","#","125",";","&","#","125",";",")","全局","错误","处理","中间件","app",".","use","(","(","err",",","req",",","res",",","next",")","=","&","#","123",";","console",".","log","(","err",".","stack",")","res",".","status","(","500",")",".","sen","(","'","error","message","'",")","&","#","125",";",")","12345678910111213141516171819202122232425262728293031323334","const","express","=","requre","(","'","express","'",")","const","fs","=","requre","(","'","fs","'",")","const","path","=","requre","(","'","path","'",")","const","app","=","express","(",")","app",".","get","(","'","a","'",",","(","req",",","res",",","next",")","=","&","#","123",";","fs",".","reaFle","(","path",".","jon","(","_","_","rname",",","'",".","atas",".","txt","'",")",",","'","utf","8","'",",","(","err",",","ata",")","=","&","#","123",";","f","(","err",")","&","#","123",";","return","next","(","err",")","&","#","125",";","console",".","log","(","ata",")","next","(",")","&","#","125",";",")","&","#","125",";",")","app",".","get","(","'","a","'",",","(","req",",","res",",","next",")","=","&","#","123",";","console",".","log","(","'","a","'",")","res",".","sen","(","'","a","'",")","&","#","125",";",")","当","不","匹配","任何","请求","路径","时","会","进去","此","错误","处理","app",".","use","(","(","req",",","res",",","next",")","=","&","#","123",";","res",".","sen","(","'","404","not","Foun","'",")","&","#","125",";",")","全局","错误","处理","中间件","app",".","use","(","(","err",",","req",",","res",",","next",")","=","&","#","123",";","res",".","status","(","500",")",".","sen","(","err",".","message",")","&","#","125",";",")","app",".","lsten","(","3000",",","(",")","=","&","#","123",";","console",".","log","(","'","runnng",".",".",".","'",")","&","#","125",";",")","1.3","express","中的","router","12345678910111213141516171819202122232425262728293031323334353637","app",".","jsconst","express","=","requre","(","'","express","'",")","const","publc","=","requre","(","'",".","routerpublc","'",")","const","user","=","requre","(","'",".","routeruser","'",")","const","app","=","express","(",")","app",".","use","(","'","publc","'",",","publc",")","当","请求","以","publc","开头","的","路径","时","才","会","进来","app",".","use","(","'","user","'",",","user",")","当","请求","以","uer","开头","的","路径","时","才","会","进来","app",".","lsten","(","3000",",","(",")","=","&","#","123",";","console",".","log","(","'","runnng",".",".",".","'",")","&","#","125",";",")","router","1",".","user",".","jsconst","express","=","requre","(","'","express","'",")","const","router","=","express",".","Router","(",")","router",".","get","(","'","a","'",",","(","req",",","res",")","=","&","#","123",";","res",".","sen","(","'","hello","noe","'",")","&","#","125",";",")","moule",".","exports","=","router","2",".","publc",".","jsconst","express","=","requre","(","'","express","'",")","const","router","=","express",".","Router","(",")","router",".","get","(","'","b","'",",","(","req",",","res",")","=","&","#","123",";","res",".","sen","(","'","hello","worl","'",")","&","#","125",";",")","moule",".","exports","=","router","app",".","router","(",")","要挂载","在","所有","第三方","中间件","的","后面","，","因为","前面","配置","的","中间件","是","app",".","router","(",")","中","请求","处理","函数","的","依赖"],"url":"http://yoursite.com/2020/01/13/Node%E4%B8%ADapp.use%E4%B8%AD%E9%97%B4%E4%BB%B6/","title":"Node中app.use中间件","content":"1. Express中路由和中间件路由：就是如何处理HTTP请求中的路径部分中间件：就是在收到请求后和发送响应之前这个阶段执行的一些函数1.1 应用及中间件123456789101112131415161718192021// nex...","author":"xiaoxiong","categorie":{},"date":"2020-01-13 16:00:19"},{"word":["1",".","Cooke","和","Sesson","​","会话","管理","：","客户端","和","服务端","通信","过程","中的","数据","是","如何","管理","的","​","会话","管理","的","技术","：","数据","存","在","客户端","Cooke","​","数据","存","在","服务端","Sesson","​","Cooke",":","http","请","求是","无","状态","的","。","也就是说","即使","第一次","和","服务器","连接","后","并且","登录","成功","后","，","第二次","请求","服务器","依然","不能","知道","当前","请","求是","哪个","用户","。","cooke","的","出现","就是","为了","解决","这个问题","，","第一次","登录","后","服务器","返回","一些","数据","（","cooke","）","给","浏览器","，","然后","浏览器","保存","在","本地","，","当","该","用户","发送","第二次","请求","的","时候","，","就","会","自动","的","把","上次","请求","存储","的","cooke","数据","自动","的","携带","给","服务器","，","服务器","通过","浏览器","携带","的","数据","就","能","判断","当前","用户","是","哪个","了","。","cooke","存储","的","数据量","有限","，","不同的","浏览器","有","不同的","存储","大小","，","但","一般","不超过","4","KB","。","因此","使用","cooke","只能","存储","一些","小量","的","数据","​","Sesson",":","sesson","和","cooke","的","作用","有点","类似","，","都是","为了","存储","用户","相关","的","信息","。","不同的","是","，","cooke","是","存储","在","本地","浏览器","，","而","sesson","存储","在","服务器","。","存储","在","服务器","的","数据","会","更加","的","安全","，","不容易","被","窃取","。","但","存储","在","服务器","也","有","一定","的","弊端","，","就是","会","占用","服务器","的","资源","1.1","express","中","使用","cooke","-","parser","中间件","1.1.1","安装","：","npm","nstall","cooke","-","parser","-","S","1.1.2","引","包","：","const","cookeParser","=","requre","(","‘","cooke","-","parser","’",")","1.1.3","配置","cooke","-","parser","中间件","123","const","cookeParser","=","requre","(","'","cooke","-","parser","'",")","app",".","use","(","cookeParser","(","'","secret","'",")",")","1.1.4","在","服务器","通过","res",".","cooke","(",")","方法","创建","一个","cooke","12345678","cooke","的","配置","参数","：","maxAge",":","是","cooke","最大","的","有效","时间","单位","为","毫秒","expres","：","是","cooke","的","过期","时间","是","一个","ate","对象","httpOnly","：","当前","cooke","是否","只","能","被","web","服务器","获取","snge",":","是否","对","cooke","进行","签名","(","防止","cooke","被","用户","在","浏览器","修改",")","path","：","是","cooke","的","有效","访问","路径","(","如果","没有","设置","，","则","默认","为","根","路径",")","比如","我们","设置","了","path",":","&","quot",";","&","#","x","2","F",";","&","quot",";","，","即","意味着","访问","当前","网站","的","任何","接口","都会","携带","cooke","比如","我们","设置","了","path",":","&","quot",";","&","#","x","2","F",";","user","&","quot",";","，","即","意味着","只有","访问","有","&","#","x","2","F",";","user","开头","的","接口","才","会","在","请求","中","携带","cooke","1.1.5","设置","cooke","的","请求","1234","app",".","get","(","\"","setCooke","\"",",","(","req",",","res",")","=","&","#","123",";","res",".","cooke","(","\"","name","\"",",","\"","cookename","\"",",","&","#","123",";","path",":","\"","user","\"",",","maxAge",":","600000",",","httpOnly",":","true",",","'","sgne","'",":","true","&","#","125",";",")","res",".","sen","(","'","setcooke","'",")","&","#","125",";",")","1.1.6","浏览器","再次","请求","服务器","的","时候","会","将","之前","创建","的","cooke","放","在","请求","头","中","发送","给","服务器",",","服务器","此时","可以","通过","req",".","cookes","来","查看","当前","的","cooke","1234567891011","app",".","get","(","\"","getCooke","\"",",","(","req",",","res",")","=","&","#","123",";","如果","没有","对","cooke","进行","签名","，","则","通过","req",".","cookes","来","获取","cooke","如果","对","cooke","进行","了","签名","，","则","通过","req",".","sgneCookes","来","获取","cooke","console",".","log","(","req",".","cookes",",","req",".","sgneCookes",")","&","#","123",";","&","#","125",";","&","#","123",";","&","#","125",";","res",".","sen","(","'","getcooke","'",")","&","#","125",";",")","app",".","get","(","\"","user","\"",",","(","req",",","res",")","=","&","#","123",";","console",".","log","(","req",".","cookes",",","req",".","sgneCookes",")","&","#","123",";","&","#","125",";","&","#","123",";","name",":","'","cookename","'","&","#","125",";","res",".","sen","(","'","getcooke","'",")","&","#","125",";",")","1.1.7","Cooke","记住","用户名","123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263","const","express","&","#","x","3","D",";","requre","(","&","#","39",";","express","&","#","39",";",")","const","boyParser","&","#","x","3","D",";","requre","(","&","#","39",";","boy","-","parser","&","#","39",";",")","const","cookeParser","&","#","x","3","D",";","requre","(","&","#","39",";","cooke","-","parser","&","#","39",";",")","const","app","&","#","x","3","D",";","express","(",")","app",".","use","(","boyParser",".","urlencoe","(","&","#","123",";","extene",":","false","&","#","125",";",")",")","app",".","use","(","boyParser",".","json","(",")",")","app",".","engne","(","&","#","39",";","html","&","#","39",";",",","requre","(","&","#","39",";","express","-","art","-","template","&","#","39",";",")",")","app",".","set","(","&","#","39",";","ews","&","#","39",";",",","_","_","rname","+","&","#","39",";","&","#","x","2","F",";","ews","&","#","39",";",")","app",".","use","(","cookeParser","(","&","#","39",";","xaoxong","&","#","39",";",")",")","app",".","get","(","&","#","39",";","&","#","x","2","F",";","logn","&","#","39",";",",","(","req",",","res",")","&","#","x","3","D",";","&","#","123",";","f","(","req",".","sgneCookes",".","name",")","&","#","123",";","res",".","rener","(","&","#","39",";","logn",".","html","&","#","39",";",",","&","#","123",";","name",":","req",".","sgneCookes",".","name","&","#","125",";",")","&","#","125",";","res",".","rener","(","&","#","39",";","logn",".","html","&","#","39",";",")","&","#","125",";",")","app",".","get","(","&","#","39",";","&","#","x","2","F",";","usercenter","&","#","39",";",",","(","req",",","res",")","&","#","x","3","D",";","&","#","123",";","f","(","req",".","sgneCookes",".","name",")","&","#","123",";","res",".","rener","(","&","#","39",";","usercenter",".","html","&","#","39",";",",","&","#","123",";","name",":","req",".","sgneCookes",".","name","&","#","125",";",")","&","#","125",";","res",".","rener","(","&","#","39",";","usercenter",".","html","&","#","39",";",")","&","#","125",";",")","app",".","post","(","&","#","39",";","&","#","x","2","F",";","logn","&","#","39",";",",","(","req",",","res",")","&","#","x","3","D",";","&","#","123",";","let","name","&","#","x","3","D",";","req",".","boy",".","name","let","pw","&","#","x","3","D",";","req",".","boy",".","pw","let","rmbname","&","#","x","3","D",";","req",".","boy",".","rmbname","&","#","x","2","F",";","&","#","x","2","F",";","console",".","log","(","name","+","&","#","39",";","-","-","-","&","#","39",";","+","pw","+","&","#","39",";","-","-","-","&","#","39",";","+","&","#","39",";","-","-","-","&","#","39",";","+","rmbname",")","f","(","rmbname","&","#","x","3","D",";","&","#","x","3","D",";","&","#","39",";","on","&","#","39",";",")","&","#","123",";","f","(","name","&","#","x","3","D",";","&","#","x","3","D",";","&","#","39",";","朱艳","&","#","39",";","&","amp",";","&","amp",";","pw","&","#","x","3","D",";","&","#","x","3","D",";","&","#","39",";","zhuyan","&","#","39",";",")","&","#","123",";","res",".","cooke","(","&","#","39",";","name","&","#","39",";",",","name",",","&","#","123",";","maxAge",":","60000",",","httpOnly",":","true",",","&","#","39",";","sgne","&","#","39",";",":","true","&","#","125",";",")","res",".","rerect","(","&","#","39",";","&","#","x","2","F",";","usercenter","&","#","39",";",")","&","#","125",";","else","&","#","123",";","res",".","sen","(","&","#","39",";","账号","或者","密码","有误","&","#","39",";",")","&","#","125",";","&","#","125",";","else","&","#","123",";","f","(","name","&","#","x","3","D",";","&","#","x","3","D",";","&","#","39",";","朱艳","&","#","39",";","&","amp",";","&","amp",";","pw","&","#","x","3","D",";","&","#","x","3","D",";","&","#","39",";","zhuyan","&","#","39",";",")","&","#","123",";","res",".","rerect","(","&","#","39",";","&","#","x","2","F",";","usercenter","&","#","39",";",")","&","#","125",";","else","&","#","123",";","res",".","sen","(","&","#","39",";","账号","或者","密码","错误","&","#","39",";",")","&","#","125",";","&","#","125",";","&","#","125",";",")","app",".","lsten","(","3000",",","(",")","&","#","x","3","D",";","&","#","123",";","console",".","log","(","&","#","39",";","runnng",".",".","&","#","39",";",")","&","#","125",";",")","2.1","express","中","express","-","sesson","中间件","2.1.1","安装","：","npm","nstall","express","-","sesson","-","S","2.1.2","引","包","：","const","expressSesson","=","requre","(","‘","express","-","sesson","’",")","2.1.3","配置","中间件","12345678910111213141516","app",".","use","(","expressSesson","(","&","#","123",";","name",":","\"","cooke","\"",",","指定","所","创建","的","sesson","对应","的","cooke","的","名字","secret",":","'","secret","'",",","指定","是否","要","签名","这个","cooke","resae",":","强制","保存","sesson","即使","它","并没有","变化",",","。","默认","为","true","。","建议","设置","成","false","。","但是","这个","并不一定","是","必须","的","，","如果","客户端","有","两个","并行","的","请求","到","你","的","服务端","，","一个","请求","对","sesson","的","修改","可能","被","另外","一个","请求","覆盖","掉","，","即使","第二个","请求","并没有","修改","sesson","resae",":","false",",","rollng",":","强制","在","每一个","response","中都","发送","sesson","标识符","的","cooke","。","rolng","默认","是","false","。","如果","把","这个","值","设置","为","true","但是","saeUntalze","设置","为","false",",","没","有","初始化","的","sesson","的","cooke","不会","被","包含","在","响应","中","。","主要","作用","：","每次","请求","都","重置","cooke","过期","时间","rollng",":","true",",","强制","没有","“","初始化","”","的","sesson","保存","到","storage","(","store",":","保存","sesson","的","地方",")","中","，","没","有","初始化","的","sesson","指","的","是","刚","被","创建","没","有","被","修改","。","默认","是","true",",","但是","不","建议","使用","默认值","saeUnntalze",":","false",",","cooke",":","&","#","123",";","maxAge",":","1000","*","60","*","3",",","指定","sesson","对应","的","cooke","的","有效","时间","&","#","125",";",",","&","#","125",";",")",")","2.1.4","设置","sesson","1234","app",".","get","(","&","#","39",";","&","#","x","2","F",";","setsesson","&","#","39",";",",","(","req",",","res",")","&","#","x","3","D",";","&","#","123",";","req",".","sesson",".","usernfo","&","#","x","3","D",";","&","#","39",";","xaoyang","&","#","39",";","res",".","sen","(","&","#","39",";","setsesson","&","#","39",";",")","&","#","125",";",")","2.1.5","得","到","sesson","1234","app",".","get","(","'","getsesson","'",",","(","req",",","res",")","=","&","#","123",";","console",".","log","(","req",".","sesson",")","res",".","sen","(","req",".","sesson",".","usernfo",")","&","#","125",";",")","2.1.6","sesson","登录","案例","123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081","const","express","=","requre","(","'","express","'",")","const","expressSesson","=","requre","(","'","express","-","sesson","'",")","const","boyParser","=","requre","(","'","boy","-","parser","'",")","const","app","=","express","(",")","app",".","use","(","boyParser",".","urlencoe","(","&","#","123",";","extene",":","false","&","#","125",";",")",")","app",".","use","(","boyParser",".","json","(",")",")","app",".","engne","(","'","html","'",",","requre","(","'","express","-","art","-","template","'",")",")","app",".","set","(","'","ews","'",",","_","_","rname","+","'","ews","'",")","app",".","use","(","expressSesson","(","&","#","123",";","name",":","\"","cooke","\"",",","指定","所","创建","的","sesson","对应","的","cooke","的","名字","secret",":","'","secret","'",",","指定","是否","要","签名","这个","cooke","resae",":","false",",","rollng",":","true",",","saeUnntalze",":","false",",","cooke",":","&","#","123",";","maxAge",":","1000","*","60","*","3",",","指定","sesson","对应","的","cooke","的","有效","时间","&","#","125",";",",","&","#","125",";",")",")","app",".","get","(","'","logn","'",",","(","req",",","res",")","=","&","#","123",";","let","user","=","req",".","sesson",".","user","console",".","log","(","user",")","res",".","rener","(","'","logn",".","html","'",",","user",")","&","#","125",";",")","app",".","post","(","'","logn","'",",","(","req",",","res",")","=","&","#","123",";","获取","请求","参数","信息","let","name","=","req",".","boy",".","name","let","pw","=","req",".","boy",".","pw","如果","用户","登录","成功","则","把","用户","的","信息","存储","到","sesson","中","f","(","name","=","=","'","sessonName","'","&","amp",";","&","amp",";","pw","=","=","'","123","'",")","&","#","123",";","存储","会话","数据","req",".","sesson",".","user","=","req",".","boy","跳转","到","用户","中心","页面","res",".","rerect","(","'","usercenter","'",")","&","#","125",";","else","&","#","123",";","res",".","sen","(","'","账号","或者","密码","错误","'",")","&","#","125",";","&","#","125",";",")","app",".","get","(","'","usercenter","'",",","(","req",",","res",")","=","&","#","123",";","从","sesson","中","获取","之前","保存","的","数据","let","user","=","req",".","sesson",".","user","console",".","log","(","user",")","f","(","user","&","amp",";","&","amp",";","user",".","name",")","&","#","123",";","res",".","rener","(","'","usercenter",".","html","'",",","&","#","123",";","name",":","user",".","name","&","#","125",";",")","&","#","125",";","else","&","#","123",";","res",".","rener","(","'","usercenter",".","html","'",",","&","#","123",";","name",":","'","efault","'","&","#","125",";",")","&","#","125",";","&","#","125",";",")","退出","的","登录","app",".","get","(","'","layout","'",",","(","req",",","res",")","=","&","#","123",";","清","空","sesson","req",".","sesson",".","estroy","(",")","res",".","rerect","(","'","home","'",")","&","#","125",";",")","app",".","get","(","'","home","'",",","(","req",",","res",")","=","&","#","123",";","let","user","=","req",".","sesson",".","user","f","(","user","&","amp",";","&","amp",";","user",".","name",")","&","#","123",";","res",".","rener","(","\"","home",".","html","\"",",","&","#","123",";","name",":","user",".","name","&","#","125",";",")","&","#","125",";","else","&","#","123",";","res",".","rener","(","\"","home",".","html","\"",",","&","#","123",";","name",":","\"","efault","\"","&","#","125",";",")","&","#","125",";","&","#","125",";",")","app",".","lsten","(","3000",",","(",")","=","&","#","123",";","console",".","log","(","'","runnng",".",".",".","'",")","&","#","125",";",")"],"url":"http://yoursite.com/2020/01/13/express%E4%B8%ADcookie%E5%92%8Csession%E7%9A%84%E4%BD%BF%E7%94%A8/","title":"express中cookie和session的使用","content":"1.Cookie 和 Session​       会话管理：客户端和服务端通信过程中的数据是如何管理的\n​       会话管理的技术：数据存在客户端  Cookie\n​                               ...","author":"xiaoxiong","categorie":{},"date":"2020-01-13 16:00:19"}]