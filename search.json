[{"word":["ES","6","的","Set","和","Map","数据结构","下","2",".","字典","：","在","数据结构","还有","一种","结构","叫做","字典","，","它","就是","实现","基于","ES","6","中的","Map","类","的","结构","那么","集合","又","和","字典","有","什么","区别","呢","：","共同点","：","集合","、","字典","可以","存储","不","重复","的","值","不同点","：","集合","是以","[","值","，","值","]","的","形式","存储","元素","，","字典","是以","[","键","，","值","]","的","形式","存储","Map","其实","的","主要用途","也是","用于","存储","数据","的","，","相比","于","Object","只","提供","“","字符串","—","值","”","的","对应","，","Map","提供","了","“","键","—","值","”","的","对应","。","也就是说","如果","你","需要","“","键值","对","”","的","数据结构","，","Map","比","Object","更","合适","下面","来看","一下","基本","使用","：","12345678910111213","const","m","=","new","Map","(",")",";","const","o","=","&","#","123",";","p",":","'","Hello","Worl","'","&","#","125",";",";","m",".","set","(","o",",","'","content","'",")",";","console",".","log","(","m",")",";","console",".","log","(","m",".","get","(","o",")",")",";","contentconsole",".","log","(","m",".","has","(","o",")",")",";","trueconsole",".","log","(","m",".","elete","(","o",")",")",";","trueconsole",".","log","(","m",".","has","(","o",")",")",";","false","以上","是","Map","的","基本","使用","。","Map","语法","1","new","Map","(","[","terable","]",")","Iterable","参数","可以","是","一个","数组","或者","其他","terable","对象","，","其","元素","为","键值","对","(","两个","元素","的","数组","，","例如",":","[","[","1",",","&","#","39",";","one","&","#","39",";","]",",","[","2",",","&","#","39",";","two","&","#","39",";","]","]",")","。","每个","键值","对","都会","添加","到","新的","Map","。","null","会","被","当做","unefne","。","123","const","m","=","new","Map","(","[","[","1",",","'","one","'","]",",","[","2",",","'","two","'","]","]",")",";","console",".","log","(","m",")",";","Map","&","#","123",";","1","=","'","one","'",",","2","=","'","two","'","&","#","125",";","一个","Map","对象","在","迭","代","时会","根据","对象","中","元素","的","插入","顺序","来","进行","—","个","for",".",".",".","of","循环","，","在","每次","迭","代","后","会","返回","一个","形式","为","[","key","，","alue","]","的","数组","1234567","const","m","=","new","Map","(","[","[","1",",","'","one","'","]",",","[","2",",","'","two","'","]","]",")",";","console",".","log","(","m",")",";","for","(","let","[","key",",","alue","]","of","m",")","&","#","123",";","console",".","log","(","'","key",":","'","+","key","+","'",",","'","+","'","alue",":","'","+","alue",")",";","key",":","1",",","alue",":","one","key",":","2",",","alue",":","two","&","#","125",";","Map","的","属性","和","方法","属性","：","sze","：","返回","字典","所","包含","的","元素","个数","操作方法","：","set","(","key",",","al",")",":","向","字典","中","添加","新元素","get","(","key",")",":","通过","键值","查找","特定","的","数值","并","返回","has","(","key",")",":","如果","键","存在","字典","中","返回","true",",","否则","false","elete","(","key",")",":","通过","键值","从","字典","中","移","除","对应","的","数据","clear","(",")",":","将","这个","字典","中的","所有","元素","删除","遍历","方法","：","keys","(",")",":","将","字典","中","包含","的","所有","键名","以","数组","形式","返回","alues","(",")",":","将","字典","中","包含","的","所有","数值","以","数组","形式","返回","forEach","(",")","：","遍历","字典","的","所有","成员","创建","一个","字典","12345","functon","Map","(",")","&","#","123",";","let","tems","=","&","#","123",";","&","#","125",";",";","&","#","125",";","moule",".","exports","=","Map","(",")",";","创建","好了","字典","这个","骨架","，","那","就","开始","添加","一些","方法","了","has","方法","首先","是","has","了","，","因","为","在","set","和","get","里","都会","用到","，","实现","思路","和","之前","写","的","集合","也","很","类似","123456789","functon","Map","(",")","&","#","123",";","let","tems","=","&","#","123",";","&","#","125",";",";","has","(","key",")","方法","ths",".","has","=","functon","(","al",")","&","#","123",";","return","tems",".","hasOwnProperty","(","al",")",";","&","#","125",";",";","&","#","125",";","moule",".","exports","=","Map","(",")",";","实现","了","has","方","法","后","，","我们","可","以来","判断","字典","中","是否","包含","该","属性","了","，","继续","来","实现","其他","方法","set","和","get","方法","1234567891011121314151617181920","functon","Map","(",")","&","#","123",";","let","tems","=","&","#","123",";","&","#","125",";",";","has","(","key",")","方法","ths",".","has","=","functon","(","al",")","&","#","123",";","return","tems",".","hasOwnProperty","(","al",")",";","&","#","125",";",";","set","(","key",",","al",")","方法","set","相同","key","时","，","后面","声明","的","会","覆盖","前面","ths",".","set","=","functon","(","key",",","al",")","&","#","123",";","tems","[","key","]","=","al",";","&","#","125",";",";","get","(","key",")","方法","ths",".","get","=","functon","(","key",")","&","#","123",";","判断","是否","有","key","，","如果","有","的话","直接","返回","对应","的","值","如果","读取","一个","未知","的","键","，","则","返回","unefne","return","ths",".","has","(","key",")","?","tems","[","key","]",":","unefne",";","&","#","125",";",";","&","#","125",";","moule",".","exports","=","Map","(",")",";","set","和","get","方法","写","好了","，","再接","着","搞","elete","和","clear","方法","elete","和","clear","方法","1234567891011121314","elete","(","key",")","方法","ths",".","elete","=","functon","(","key",")","&","#","123",";","f","(","ths",".","has","(","key",")",")","&","#","123",";","如果","有","key","值","elete","tems","[","key","]",";","直接","删掉","tems","上","对应","的","属性","ths",".","sze","-","-",";","让","sze","总数","减","1","return","true",";","&","#","125",";","return","false",";","&","#","125",";",";","clear","(",")","方法","ths",".","clear","=","functon","(",")","&","#","123",";","tems","=","&","#","123",";","&","#","125",";",";","ths",".","sze","=","0",";","&","#","125",";",";","遍历","方法","(","keys","(",")",",","alues","(",")",",","forEach","(",")",")","12345678910111213141516","keys","(",")","方法","ths",".","keys","=","functon","(",")","&","#","123",";","return","Object",".","keys","(","tems",")",";","&","#","125",";",";","alues","(",")","方法","ths",".","alues","=","functon","(",")","&","#","123",";","return","Object",".","alues","(","tems",")",";","&","#","125",";",";","forEach","(","fn",",","context",")","方法","ths",".","forEach","=","functon","(","fn",",","context","=","ths",")","&","#","123",";","for","(","let","=","0",";","ths",".","sze",";","+","+",")","&","#","123",";","let","key","=","Object",".","keys","(","tems",")","[","]",";","let","alue","=","Object",".","alues","(","tems",")","[","]",";","fn",".","call","(","context",",","alue",",","key",",","tems",")",";","&","#","125",";","&","#","125",";",";","Map","的","完整","代码","12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758","map",".","jsfuncton","Map","(",")","&","#","123",";","let","tems","=","&","#","123",";","&","#","125",";",";","记录","数量","ths",".","sze","=","0",";","has","(","key",")","方法","ths",".","has","=","functon","(","al",")","&","#","123",";","return","tems",".","hasOwnProperty","(","al",")",";","&","#","125",";",";","set","(","key",",","al",")","方法","set","相同","key","时","，","后面","声明","的","会","覆盖","前面","ths",".","set","=","functon","(","key",",","al",")","&","#","123",";","f","(","!","ths",".","has","(","key",")",")","&","#","123",";","tems","[","key","]","=","al",";","ths",".","sze","+","+",";","return","true",";","&","#","125",";","return","false",";","&","#","125",";",";","get","(","key",")","方法","ths",".","get","=","functon","(","key",")","&","#","123",";","判断","是否","有","key","，","如果","有","的话","直接","返回","对应","的","值","如果","读取","一个","未知","的","键","，","则","返回","unefne","return","ths",".","has","(","key",")","?","tems","[","key","]",":","unefne",";","&","#","125",";",";","elete","(","key",")","方法","ths",".","elete","=","functon","(","key",")","&","#","123",";","f","(","ths",".","has","(","key",")",")","&","#","123",";","如果","有","key","值","elete","tems","[","key","]",";","直接","删掉","tems","上","对应","的","属性","ths",".","sze","-","-",";","让","sze","总数","减","1","return","true",";","&","#","125",";","return","false",";","&","#","125",";",";","clear","(",")","方法","ths",".","clear","=","functon","(",")","&","#","123",";","tems","=","&","#","123",";","&","#","125",";",";","ths",".","sze","=","0",";","&","#","125",";",";","keys","(",")","方法","ths",".","keys","=","functon","(",")","&","#","123",";","return","Object",".","keys","(","tems",")",";","&","#","125",";",";","alues","(",")","方法","ths",".","alues","=","functon","(",")","&","#","123",";","return","Object",".","alues","(","tems",")",";","&","#","125",";",";","forEach","(","fn",",","context",")","方法","ths",".","forEach","=","functon","(","fn",",","context","=","ths",")","&","#","123",";","for","(","let","=","0",";","ths",".","sze",";","+","+",")","&","#","123",";","let","key","=","Object",".","keys","(","tems",")","[","]",";","let","alue","=","Object",".","alues","(","tems",")","[","]",";","fn",".","call","(","context",",","alue",",","key",",","tems",")",";","&","#","125",";","&","#","125",";",";","&","#","125",";","moule",".","exports","=","Map",";","测试","：","1234567891011121314151617","nex",".","jsconst","Map","=","requre","(","'",".","map","'",")",";","let","map","=","new","Map","(",")",";","map",".","set","(","'","Jay","'",",","'","Jay","的","值","'",")",";","map",".","set","(","'","true","'",",","'","真","的","'",")",";","console",".","log","(","map",".","has","(","'","Jay","'",")",")",";","trueconsole",".","log","(","map",".","sze",")",";","2","console",".","log","(","map",".","keys","(",")",")",";","[","'","Jay","'",",","'","true","'","]","console",".","log","(","map",".","alues","(",")",")",";","[","'","Jay","的","值","'",",","'","真","的","'","]","map",".","forEach","(","(","alue",",","key",")","=","console",".","log","(","`","alue","=","$","&","#","123",";","alue","&","#","125",";",",","key","=","$","&","#","123",";","key","&","#","125",";","`",")",")",";","alue","=","Jay","的","值",",","key","=","Jay","alue","=","真","的",",","key","=","truemap",".","elete","(","true",")",";","console",".","log","(","map",".","keys","(",")",")",";","[","'","Jay","'","]","console",".","log","(","map",".","alues","(",")",")",";","[","'","Jay","的","值","'","]"],"url":"http://yoursite.com/2020/02/06/ES6%E2%80%94Set%E5%92%8CMap%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8B/","title":"ES6—Set和Map数据结构下","content":"ES6的Set和Map数据结构下2. 字典：在数据结构还有一种结构叫做字典，它就是实现基于ES6中的Map类的结构\n那么集合又和字典有什么区别呢：\n\n共同点：集合、字典可以存储不重复的值\n不同点：集合是以[值，值]的形式存储元素，字典...","author":"xiaoxiong","categorie":{},"date":"2020-02-06 16:52:51"},{"word":["ES","6","的","Set","和","Map","数据结构","上","Set","和","Map","主要","的","应用","场景","在于","数组","去","重","和","数据","存储","Set","是","一种","叫做","集合","的","数据结构","，","Map","是","一种","叫做","字典","的","数据结构","1",".","集合","集合","是","由","一组","无序","且","唯一","(","即","不能","重复",")","的","项","组成","的","，","可以","想象","成","集合","是","一个","既","没有","重复","元素","，","也","没有","顺序","概念","的","数组","ES","6","提供","了","新的","数据结构","Set","。","它","类似","于","数组","，","但是","成员","的","值","都是","唯一","的","，","没有","重复","的","值","Set","本身","是","一个","构造","函数","，","用来","生成","Set","数据结构","这里","说的","Set","其实","就是","我们","所","要","讲到","的","集合","，","先","来看","下","基础","用法","1234567891011","const","s","=","new","Set","(",")",";","[","2",",","3",",","5",",","4",",","5",",","2",",","2","]",".","forEach","(","x","=","s",".","a","(","x",")",")",";","for","(","let","of","s",")","&","#","123",";","console",".","log","(",")",";","2","3","5","4","&","#","125",";","去除","数组","的","重复","成员","let","array","=","[","1",",","2",",","1",",","4",",","5",",","3","]",";","[",".",".",".","new","Set","(","array",")","]","[","1",",","2",",","4",",","5",",","3","]","首先","来看","一下","ES","6","中","Set","类","(","数据结构",")","为","基础","实现","的","集合","Set","实例","的","属性","和","方法","Set","的","属性","：","sze","：","返回","集合","所","包含","元素","的","数量","Set","的","方法","：","操作方法","a","(","alue",")","：","向","集合","添加","一个","新的","项","elete","(","alue",")","：","从","集合","中","移","除","一个","值","has","(","alue",")","：","如果","值","在","集合","中","存在","，","返回","true",",","否则","false","clear","(",")",":","移","除","集合","里","所","有的","项","遍历","方法","keys","(",")","：","返回","一个","包含","集合","中","所有","键","的","数组","alues","(",")","：","返回","一个","包含","集合","中","所有","值","的","数组","entres","：","返回","一个","包含","集合","中","所有","键值","对","的","数组","forEach","(",")","：","用于","对","集合","成员","执行","某种","操作","，","没有","返回","值","创建","一个","集合","123456","functon","Set","(","arr","=","[","]",")","&","#","123",";","可以","传入","数组","let","tems","=","&","#","123",";","&","#","125",";",";","ths",".","sze","=","0",";","记录","集合","中","成员","的","数量","&","#","125",";","moule",".","exports","=","Set",";","这里","用","{","}","对象","来","表示","集合","，","也是","因为","对象","不允许","一个","键","指向","两个","不同的","属性","，","保证","了","集合","里","的","元素","都是","唯一","的","接下来","，","就","需要","按照","ES","6","中","Set","类","的","实现","，","添加","一些","集合","的","操作方法","了","has","方法","首先","要","实现","的","是","has","方法","，","因","为","在","a","和","elete","等","其他","方法","中","都会","被","调用","，","下面","来看","一下","它","的","实现","12345678910","functon","Set","(",")","&","#","123",";","let","tems","=","&","#","123",";","&","#","125",";",";","ths",".","sze","=","0",";","has","(","al",")","方法","ths",".","has","=","functon","(","al",")","&","#","123",";","对象","都","有","hasOwnProperty","方法","，","判断","是否","拥有","特定","属性","return","tems",".","hasOwnProperty","(","al",")",";","&","#","125",";",";","&","#","125",";","a","方法","接下来","要","实现","a","方法","123456789","a","(","al",")","方法","ths",".","a","=","functon","(","al",")","&","#","123",";","f","(","!","ths",".","has","(","al",")",")","&","#","123",";","tems","[","al","]","=","al",";","ths",".","sze","+","+",";","累加","集合","成员","数量","return","true",";","&","#","125",";","return","false",";","&","#","125",";",";","对于","给定","的","al","，","可以","检测","是否","存","在于","集合","中","如果","不存在","，","就","添加","到","集合","中","，","返回","true","如果","存","在","，","就","直接","返回","false","，","不做","任何","操作","elete","和","clear","方法","1234567891011121314","elete","(","al",")","方法","ths",".","elete","=","functon","(","al",")","&","#","123",";","f","(","ths",".","has","(","al",")",")","&","#","123",";","elete","tems","[","al","]",";","将","tems","对象","上","的","属性","删掉","ths",".","sze","-","-",";","return","true",";","&","#","125",";","return","false",";","&","#","125",";",";","clear","方法","ths",".","clear","=","functon","(",")","&","#","123",";","tems","=","&","#","123",";","&","#","125",";",";","直接","将","集合","赋","一个","空","对象","即可","ths",".","sze","=","0",";","&","#","125",";",";","在","elete","方法","中","，","判断","al","是否","存","在于","集合","中","，","如果","存在","就","直接","从","集合","中","删掉","，","返回","true","以上","完成","的","都是","操作方法","，","下面","我们","再来","实现","一下","遍历","方法","keys","和","alues","方法","因为","通过","ES","6","对","Object","的","扩展","可以","轻松","实现","对应","的","方法","，","下面","看","一下","具体","实现","，","上","代码","：","123456789101112","const","Set","=","requre","(","'",".","set","'",")",";","let","set","=","new","Set","(",")",";","set",".","a","(","1",")",";","set",".","a","(","3",")",";","set",".","a","(","2",")",";","console",".","log","(","set",".","keys","(",")",")",";","[","'","1","'",",","'","2","'",",","'","3","'","]","console",".","log","(","set",".","alues","(",")",")",";","[","1",",","2",",","3","]","console",".","log","(","set",".","has","(","1",")",")",";","trueconsole",".","log","(","set",".","elete","(","1",")",")",";","trueconsole",".","log","(","set",".","sze",")",";","true","这里","我们","看到","和","ES","6","中的","Set","有点","区别","，","因为","Object","的","这","几个","方法","都是","按照","数值","大小","，","从小到大","遍历","的","数组","，","具体","实现","还是","有些","不同的","forEach","方法","ES","6","中","Set","结构","的","实例","上","带","的","forEach","方法","，","其实","和","数组","的","forEach","方","法","很","相似","，","只不过","Set","结构","的","键名","就是","键值","，","所以","第","一个","参数","与","第二个","参数","的","值","永远都是","一样","的","下面","就","按照","实现","数组","的","forEach","方法","，","我们","来","完成","Set","的","forEach","方法","1234567","forEach","(","fn",",","context",")","方法","ths",".","forEach","=","functon","(","fn",",","context","=","ths",")","&","#","123",";","for","(","let","=","0",";","ths",".","sze",";","+","+",")","&","#","123",";","let","tem","=","Object",".","keys","(","tems",")","[","]",";","fn",".","call","(","context",",","tem",",","tem",",","tems",")",";","&","#","125",";","&","#","125",";",";","使用","forEach","方法","12345678","set",".","jsconst","Set","=","requre","(","'",".","set","'",")",";","let","set","=","new","Set","(",")",";","set",".","a","(","1",")",";","set",".","a","(","4",")",";","set",".","a","(","'","3","'",")",";","set",".","forEach","(","(","alue",",","key",")","=","console",".","log","(","key","+","'",":","'","+","alue",")",")",";","1",":","1",",","3",":","3",",","4",":","4","let","arr","=","set",".","alues","(",")",";","[","1",",","3",",","4","]","基本上","实现","了","Set","结构","的","方法","，","不过","，","发现","一个","问题","，","那就是","每次","添加","一个","元素","都","要","a","这样","写","起来","确实","好","麻烦","，","Set","是","可以","接收","一个","数组","作为","参数","的","，","那么","把","这个","也","实现","一下","12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152","functon","Set","(","arr","=","[","]",")","&","#","123",";","可以","传入","一个","数组","let","tems","=","&","#","123",";","&","#","125",";",";","ths",".","sze","=","0",";","记录","集合","中","成员","的","数量","has","(","al",")","方法","ths",".","has","=","functon","(","al",")","&","#","123",";","对象","都","有","hasOwnProperty","方法","，","判断","是否","拥有","特定","属性","return","tems",".","hasOwnProperty","(","al",")",";","&","#","125",";",";","a","(","al",")","方法","ths",".","a","=","functon","(","al",")","&","#","123",";","f","(","!","ths",".","has","(","al",")",")","&","#","123",";","tems","[","al","]","=","al",";","ths",".","sze","+","+",";","累加","集合","成员","数量","return","true",";","&","#","125",";","return","false",";","&","#","125",";",";","elete","(","al",")","方法","ths",".","elete","=","functon","(","al",")","&","#","123",";","f","(","ths",".","has","(","al",")",")","&","#","123",";","elete","tems","[","al","]",";","将","tems","对象","上","的","属性","删掉","ths",".","sze","-","-",";","return","true",";","&","#","125",";","return","false",";","&","#","125",";",";","clear","方法","ths",".","clear","=","functon","(",")","&","#","123",";","tems","=","&","#","123",";","&","#","125",";",";","直接","将","集合","赋","一个","空","对象","即可","ths",".","sze","=","0",";","&","#","125",";",";","keys","(",")","方法","ths",".","keys","=","functon","(",")","&","#","123",";","return","Object",".","keys","(","tems",")",";","返回","遍历","集合","的","所有","键名","的","数组","&","#","125",";",";","alues","(",")","方法","ths",".","alues","=","functon","(",")","&","#","123",";","return","Object",".","alues","(","tems",")",";","返回","遍历","集合","的","所有","键值","的","数组","&","#","125",";",";","forEach","(","fn",",","context",")","方法","ths",".","forEach","=","functon","(","fn",",","context","=","ths",")","&","#","123",";","for","(","let","=","0",";","ths",".","sze",";","+","+",")","&","#","123",";","let","tem","=","Object",".","keys","(","tems",")","[","]",";","fn",".","call","(","context",",","tem",",","tem",",","tems",")",";","&","#","125",";","&","#","125",";",";","arr",".","forEach","(","(","al",",",")","=","&","#","123",";","ths",".","a","(","al",")",";","&","#","125",";",")",";","&","#","125",";","moule",".","exports","=","Set",";","再看","看","现在","能不能","支持","传入","数组","了","123456789101112131415","set",".","jsconst","Set","=","requre","(","'",".","set","'",")",";","let","arr","=","new","Set","(","[","1",",","2",",","3","]",")",".","alues","(",")",";","m","=","new","Set","(","arr",".","map","(","x","=","x","*","2",")",")",";","f","=","new","Set","(","arr",".","flter","(","x","=","x","1",")",")",";","console",".","log","(","m",".","alues","(",")",")",";","[","2",",","4",",","6","]","console",".","log","(","f",".","alues","(",")",")",";","[","2",",","3","]","数组","去","重","let","arr","2","=","new","Set","(","[","3",",","5",",","2",",","1",",","2",",","5",",","5","]",")",".","alues","(",")",";","console",".","log","(","arr","2",")",";","[","1",",","2",",","3",",","5","]","除此之外","，","Set","还","可以","实现","并","集","(","unon",")",",","交集","(","ntersect",")",",","差","集","(","fference",")","unon","并","集","和","ntersect","交集","并","集","的","数学","概念","，","集合","A","和","集合","B","的","并","集","，","表示","为","A","∪","B","交集","的","数学","概念","，","集合","A","和","集合","B","的","交集","，","表示","为","A","∩","B","先","来","实现","unon","方法","12345678910111213141516171819202122232425","并","集","ths",".","unon","=","functon","(","other",")","&","#","123",";","let","unon","=","new","Set","(",")",";","let","alues","=","ths",".","alues","(",")",";","for","(","let","=","0",";","alues",".","length",";","+","+",")","&","#","123",";","unon",".","a","(","alues","[","]",")",";","&","#","125",";","alues","=","other",".","alues","(",")",";","将","alues","重新","赋值","为","新的","集合","for","(","let","=","0",";","alues",".","length",";","+","+",")","&","#","123",";","unon",".","a","(","alues","[","]",")",";","&","#","125",";","return","unon",";","&","#","125",";",";","交集","ths",".","ntersect","=","functon","(","other",")","&","#","123",";","let","ntersect","=","new","Set","(",")",";","let","alues","=","ths",".","alues","(",")",";","for","(","let","=","0",";","alues",".","length",";","+","+",")","&","#","123",";","f","(","other",".","has","(","alues","[","]",")",")","&","#","123",";","查看","是否","也","存","在于","other","中","ntersect",".","a","(","alues","[","]",")",";","存在","的话","就","像","ntersect","中","添加","元素","&","#","125",";","&","#","125",";","return","ntersect",";","&","#","125",";",";","再看","下","fference","差","集","的","实现","差","集","的","数学","概念","，","集合","A","和","集合","B","的","差","集","，","表示","为","A","-","B","1234567891011","差","集","ths",".","fference","=","functon","(","other",")","&","#","123",";","let","fference","=","new","Set","(",")",";","let","alues","=","ths",".","alues","(",")",";","for","(","let","=","0",";","alues",".","length",";","+","+",")","&","#","123",";","f","(","!","other",".","has","(","alues","[","]",")",")","&","#","123",";","将不","存","在于","other","集合","中的","添加","到","新的","集合","中","fference",".","a","(","alues","[","]",")",";","&","#","125",";","&","#","125",";","return","fference",";","&","#","125",";",";","Set","的","完整","实现","123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103","set",".","jsfuncton","Set","(","arr","=","[","]",")","&","#","123",";","可以","传入","一个","数组","let","tems","=","&","#","123",";","&","#","125",";",";","ths",".","sze","=","0",";","记录","集合","中","成员","的","数量","has","(","al",")","方法","ths",".","has","=","functon","(","al",")","&","#","123",";","对象","都","有","hasOwnProperty","方法","，","判断","是否","拥有","特定","属性","return","tems",".","hasOwnProperty","(","al",")",";","&","#","125",";",";","a","(","al",")","方法","ths",".","a","=","functon","(","al",")","&","#","123",";","f","(","!","ths",".","has","(","al",")",")","&","#","123",";","tems","[","al","]","=","al",";","ths",".","sze","+","+",";","累加","集合","成员","数量","return","true",";","&","#","125",";","return","false",";","&","#","125",";",";","elete","(","al",")","方法","ths",".","elete","=","functon","(","al",")","&","#","123",";","f","(","ths",".","has","(","al",")",")","&","#","123",";","elete","tems","[","al","]",";","将","tems","对象","上","的","属性","删掉","ths",".","sze","-","-",";","return","true",";","&","#","125",";","return","false",";","&","#","125",";",";","clear","方法","ths",".","clear","=","functon","(",")","&","#","123",";","tems","=","&","#","123",";","&","#","125",";",";","直接","将","集合","赋","一个","空","对象","即可","ths",".","sze","=","0",";","&","#","125",";",";","keys","(",")","方法","ths",".","keys","=","functon","(",")","&","#","123",";","return","Object",".","keys","(","tems",")",";","返回","遍历","集合","的","所有","键名","的","数组","&","#","125",";",";","alues","(",")","方法","ths",".","alues","=","functon","(",")","&","#","123",";","return","Object",".","alues","(","tems",")",";","返回","遍历","集合","的","所有","键值","的","数组","&","#","125",";",";","forEach","(","fn",",","context",")","方法","ths",".","forEach","=","functon","(","fn",",","context","=","ths",")","&","#","123",";","for","(","let","=","0",";","ths",".","sze",";","+","+",")","&","#","123",";","let","tem","=","Object",".","keys","(","tems",")","[","]",";","fn",".","call","(","context",",","tem",",","tem",",","tems",")",";","&","#","125",";","&","#","125",";",";","并","集","ths",".","unon","=","functon","(","other",")","&","#","123",";","let","unon","=","new","Set","(",")",";","let","alues","=","ths",".","alues","(",")",";","for","(","let","=","0",";","alues",".","length",";","+","+",")","&","#","123",";","unon",".","a","(","alues","[","]",")",";","&","#","125",";","alues","=","other",".","alues","(",")",";","将","alues","重新","赋值","为","新的","集合","for","(","let","=","0",";","alues",".","length",";","+","+",")","&","#","123",";","unon",".","a","(","alues","[","]",")",";","&","#","125",";","return","unon",";","&","#","125",";",";","交集","ths",".","ntersect","=","functon","(","other",")","&","#","123",";","let","ntersect","=","new","Set","(",")",";","let","alues","=","ths",".","alues","(",")",";","for","(","let","=","0",";","alues",".","length",";","+","+",")","&","#","123",";","f","(","other",".","has","(","alues","[","]",")",")","&","#","123",";","查看","是否","也","存","在于","other","中","ntersect",".","a","(","alues","[","]",")",";","存在","的话","就","像","ntersect","中","添加","元素","&","#","125",";","&","#","125",";","return","ntersect",";","&","#","125",";",";","差","集","ths",".","fference","=","functon","(","other",")","&","#","123",";","let","fference","=","new","Set","(",")",";","let","alues","=","ths",".","alues","(",")",";","for","(","let","=","0",";","alues",".","length",";","+","+",")","&","#","123",";","f","(","!","other",".","has","(","alues","[","]",")",")","&","#","123",";","将不","存","在于","other","集合","中的","添加","到","新的","集合","中","fference",".","a","(","alues","[","]",")",";","&","#","125",";","&","#","125",";","return","fference",";","&","#","125",";",";","子集","ths",".","subset","=","functon","(","other",")","&","#","123",";","f","(","ths",".","sze","other",".","sze",")","&","#","123",";","return","false",";","&","#","125",";","else","&","#","123",";","let","alues","=","ths",".","alues","(",")",";","for","(","let","=","0",";","alues",".","length",";","+","+",")","&","#","123",";","f","(","!","other",".","has","(","alues","[","]",")",")","&","#","123",";","return","false",";","&","#","125",";","&","#","125",";","return","true",";","&","#","125",";","&","#","125",";",";","arr",".","forEach","(","(","al",",",")","=","&","#","123",";","ths",".","a","(","al",")",";","&","#","125",";",")",";","&","#","125",";","moule",".","exports","=","Set",";","测试","：","123456789101112131415161718192021222324252627282930313233343536373839","nex",".","jsconst","Set","=","requre","(","'",".","set","'",")",";","let","set","=","new","Set","(","[","1",",","2",",","3","]",")",";","console",".","log","(","set",".","alues","(",")",")",";","[","1",",","2",",","3","]","console",".","log","(","set",".","keys","(",")",")",";","[","'","1","'",",","'","2","'",",","'","3","'","]","console",".","log","(","set",".","sze",")",";","3","set",".","elete","(","2",")",";","console",".","log","(","set",".","alues","(",")",")",";","[","1",",","3","]","set",".","clear","(",")",";","console",".","log","(","set",".","sze",")",";","0","并","集","let","a","=","[","1",",","2",",","3","]",";","let","b","=","new","Set","(","[","4",",","3",",","2","]",")",";","let","unon","=","new","Set","(","a",")",".","unon","(","b",")",".","alues","(",")",";","console",".","log","(","unon",")",";","[","1",",","2",",","3",",","4","]","交集","let","c","=","new","Set","(","[","4",",","3",",","2","]",")",";","let","ntersect","=","new","Set","(","[","1",",","2",",","3","]",")",".","ntersect","(","c",")",".","alues","(",")",";","console",".","log","(","ntersect",")",";","[","2",",","3","]","差","集","let","=","new","Set","(","[","4",",","3",",","2","]",")",";","let","fference","=","new","Set","(","[","1",",","2",",","3","]",")",".","fference","(",")",".","alues","(",")",";","console",".","log","(","fference",")",";","[","1","]","子集","let","e","=","new","Set","(","[","1",",","2",",","3",",","4","]",")",";","let","subset","=","new","Set","(","[","1",",","2",",","3","]",")",".","subset","(","e",")",";","console",".","log","(","subset",")",";","true"],"url":"http://yoursite.com/2020/02/06/ES6%E2%80%94Set%E5%92%8CMap%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8A/","title":"ES6—Set和Map数据结构上","content":"ES6的Set和Map数据结构上\nSet和Map主要的应用场景在于数组去重和数据存储\nSet是一种叫做集合的数据结构，Map是一种叫做字典的数据结构\n\n1. 集合\n集合是由一组无序且唯一(即不能重复)的项组成的，可以想象成集合是一个既...","author":"xiaoxiong","categorie":{},"date":"2020-02-06 14:59:41"},{"word":[],"url":"http://yoursite.com/2020/02/06/Vue%E5%AD%A6%E4%B9%A0%E2%80%94%E9%98%B2%E6%8A%96%E8%8A%82%E6%B5%81%E7%9A%84%E4%BD%BF%E7%94%A8/","title":"Vue学习—防抖节流的使用","content":"","author":"xiaoxiong","categorie":{},"date":"2020-02-06 14:30:12"},{"word":[],"url":"http://yoursite.com/2020/02/06/JavaScript%E2%80%94%E6%B7%B1%E6%B5%85%E6%8B%B7%E8%B4%9D/","title":"JavaScript—深浅拷贝","content":"","author":"xiaoxiong","categorie":{},"date":"2020-02-06 14:28:24"},{"word":["JaaScrpt","遍历","对象","的","几种","方式","1",".","自身","可","枚举","属性","Object",".","keys","(",")","方法会","返回","一个","由","一个","给定","对象","的","自身","可","枚举","属性","组成","的","数组","，","数组","中","属性","名","的","排列","顺序","和","for",".",".",".","n","循环","遍历","该","对象","时","返回","的","顺序","一致","。","如果","对象","的","键","-","值","都","不可枚举","，","那么","将","返回","由","键","组成","的","数组","。","这是","合","理","的","，","因为","大多数","时候","只","需要","关注","对象","自身","的","属性","。","来","看看","一个","对象","拥有","自身","和","继承","属性","的","例子","，","Object",".","keys","(",")","只","返回","自","己","的","属性","键","1234567891011121314","let","smpleColors","=","&","#","123",";","colorA",":","'","whte","'",",","colorB",":","'","black","'","&","#","125",";",";","let","natureColors","=","&","#","123",";","colorC",":","'","green","'",",","colorD",":","'","yellow","'","&","#","125",";",";","Object",".","setPrototypeOf","(","natureColors",",","smpleColors",")",";","console",".","r","(","natureColors",")",";","smpleColors","对象","在","natureColors","原型","上","console",".","log","(","Object",".","keys","(","natureColors",")",")",";","[","\"","colorC","\"",",","\"","colorD","\"","]","console",".","log","(","natureColors","[","'","colorA","'","]",")",";","whteconsole",".","log","(","natureColors","[","'","colorB","'","]",")",";","black","Object",".","setPrototype","(",")","方法","设置","一个","指定","的","对象","的","原型","到","另一个","对象","或","null","Object",".","keys","(","natureColors",")","返回","natureColors","对象","自身","可","枚举","属性","键",":","[","&","#","39",";","colorC","&","#","39",";",",","&","#","39",";","colorD","&","#","39",";","]","。","natureColors","包含","从","smpleColors","原型","对象","继承","的","属性","，","但是","Object",".","keys","(",")","函数","会","跳过","它们","。","Object",".","keys","(",")","函数","会","跳过","它们","。","Object",".","alue","和","Object",".","entres","(",")","也","都是","返回","一个","给定","对象","自身","可","枚举","属性","的","键值","对","数组","。","12345678910111213","let","smpleColors","=","&","#","123",";","colorA",":","'","whte","'",",","colorB",":","'","black","'","&","#","125",";",";","let","natureColors","=","&","#","123",";","colorC",":","'","green","'",",","colorD",":","'","yellow","'","&","#","125",";",";","Object",".","setPrototypeOf","(","natureColors",",","smpleColors",")",";","console",".","log","(","Object",".","keys","(","natureColors",")",")",";","[","\"","colorC","\"",",","\"","colorD","\"","]","console",".","log","(","Object",".","alues","(","natureColors",")",")",";","[","\"","green","\"",",","\"","yellow","\"","]","console",".","log","(","Object",".","entres","(","natureColors",")",")",";","[","Array","(","2",")",",","Array","(","2",")","]","现在","注意","与","for",".",".",".","n","语句","的","区别","，","for",".",".",".","n","不仅","可以","循环","枚举","自身","属性","还","可以","枚举","原型","链","中的","属性","12345678910111213141516","let","smpleColors","=","&","#","123",";","colorA",":","'","whte","'",",","colorB",":","'","black","'","&","#","125",";",";","let","natureColors","=","&","#","123",";","colorC",":","'","green","'",",","colorD",":","'","yellow","'","&","#","125",";",";","Object",".","setPrototypeOf","(","natureColors",",","smpleColors",")",";","let","enumerableKeys","=","[","]",";","for","(","let","key","n","natureColors",")","&","#","123",";","enumerableKeys",".","push","(","key",")",";","&","#","125",";","console",".","log","(","enumerableKeys",")",";","[","\"","colorC","\"",",","\"","colorD","\"",",","\"","colorA","\"",",","\"","colorB","\"","]","enumerableKeys","数组","包含","natureColors","自身","属性","键","：","colorC","、","colorD","。","另外","for",".",".",".","n","也","遍历","了","从","smpleColors","原型","对象","继承","的","属性","2",".","Object",".","alues","(",")","返回","属性","值","Object",".","alues","(",")","方法","返回","一个","给定","对象","自身","的","所有","可","枚举","属性","值","的","数组","，","值","顺序","与","使用","foe",".",".","n","循环","的","循序","相同","（","区别","在于","for",".",".",".","n","循环","枚举","原型","链","中的","属性","）","。","使用","Object",".","keys","(",")","收集","keys","，","然后","通过","key","去","对象","取","对应","的","值","：","123456789","let","meals","=","&","#","123",";","mealA",":","'","Breakfast","'",",","mealB",":","'","Lunch","'",",","mealC",":","'","Dnner","'","&","#","125",";",";","for","(","let","key","of","Object",".","keys","(","meals",")",")","&","#","123",";","let","mealName","=","meals","[","key","]",";","console",".","log","(","mealName",")",";","&","#","125",";","meal","是","一个","普通","对象","。","使用","Object",".","keys","(","meals",")","和","枚举","的","for",".",".",".","of","循环","获取","对象","键值","。","但是","let","mealName","=","meals","[","key","]",";","没有","多大","的","必要","，","可以","进一步","优化","代码","：","123456789","let","meals","=","&","#","123",";","mealA",":","'","Breakfast","'",",","mealB",":","'","Lunch","'",",","mealC",":","'","Dnner","'","&","#","125",";",";","for","(","let","mealName","of","Object",".","alues","(","meals",")",")","&","#","123",";","console",".","log","(","mealName",")",";","&","#","125",";","因为","Object",".","alues","(","meals",")","返回","数组","中的","对象","属性","值","，","所以","可以","直接","在","for",".",".","of","中","简化","。","mealName","直接","在","循环","中","赋值","。","3",".","Object",".","entres","(",")","Object",".","entres","(",")","方法","返回","一个","给定","对象","自身","可","枚举","属性","的","键值","对","数组","，","其","排列","与","使用","for",".",".",".","n","循环","遍历","该","对象","时","返回","的","顺序","一致","（","区别","在于","for",".",".",".","n","循环","也","枚举","原型","链","中的","属性","）","Object",".","entres","(",")","返回","键值","对","数组","，","如","[","[","key","1",",","alue","1","]",",","[","key","2",",","alue","2","]",",",".",".",".",",","[","keyN",",","alueN","]","]","可能","直接","使用","这些","键值","对","不怎么","方便","，","但","可以","通过","数组","解构","赋值","方式","访问","键","和","值","就","变得","非常","容易","，","如下","所","示","：","123456789","let","meals","=","&","#","123",";","mealA",":","'","Breakfast","'",",","mealB",":","'","Lunch","'",",","mealC",":","'","Dnner","'","&","#","125",";",";","for","(","let","[","key",",","alue","]","of","Object",".","entres","(","meals",")",")","&","#","123",";","console",".","log","(","key","+","'",":","'","+","alue",")",";","&","#","125",";","'","mealA",":","Breakfast","'","'","mealB",":","Lunch","'","'","mealC",":","Dnner","'","如上","所","示","，","因为","Object",".","entres","(",")","返回","一个","与","数组","解构","赋值","兼容","的","集合","，","因此","不需要","为","赋值","或","声明","添加","额外","的","行","当","普通","对象","要","转换","成","Map","时","Object",".","entres","(",")","就","很","有用","，","因为","Object",".","entres","(",")","返回","的","格式","与","Map","构造","函数","接受","的","格式","完全相同","：","(","key",",","alue",")","。","使用","常规","的","Map","构造","函数","可以","将","一个","二维","键值","对","数组","转换","成","一个","Map","对象","。","1234567891011","let","greetngs","=","&","#","123",";","mornng",":","'","Goo","mornng","'",",","may",":","'","Goo","ay","'",",","eenng",":","'","Goo","eenng","'","&","#","125",";",";","let","greetngsMap","=","new","Map","(","Object",".","entres","(","greetngs",")",")",";","console",".","log","(","greetngsMap",")",";","&","#","123",";","\"","mornng","\"","=","\"","Goo","mornng","\"",",","\"","may","\"","=","\"","Goo","ay","\"",",","\"","eenng","\"","=","\"","Goo","eenng","\"","&","#","125",";","console",".","log","(","[",".",".",".","greetngsMap","]",")",";","=","Object",".","entres","(","greetngs",")","console",".","log","(","greetngsMap",".","get","(","'","mornng","'",")",")",";","Goo","mornng","console",".","log","(","greetngsMap",".","get","(","'","may","'",")",")",";","Goo","ay","console",".","log","(","greetngsMap",".","get","(","'","eenng","'",")",")",";","Goo","eenng","Map","对象","保存","键值","对","。","任何","值","(","对象","或者","原始","值",")","都","可以","作为","一个","键","或","一个","值","有趣的","是","，","Map","提供","了","与","Object",".","alues","(",")","和","Object",".","entres","(",")","等效","的","方法","（","只是","它们","返回","Iterators","）","，","以便","为","Map","实例","提取","属性","值","或","键值","对","：","Map",".","prototype",".","alues","(",")","等价","于","Object",".","alues","(",")","Map",".","prototype",".","entres","(",")","等价","于","Object",".","entres","(",")","map","是","普通","对象","的","改进","版本","，","可以","获取","map","的","大小","(","对于","普通","对象","，","必须","手动","获取",")","，","并","使用","任意","对象","类型","作为","键","(","普通","对象","使用","字符串","基","元","类型","作为","键",")","。","让我们","看看","返回",".","alues","（","）","和",".","entres","（","）","的","map","的","方法",":","12345","[",".",".",".","greetngsMap",".","alues","(",")","]",";","=","[","'","Goo","mornng","'",",","'","Goo","ay","'",",","'","Goo","eenng","'","]","[",".",".",".","greetngsMap",".","entres","(",")","]",";","=","[","[","'","mornng","'",",","'","Goo","mornng","'","]",",","[","'","may","'",",","'","Goo","ay","'","]",",","[","'","eenng","'",",","'","Goo","eenng","'","]","]","注意","：","greetngsMap",".","alues","(",")","和","greetngsMap",".","entres","(",")","返回","迭","代","器","对象","。","若要","将","结果","放入","数组","，","扩展","运算","符","…","是","必要的","4",".","对象","属性","的","顺序","JS","对象","是","简单的","键值","映射","，","因此","，","对象","中","属性","的","顺序","是","微不足道","的","，","在大多数情况下","，","不","应","该","依赖","它","。","在","ES","5","和","早期","标准","中","，","根本","没有","指定","属性","的","顺序","。","然而","，","从","ES","6","开始","，","属性","的","顺序","是","基于","一个","特殊的","规则","的","，","除非","特指","按照","时间","排序","。","通过","两个","新方法","Object",".","getOwnPropertyNames","和","Reflect",".","ownKeys","来","编写","示例","讲解","这","一","属性","排序","规则","。","数字","：","当","属性","的","类型","时","数字","类型","时","，","会","按照","数字","的","从","大","到","小的","顺序","进行","排序","；","字符串","：","当","属性","的","类型","是","字符串","时","，","会","按照","时间","的","先后","顺序","进行","排序","；","Symbol","：","当","属性","的","类型","是","Symbol","时","，","会","按照","时间","的","先后","顺序","进行","排序","。","如果","需要","有序","集合","，","建议","将","数据","存储","到","数组","或","Set","中","总结","Object",".","alues","(",")","和","Object",".","entres","(",")","是","为","JS","开发人员","提供","新的","标准化","辅助","函数","的","另一个","改进","步骤","。","Object",".","entres","(",")","最","适用于","数组","解构","赋值","，","其","方式","是","将","键","和","值","轻松","分","配给","不同的","变量","。","此","函数","还","可以","轻松地","将","纯","JS","对象","属性","映射","到","Map","对象","中","注意","：","Object",".","alues","(",")","和","Object",".","entres","(",")","返回","数据","的","顺序","是","不确定","的","，","所以","不要","依赖","该","方式","。","5",".","补充","JS","对象","的","可","枚举","属性","和","不可枚举","属性","对象","的","每一个","属性","都","有","一个","描述","对象","，","用来","描述","和","控制","该","属性","的","行为","，","用","Object",".","getOwnPropertyDescrptor","方法","来","获取","该","描述","对象","（","用","Object",".","efneProperty","方法","来","设置","）","。","描述","对象","的","enumerable","属性","，","称为","”","可","枚举","性","“","，","如果","该","属性","为","false","，","就","表示","某些","操作","会","忽略","当前","属性","12345678","let","obj","=","&","#","123",";","start",":","'","123","'","&","#","125",";",";","console",".","log","(","Object",".","getOwnPropertyDescrptor","(","obj",",","'","start","'",")",")","输出","内容","：","confgurable",":","true","enumerable",":","true","alue",":","\"","123","\"","wrtable",":","true","介绍","：","confgurable","：","表示","能否","通过","elete","删除","此","属性","，","能否","修改","属性","的","特性","，","或","能否","修改","把","属性","修改","为","访问","器","属性","，","如果","直接","使用","字面","量","定义","对象","，","默认","值","为","true","enumerable",":","表示","该","属性","是否","可","枚举","，","即","是否","通过","for","-","n","循环","或","Object",".","keys","(",")","返回","属性","，","如果","直接","使用","字面","量","定义","对象","，","默认","值","为","true","wrtable",":","能否","修改","属性","的","值","，","如果","直接","使用","字面","量","定义","对象","，","默认","值","为","true","alue",":","该","属性","对应","的","值","，","默认","为","unefne","1234567891011121314","let","obj","=","&","#","123",";","&","#","125",";",";","Object",".","efnePropertes","(","obj",",","&","#","123",";","name",":","&","#","123",";","alue",":","'","祖宗","'",",","enumerable",":","false",",","不可枚举","&","#","125",";",",","age",":","&","#","123",";","alue",":","88",",","enumerable",":","true",",","可","枚举","&","#","125",";","&","#","125",";",")","for","(","let","key","n","obj",")","&","#","123",";","console",".","log","(","\"","key",":","\"","+","key","+","'",",","'","+","'","alue",":","'","+","obj","[","key","]",")","key",":","alue",",","alue",":","88","&","#","125",";","目前",",","有","四个","操作","会","忽略","enumerable","为","false","的","属性","。","for","…","n","循环","：","只","遍历","对象","自身","的","和","继承","的","可","枚举","的","属性","Object",".","keys","(",")","：","返回","对象","自身","的","所有","可","枚举","的","属性","的","键名","JSON",".","strngfy","(",")","：","只","串行","化","对象","自身","的","可","枚举","的","属性","Object",".","assgn","(",")","：","忽略","enumerable","为","false","的","属性","，","只","拷贝","对象","自身","的","可","枚举","的","属性"],"url":"http://yoursite.com/2020/02/06/ES6S%E2%80%94%E9%81%8D%E5%8E%86%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F/","title":"ES6S—遍历对象属性的几种方式","content":"JavaScript遍历对象的几种方式1. 自身可枚举属性\nObject.keys()方法会返回一个由一个给定对象的自身可枚举属性组成的数组，数组中属性名的排列顺序和for...in循环遍历该对象时返回的顺序一致。如果对象的键-值都不...","author":"xiaoxiong","categorie":{},"date":"2020-02-06 12:38:25"},{"word":["asyncawat","的","使用","1",".","asyncawat","的","具体","使用","规则","在","我们","处理","异步","的","时候","，","比起","回调","函数","，","Promse","的","then","方法会","显得","较为","简洁","和","清晰","，","但是","在","处理","多","个","彼此","之间","相互依赖","的","请求","的","时候","，","就","会","显","的","有些","累赘","。","这时候","，","用","async","和","awat","更加","优雅","asyncawat","使用","规则","一","：","凡是","在前面","添加","了","async","的","函数","在","执行","后","都会","自动","返回","一个","Promse","对象","1234","async","functon","test","(",")","&","#","123",";","&","#","125",";","let","result","=","test","(",")","console",".","log","(","result",")",";","test","(",")","返回","Promse","对象","asyncawat","使用","规则","二","：","awat","必须","在","async","函数","里","使用","，","不能","单独","使用","错误","的","例子","：","12345","functon","test","(",")","&","#","123",";","let","result","=","awat","Promse",".","resole","(","'","success","'",")",";","console",".","log","(","result",")",";","&","#","125",";","test","(",")",";","正确的","例子","：","12345","async","functon","test","(",")","&","#","123",";","let","result","=","awat","Promse",".","resole","(","'","success","'",")",";","console",".","log","(","result",")",";","success","&","#","125",";","test","(",")",";","asyncawat","使用","规则","三","：","awat","后面","需要","跟","Promse","对象","，","不然","就","没有","意义","，","而且","awat","后面","的","Promse","对象","不必","写","then","，","因为","awat","的","作用","之一","就是","获取","后面","Promse","对象","成功","状态","传递","出来","的","参数","1234567891011121314","const","fn","=","(",")","=","&","#","123",";","return","new","Promse","(","(","resole",",","reject",")","=","&","#","123",";","setTmeout","(","(",")","=","&","#","123",";","resole","(","'","success","'",")","&","#","125",";",")","&","#","125",";",")","&","#","125",";","const","test","=","async","(",")","=","&","#","123",";","let","result","=","awat","fn","(",")","因为","fn","会","返回","一个","Promse","对象","console",".","log","(","result",")","这里","会","打出","Promse","成功","后","传递","过来","的","'","success","'","&","#","125",";","test","(",")","2",".","asyncawat","的","错误","处理","方式","一","关于","错误","处理","，","如","规则","三","所说","，","awat","可以","直接","获取","到","后面","Promse","成功","状态","传递","的","参数","，","但是","却","捕捉","不到","失败","状态","。","在","这里","，","我们","通过","给","包裹","awat","的","async","函数","添加","thencatch","方法","来","解决","，","因为","根据","规则","一","，","async","函数","本身","就","会","返回","一个","Promse","对象","包含","错误","处理","的","完整的","例子","：","123456789101112131415161718192021","let","promseDemo","=","new","Promse","(","(","resole",",","reject",")","=","&","#","123",";","setTmeout","(","(",")","=","&","#","123",";","let","ranom","=","Math",".","ranom","(",")","f","(","ranom","=","0.5",")","&","#","123",";","resole","(","'","success","'",")","&","#","125",";","else","&","#","123",";","reject","(","'","fale","'",")","&","#","125",";","&","#","125",";",",","1000",")","&","#","125",";",")","async","functon","test","(",")","&","#","123",";","let","result","=","awat","promseDemo","return","result","这里","的","result","是","promseDemo","成功","状态","的","值","，","如果","失败","了","，","代码","就","直接","跳","到","下面","的","catch","了","&","#","125",";","test","(",")",".","then","(","response","=","&","#","123",";","console",".","log","(","response",")","&","#","125",";",")",".","catch","(","error","=","&","#","123",";","console",".","log","(","error",")","&","#","125",";",")","注意","：","一","是","async","函数","需要","主动","return","一下","，","如果","Promse","的","状态","是","成功","的","，","那么","return","的","这个","值","就","会","被","下面","的","then","方法","捕捉","到","；","二","是","，","如果","async","函数","有","任何","错误","，","都","被","catch","捕捉","到","！","3",".","asyncawat","的","错误","处理","方式","二","使用","try","{","}","catch","(","e",")","{","}","来","捕获","promse","错误","的","时候","1234567891011121314151617181920212223","const","promseDemo","=","(",")","=","&","#","123",";","return","new","Promse","(","(","resole",",","reject",")","=","&","#","123",";","setTmeout","(","(",")","=","&","#","123",";","let","ranom","=","Math",".","ranom","(",")","f","(","ranom","0.5",")","&","#","123",";","resole","(","'","success","'",")",";","&","#","125",";","else","&","#","123",";","reject","(","'","fale","'",")",";","&","#","125",";","&","#","125",";",",","0",")","&","#","125",";",")","&","#","125",";","async","functon","test","(",")","&","#","123",";","try","&","#","123",";","let","result","=","awat","promseDemo","(",")",";","console",".","log","(","result",")",";","&","#","125",";","catch","(","e",")","&","#","123",";","console",".","log","(","e","+","'","错误","'",")",";","&","#","125",";","&","#","125",";","test","(",")",";","4",".","同步","和","异步","在","async","函数","中","使用","awat","，","那么","awat","这里","的","代码","就","会","变成","同步","的","了","，","意思","就是说","只","有","等","awat","后面","的","Promse","执行","完成","得到","结果","才","会","继续","下去","，","awat","就是","等待","，","这样","虽然","避免","了","异步","，","但是","它","也","会","阻塞","代码","，","所以","使用","的","时候","要","考虑","周全","1234567891011121314151617181920","const","fn","=","(","name",")","=","&","#","123",";","return","new","Promse","(","(","resole",",","reject",")","=","&","#","123",";","setTmeout","(","(",")","=","&","#","123",";","resole","(","`","$","&","#","123",";","name","&","#","125",";","成功","`",")","&","#","125",";",",","1000",")","&","#","125",";",")","&","#","125",";","const","test","=","async","(",")","=","&","#","123",";","let","p","1","=","awat","fn","(","'","小","红","'",")",";","let","p","2","=","awat","fn","(","'","小明","'",")",";","let","p","3","=","awat","fn","(","'","小华","'",")",";","return","[","p","1",",","p","2",",","p","3","]",";","&","#","125",";","test","(",")",".","then","(","result","=","&","#","123",";","console",".","log","(","result",")",";","&","#","125",";",")",".","catch","(","result","=","&","#","123",";","console",".","log","(","result",")",";","&","#","125",";",")","1234567891011121314151617","const","fn","=","(","name",")","=","&","#","123",";","return","new","Promse","(","(","resole",",","reject",")","=","&","#","123",";","setTmeout","(","(",")","=","&","#","123",";","resole","(","`","$","&","#","123",";","name","&","#","125",";","成功","`",")","&","#","125",";",",","1000",")","&","#","125",";",")","&","#","125",";","const","test","=","async","(",")","=","&","#","123",";","console",".","log","(","'","xxxxxxxxxxxxxxxxxxx","'",")",";","let","p","1","=","awat","fn","(","'","小","红","'",")",";","let","p","2","=","awat","fn","(","'","小明","'",")",";","let","p","3","=","awat","fn","(","'","小华","'",")",";","console",".","log","(","[","p","1",",","p","2",",","p","3","]",")",";","&","#","125",";","test","(",")",";","这样","写","虽然","是","可以","的","，","但是","这里","awat","会","阻塞","代码","，","每个","awat","都","必须","等","后面","的","fn","(",")","执行","完成","才","会","执行","下","一行","代码","，","所以","test","函数","执行","需要","3秒","。","如果","不是","遇到","特定","的","场景","，","最好","还是","不要","这样","用","。","5",".","一个","适合","使用","asyncawat","的","业务","场景","在","前端","编程","中","，","我们","偶尔","会","遇到","这样","一个","场景","：","我们","需要","发送","多","个","请求","，","而后","面","请求","的","发送","总是","需要","依赖","上一个","请求","返回","的","数据","。","对于","这个问题","，","我们","既","可以","用","的","Promse","的","链式","调用","来","解决","，","也","可","以","用","asyncawat","来","解决","，","然而","后者","会","更","简洁","些","使用","promse","链式","调用","1234567891011121314151617","functon","request","(","tme",")","&","#","123",";","return","new","Promse","(","(","resole",",","reject",")","=","&","#","123",";","setTmeout","(","(",")","=","&","#","123",";","resole","(","tme",")","&","#","125",";",",","tme",")","&","#","125",";",")","&","#","125",";","request","(","500",")",".","then","(","result","=","&","#","123",";","return","request","(","result","+","1000",")","&","#","125",";",")",".","then","(","result","=","&","#","123",";","return","request","(","result","+","1000",")","&","#","125",";",")",".","then","(","result","=","&","#","123",";","console",".","log","(","result",")","&","#","125",";",")",".","catch","(","error","=","&","#","123",";","console",".","log","(","error",")","&","#","125",";",")","使用","asyncawat","1234567891011121314151617181920","functon","request","(","tme",")","&","#","123",";","return","new","Promse","(","(","resole",",","reject",")","=","&","#","123",";","setTmeout","(","(",")","=","&","#","123",";","resole","(","tme",")","&","#","125",";",",","tme",")","&","#","125",";",")","&","#","125",";","async","functon","getResult","(",")","&","#","123",";","let","p","1","=","awat","request","(","500",")","let","p","2","=","awat","request","(","p","1","+","1000",")","let","p","3","=","awat","request","(","p","2","+","1000",")","return","p","3","&","#","125",";","getResult","(",")",".","then","(","result","=","&","#","123",";","console",".","log","(","result",")","&","#","125",";",")",".","catch","(","error","=","&","#","123",";","console",".","log","(","error",")","&","#","125",";",")","相对","于","使用","then","不停地","进行","链式","调用","，","使用","asyncawat","会","显","的","更加","易读","一些","。"],"url":"http://yoursite.com/2020/02/05/ES6%E2%80%94async%E4%B8%8Eawait/","title":"ES6—async与await","content":"async/await的使用1. async/await的具体使用规则在我们处理异步的时候，比起回调函数，Promise的then方法会显得较为简洁和清晰，但是在处理多个彼此之间相互依赖的请求的时候，就会显的有些累赘。这时候，用asy...","author":"xiaoxiong","categorie":{},"date":"2020-02-05 23:11:02"},{"word":["Promse","的","使用","一个","Promse","就是","一个","代表","了","异步","操作","最终","完成","或者","失败","的","对象","。","这是","MDN","上","关","于","Promse","的","解释","。","在","前端","开发","中","，","Promse","经常","被","拿来","用于","处理","异步","和","回调","的","问题","，","来","规避","回调","地狱","和","更好","排布","异步","相关","的","代码","1",".","Promse","的","三种","状态","从","字面","的","意思","理解","，","Promse","即","是","承诺","，","那","承诺","的","结果","就","会","有","成功","和","失败","两种","。","而且","，","我们","许下","承诺","之后","不会","立即","得到","结果","，","在","获得成功","或是","失败","的","结果","之前","，","我们","还","需要","一点","时间","来","履行","这个","承诺","。","Promse","的","构造","其","实像","极了","我们","生活","中的","承诺","。","以上","是","Promse","的","结构图","。","其","中","Promse","存","在","三种","状态","，","一种","是","penng","状态","、","一种","是","成功","时","的","Fullflle","状态","、","一种","是","失败","时","的","Rejecte","状态","。","代码","如下","：","12345678910111213141516","let","loe","=","new","Promse","(","(","resole",",","reject",")","=","&","#","123",";","let","happy","=","Math",".","ranom","(",")","=","0.3","?","true",":","false","setTmeout","(","(",")","=","&","#","123",";","f","(","happy",")","&","#","123",";","resole","(","'","marry","'",")",";","成功","&","#","125",";","else","&","#","123",";","reject","(","'","break","'",")",";","失败","&","#","125",";","&","#","125",";",",","1000",")","&","#","125",";",")","loe",".","then","(","result","=","&","#","123",";","成功","的","回调","console",".","log","(","result",")",";","&","#","125",";",")",".","catch","(","e","=","&","#","123",";","失败","的","回调","console",".","log","(","e",")",";","&","#","125",";",")","注意","：","Promse","在","经过","penng","状态","达到","成功","或","失败","状态","时","就","会","凝固","，","即","到达","成功","状态","后","再也不会","失败","，","失败","以后","也不","会","回到","成功","状态","。","例如","：","12345678910","let","loe","=","new","Promse","(","(","resole",",","reject",")","=","&","#","123",";","reject","(","'","break","'",")","resole","(","'","marry","'",")","&","#","125",";",")","loe",".","then","(","result","=","&","#","123",";","console",".","log","(","result",")","&","#","125",";",")",".","catch","(","e","=","&","#","123",";","console",".","log","(","e",")","break","&","#","125",";",")","2",".","Promse","的","then","与","catch","的","几种","写法","第一种","，","最","常见的","就是","上面","的","写法",",","使用","then","来","捕捉","resole","状态","，","使用","catch","来","捕捉","reject","状态","12345","loe",".","then","(","result","=","&","#","123",";","成功","的","回调","console",".","log","(","result",")",";","&","#","125",";",")",".","catch","(","e","=","&","#","123",";","失败","的","回调","console",".","log","(","e",")",";","&","#","125",";",")","第","二种","，","不","写","catch",",","把","用来","捕捉","reject","状态","的","函数","也","写","到","then","里","，","但是","效果","和","上面","一样","12345","loe",".","then","(","result","=","&","#","123",";","console",".","log","(","result",")","&","#","125",";",",","result","=","&","#","123",";","console",".","log","(","result",")","&","#","125",";",")","第三种","，","分开","写","，","也是","可以","的","1234567","loe",".","then","(","result","=","&","#","123",";","只","捕捉","和","处理","成功","状态","console",".","log","(","result",")","&","#","125",";",")","loe",".","catch","(","result","=","&","#","123",";","只","捕捉","和","处理","失败","状态","console",".","log","(","result",")","&","#","125",";",")","3",".","快速","构建","一个","成功","或是","失败","状态","的","PromsePromse","自","带","了","两种","方法","，","我们","可以","利用","它们","快速","构建","一个","Promse","，","一个","是","Promse",".","resole","(",")",",","用于","构建","成功","状态","的","Promse",";","另一个","是","Promse",".","reject","(",")","，","用于","构建","失败","状态","的","Promse","123456789","let","p","1","=","Promse",".","resole","(","'","success","'",")",";","p","1",".","then","(","result","=","&","#","123",";","console",".","log","(","result",")",";","success","&","#","125",";",")","let","p","2","=","Promse",".","reject","(","'","fale","'",")",";","p","2",".","catch","(","result","=","&","#","123",";","console",".","log","(","result",")",";","fale","&","#","125",";",")","4",".","使用","Promse",".","all","(",")","来","处理","前端","场景","在","前端","的","开发","实践","中","，","我们","有时","会","遇到","需要","发送","多","个","请求","并","根据","请求","顺序","返回","数据","的","需求","，","比如","，","我们","要","发送","a","、","b","、","c","三个","请求","，","这","三个","请求","返回","的","数据","分别","为","a","1","、","a","2","、","a","3","，","而","我们","想要","a","1","、","a","2","、","a","3","按照","我们","希望","的","顺序","返回","。","那么","，","使用","Promse",".","all","(",")","方法","可以","完美的","解决","这","一","问题","。","12345678910111213141516171819202122232425","模拟","异步","请求","的","函数","let","request","=","(","name",",","tme",")","=","&","#","123",";","return","new","Promse","(","(","resole",",","reject",")","=","&","#","123",";","setTmeout","(","(",")","=","&","#","123",";","let","ranom","=","Math",".","ranom","(",")","f","(","ranom","=","0.2",")","&","#","123",";","resole","(","`","$","&","#","123",";","name","&","#","125",";","成功","了","`",")","&","#","125",";","else","&","#","123",";","reject","(","`","$","&","#","123",";","name","&","#","125",";","失败","了","`",")","&","#","125",";","&","#","125",";",",","tme",")","&","#","125",";",")","&","#","125",";","构建","三个","Promse","实例","let","a","=","request","(","'","小明","'",",","1000",")","let","b","=","request","(","'","小","红","'",",","500",")","let","c","=","request","(","'","小华","'",",","1500",")","使用","Promse",".","all","(",")",",","注意","它","接收","的","是","一个","数组","作为","参数","Promse",".","all","(","[","c",",","a",",","b","]",")",".","then","(","result","=","&","#","123",";","console",".","log","(","result",")","[","\"","小华","成功","了","\"",",","\"","小明","成功","了","\"",",","\"","小","红","成功","了","\"","]","&","#","125",";",")",".","catch","(","result","=","&","#","123",";","console",".","log","(","result",")","&","#","125",";",")","把","上面","的","代码","复制","下来","放到","浏览器","的","调试","控制台","里","多","执行","几次","（","第二次","执行","需要","刷新","）","会","发生","什么","事情","呢","？","你","可能","猜到","了","：","如果","三个","请求","都","成功","的话","，","那么","这","三个","请求","所","返回","的","数据","就是","按照","发送","请求","的","顺序排列","的","，","即","[","“","小华","成功","了","”",",","“","小明","成功","了","”",",","“","小","红","成功","了","”","]","，","而且","还","是以","数组","形式","返回","的","；","而","当","其中","有请","求","失败","了","的话","，","就","只","会","返回","最先","失败","的","结果","。","当然","，","除了","这个","场景","以外","，","Promse",".","all","(",")","方法","还","能","用于","其它","地方","。","比如","说","，","一个","页面","上","有","两个","请求","，","只有","拿","到了","这","两个","请求","的","数据","，","页面","才","会","展示","，","在","这","之前","会","显示","一个","loang","加载","图","。","使用","Promse",".","all","(",")","也是","可以","非常","简洁的","解决","这个问题","5",".","Promse",".","race","(",")","的","使用","顾名思义","，","Promse",".","race","就是","赛跑","的","意思","，","意思","就是说","，","Promse",".","race","(","[","p","1",",","p","2",",","p","3","]",")","里面","哪个","结果","获得","的","快","，","就","返回","那个","结果","，","不管","结果","本身","是","成功","状态","还是","失败","状态","1234567891011121314151617","let","p","1","=","new","Promse","(","(","resole",",","reject",")","=","&","#","123",";","setTmeout","(","(",")","=","&","#","123",";","resole","(","'","success","1","'",")","&","#","125",";",",","1000",")","&","#","125",";",")","let","p","2","=","new","Promse","(","(","resole",",","reject",")","=","&","#","123",";","setTmeout","(","(",")","=","&","#","123",";","reject","(","'","success","2","'",")","&","#","125",";",",","500",")","&","#","125",";",")","Promse",".","race","(","[","p","1",",","p","2","]",")",".","then","(","(","result",")","=","&","#","123",";","console",".","log","(","result",")","success","2","&","#","125",";",")",".","catch","(","(","error",")","=","&","#","123",";","console",".","log","(","error",")","&","#","125",";",")","5",".","Promse","的","链式","调用","上面","说过","的","then","方法","，","在","每次","使用","后","依然","会","继续","返回","一个","Promse","对象","。","12345","let","p","=","Promse",".","resole","(","'","success","'",")",";","let","response","=","p",".","then","(","result","=","&","#","123",";","console",".","log","(","result",")",";","success","&","#","125",";",")","console",".","log","(","response",")",";","Promse","&","#","123",";","penng","&","#","125",";","因为","then","之后","返回","的","还是","一个","Promse","对象","，","那","我们","就","可以","继续","then","，","只不过","后面","then","拿到","的","参数","是","上一个","then","里","return","的","内容","，","而","这个","return","的","内容","既","可以","是","普通的","字符串","、","数字","等","（","最后","都会","被","封装","成","Promse","）","也","可以","是","自己","写","的","一个","Promse","对象","。","Promse","链式","调用","的","代码","：","1234567891011121314151617181920212223242526272829","let","loe","=","new","Promse","(","(","resole",",","reject",")","=","&","#","123",";","setTmeout","(","(",")","=","&","#","123",";","let","happy","=","Math",".","ranom","(",")","=","0.3","?","true",":","false","f","(","happy",")","&","#","123",";","resole","(","'","marry","'",")","&","#","125",";","else","&","#","123",";","reject","(","'","break","'",")","&","#","125",";","&","#","125",";",",","500",")","&","#","125",";",")","let","haeChl","=","new","Promse","(","(","resole",",","reject",")","=","&","#","123",";","setTmeout","(","(",")","=","&","#","123",";","resole","(","'","孩子","生","了","！","'",")","&","#","125",";",",","1000",")","&","#","125",";",")","loe",".","then","(","result","=","&","#","123",";","console",".","log","(","result",")","marry","return","haeChl","这里","返回","一个","Promse","对象",",","它","的","resole","会","被","下一个","then","捕捉","&","#","125",";",")",".","then","(","result","=","&","#","123",";","console",".","log","(","result",")","孩子","生","了","return","'","最后","，","他们","白头偕老","！","'","这里","返回","的","字符串","会","传给","下一个","then","&","#","125",";",")",".","then","(","result","=","&","#","123",";","console",".","log","(","result",")","最后","，","他们","白头偕老","&","#","125",";",")",".","catch","(","error","=","&","#","123",";","console",".","log","(","error",")","break","&","#","125",";",")","注意","：","链式","调用","的","最","一定要","加上","一个","catch","来","捕捉","链条","中","可能","出现","的","错误","。","6",".","Promse","链式","调用","可以","处理","的","一个","业务","场景","当","我们","需要","发送","多","个","请求","，","而后","一个","请求","总是","依赖","前","一个","请求","的","结果","时","，","Promse","的","链式","操作","就","可以","派","上","用场","了","12345678910111213141516","let","request","=","(","url",")","=","&","#","123",";","let","result","=","axos",".","get","(","url",")","result","是","Promse","对象","result",".","then","(","response","=","&","#","123",";","return","response","&","#","125",";",")",".","catch","(","error","=","&","#","123",";","throw","new","Error","(","'","出错","了","!","'",")","&","#","125",";",")","&","#","125",";","request","(","url","0",")",".","then","(","response","=","&","#","123",";","return","request","(","response",".","ata",".","lnk",")","&","#","125",";",")",".","then","(","result","=","&","#","123",";","console",".","log","(","result",")","&","#","125",";",")",".","catch","(","error","=","&","#","123",";","console",".","log","(","error",")","&","#","125",";",")"],"url":"http://yoursite.com/2020/02/05/ES6%E2%80%94promise%E4%BD%BF%E7%94%A8/","title":"ES6—promise使用","content":"Promise的使用\n一个 Promise 就是一个代表了异步操作最终完成或者失败的对象。这是MDN上关于Promise的解释。在前端开发中，Promise经常被拿来用于处理异步和回调的问题，来规避回调地狱和更好排布异步相关的代码\n\n...","author":"xiaoxiong","categorie":{},"date":"2020-02-05 22:01:09"},{"word":["1",".","数组","的","遍历","方法","Array",".","forEach","(",")","遍历","数组","，","和","普通的","for","循环","使用","类似","Array",".","entres","(",")","返回","一个","Array","Iterator","对象","，","该","对象","包含","数组","中","每一个","索引","的","键值","对","123456","ar","arr","=","[","\"","a","\"",",","\"","b","\"",",","\"","c","\"","]",";","ar","eArr","=","arr",".","entres","(",")",";","console",".","log","(","eArr",".","next","(",")",".","alue",")",";","[","0",",","\"","a","\"","]","console",".","log","(","eArr",".","next","(",")",".","alue",")",";","[","1",",","\"","b","\"","]","console",".","log","(","eArr",".","next","(",")",".","alue",")",";","[","2",",","\"","c","\"","]","Array",".","eery","(",")","eery","(",")","是","对","数组","中","每","一项","运行","给定","函数","，","如果","该","函数","对","每","一项","返回","true",",","则","返回","true","Array",".","some","(",")","some","(",")","是","对","数组","中","每","一项","运行","给定","函数","，","如果","该","函数","对","任一","项","返回","true",",","则","返回","true","Array",".","flter","flter","(",")","方法","使用","指定","的","函数","测试","所有","元素","，","并","创建","一个","包含","所有","通过","测试","的","元素","的","新","数组","Array",".","map","(",")","遍历","数组","每","一项","，","并且","返回","一个","新","数组","Array",".","fn","(",")","fn","(",")","方法","，","用于","找出","第一个","符合","条件","的","数组","成员","。","它","的","参数","是","一个","回调","函数","，","所有","数组","成员","依次","执行","该","回调","函数","，","直到","找出","第","一个","返回","值","为","true","的","成员","，","然后","返回","该","成员","。","如果","没有","符合","条件","的","成员","，","则","返回","unefne","。","12","let","num","=","[","1",",","2",",","4","]",".","fn","(","tem","=","tem","2",")",";","console",".","log","(","num",")",";","4","Array",".","fnInex","(",")","12","let","num","1","=","[","1",",","2",",","4","]",".","fnInex","(","tem","=","tem","2",")",";","console",".","log","(","num","1",")",";","2","Array",".","reuce","(","(","pre",",","cur",",","nex",",","array",")","{","}",",","nt",")","该","方法","接收","一个","函数","作为","累加器","（","accumulator","）","，","数组","中的","每个","值","（","从","左","到","右","）","开始","合并","，","最终","为","一个","值","array","表示","原","数组","；","pre","表示","上","一次","调用","回调","时","的","返回","值","，","或者","初始值","nt",";","cur","表示","当前","正在","处理","的","数组","元素","；","nex","表示","当前","正在","处理","的","数组","元素","的","索引","，","若","提供","nt","值","，","则","索引","为","0","，","否则","索引","为","1","；","nt","表示","初始值","2",".","数组","去","重的","几种","方法","定义","一个","新","数组","，","并","存放","原","数组","的","第","一个","元素","，","然后","将","元素","组","一一","和","新","数组","的","元素","对比","，","若","不同","则","存放","在","新","数组","中","。","123456789101112131415161718","functon","unque","(","arr",")","&","#","123",";","let","newArr","=","[","]",";","for","(","let","=","0",";","arr",".","length",";","+","+",")","&","#","123",";","let","repeat","=","false",";","for","(","let","j","=","0",";","j","newArr",".","length",";","j","+","+",")","&","#","123",";","f","(","arr","[","]","=","=","=","newArr","[","j","]",")","&","#","123",";","repeat","=","true",";","break",";","&","#","125",";","&","#","125",";","f","(","!","repeat",")","&","#","123",";","newArr",".","push","(","arr","[","]",")",";","&","#","125",";","&","#","125",";","return","newArr",";","&","#","125",";","console",".","log","(","unque","(","[","1",",","1",",","2",",","3",",","5",",","3",",","1",",","5",",","6",",","7",",","4","]",")",")",";","先","将","原","数组","排序","，","在","与","相邻","的","进行","比较","，","如果","不同","则","存入","新","数组","。","1234567891011","functon","unque","2","(","arr",")","&","#","123",";","ar","formArr","=","arr",".","sort","(",")",";","ar","newArr","=","[","]",";","for","(","let","=","0",";","formArr",".","length",";","+","+",")","&","#","123",";","f","(","formArr","[","]","!","=","=","formArr","[","-","1","]",")","&","#","123",";","newArr",".","push","(","formArr","[","]",")",";","&","#","125",";","&","#","125",";","return","newArr",";","&","#","125",";","console",".","log","(","unque","2","(","[","1",",","1",",","2",",","3",",","5",",","3",",","1",",","5",",","6",",","7",",","4","]",")",")",";","利用","对象","属性","存在","的","特性","，","如果","没有","该","属性","则","存入","新","数组","12345678910111213","functon","unque","3","(","arr",")","&","#","123",";","ar","obj","=","&","#","123",";","&","#","125",";","ar","newArr","=","[","]","for","(","let","=","0",";","arr",".","length",";","+","+",")","&","#","123",";","f","(","!","obj","[","arr","[","]","]",")","&","#","123",";","obj","[","arr","[","]","]","=","1","newArr",".","push","(","arr","[","]",")","&","#","125",";","&","#","125",";","console",".","log","(","obj",")",";","return","newArr","&","#","125",";","console",".","log","(","unque","3","(","[","1",",","1",",","2",",","3",",","5",",","3",",","1",",","5",",","6",",","7",",","4","]",")",")",";","利用","数组","的","nexOf","下标","属性","来","查询","。","12345678910","functon","unque","4","(","arr",")","&","#","123",";","ar","newArr","=","[","]",";","for","(","ar","=","0",";","arr",".","length",";","+","+",")","&","#","123",";","f","(","newArr",".","nexOf","(","arr","[","]",")","=","=","=","-","1",")","&","#","123",";","newArr",".","push","(","arr","[","]",")",";","&","#","125",";","&","#","125",";","return","newArr",";","&","#","125",";","console",".","log","(","unque","4","(","[","1",",","1",",","2",",","3",",","5",",","3",",","1",",","5",",","6",",","7",",","4","]",")",")",";","利用","数组","原型","对象","上","的","nclues","方法","12345678910","const","unque","5","=","(","arr",")","=","&","#","123",";","let","newArr","=","[","]",";","for","(","let","=","0",";","arr",".","length",";","+","+",")","&","#","123",";","f","(","!","newArr",".","nclues","(","arr","[","]",")",")","&","#","123",";","newArr",".","push","(","arr","[","]",")",";","&","#","125",";","&","#","125",";","return","newArr",";","&","#","125",";","console",".","log","(","unque","5","(","[","1",",","1",",","2",",","3",",","5",",","3",",","1",",","5",",","6",",","7",",","4","]",")",")",";","利用","数组","原型","对象","上","的","flter","和","nclues","方法","12345678","functon","unque","6","(","arr",")","&","#","123",";","let","newArr","=","[","]",";","newArr","=","arr",".","flter","(","tem","=","&","#","123",";","return","newArr",".","nclues","(","tem",")","?","'","'",":","newArr",".","push","(","tem",")","&","#","125",";",")",";","return","newArr",";","&","#","125",";","console",".","log","(","unque","6","(","[","1",",","1",",","2",",","3",",","5",",","3",",","1",",","5",",","6",",","7",",","4","]",")",")",";","利用","数组","原型","对象","上","的","forEach","和","nclues","方法","12345678910","functon","unque","7","(","arr",")","&","#","123",";","let","newArr","=","[","]",";","arr",".","forEach","(","tem","=","&","#","123",";","f","(","!","newArr",".","nclues","(","tem",")",")","&","#","123",";","newArr",".","push","(","tem",")",";","&","#","125",";","&","#","125",";",")",";","return","newArr",";","&","#","125",";","console",".","log","(","unque","7","(","[","1",",","1",",","2",",","3",",","5",",","3",",","1",",","5",",","6",",","7",",","4","]",")",")",";","利用","数组","原型","对象","上","的","reuce","和","nclue","方法","123456789","const","unque","8","=","(","arr",")","=","&","#","123",";","return","newArr","=","arr",".","reuce","(","(","all",",","tem",")","=","&","#","123",";","f","(","!","all",".","nclues","(","tem",")",")","&","#","123",";","all",".","push","(","tem",")",";","&","#","125",";","return","all",";","&","#","125",";",",","[","]",")","&","#","125",";",";","console",".","log","(","unque","8","(","[","1",",","1",",","2",",","3",",","5",",","3",",","1",",","5",",","6",",","7",",","4","]",")",")",";","ES","6","set","方法","1234567891011","functon","unque","9","(","arr",")","&","#","123",";","return","Array",".","from","(","new","Set","(","arr",")",")",";","&","#","125",";","console",".","log","(","unque","9","(","[","1",",","1",",","2",",","3",",","5",",","3",",","1",",","5",",","6",",","7",",","4","]",")",")",";","或","functon","unque","10","(","arr",")","&","#","123",";","return","[",".",".",".","new","Set","(","arr",")","]",";","&","#","125",";","console",".","log","(","unque","10","(","[","1",",","1",",","2",",","3",",","5",",","3",",","1",",","5",",","6",",","7",",","4","]",")",")",";"],"url":"http://yoursite.com/2020/02/05/JavaScript%E2%80%94%E6%95%B0%E7%BB%84%E6%96%B9%E6%B3%95%E5%8F%8A%E6%95%B0%E7%BB%84%E5%8E%BB%E9%87%8D/","title":"JavaScript—数组方法及数组去重","content":"1. 数组的遍历方法\nArray.forEach()\n\n遍历数组，和普通的for循环使用类似\n\n\nArray.entries()\n\n返回一个Array Iterator对象，该对象包含数组中每一个索引的键值对\n\n123456var a...","author":"xiaoxiong","categorie":{},"date":"2020-02-05 18:25:49"},{"word":[],"url":"http://yoursite.com/2020/02/05/React%E5%AD%A6%E4%B9%A0%E2%80%94%E5%BC%80%E5%8F%91%E6%8A%80%E5%B7%A7/","title":"React学习—开发技巧","content":"","author":"xiaoxiong","categorie":{},"date":"2020-02-05 13:44:40"},{"word":["React","性能","优化","1","react","凭借","rtual","DOM","和","ff","算法","拥有","高效","的","性能","，","除此之外","也","有","很多","其他","的","方法","和","技巧","可以","进一步","提升","react","性能","。","1",".","使用","React",".","Memo","(",")","来","缓存","组件","父","组件","的","每次","状态","更新","，","都会","导致","子","组件","重新","渲染","，","即使","传入","子","组件","的","状态","没有","变化","，","当","类","组件","的","输入","属性","相同","时","可以","使用","pureComponent","或","shoulComponentUate","来","避免","组件","的","渲染","，","函数","组件","中","我们","可以","使用","React",".","memo","来","缓存","组件","，","这样","只有","当","传入","组件","的","状态","值","发生","变化","时","才","会","重新","渲染","。","如果","传入","相同","的","值","，","则","返回","缓存","的","组件","。","示例","如下",":","12345","export","efault","React",".","memo","(","props",")","=","&","#","123",";","return","(","&","#","123",";","props",".","alue","&","#","125",";",")",";","&","#","125",";","React",".","memo","（","浅","比较","）","123456789101112131415161718192021222324252627","mport","React",",","&","#","123",";","Component","&","#","125",";","from","'","react","'",";","mport","AreEqual","from","'",".","componentAreEqual","'",";","class","App","extens","Component","&","#","123",";","constructor","(","props",")","&","#","123",";","super","(","props",")",";","ths",".","state","=","&","#","123",";","al",":","1","&","#","125",";","&","#","125",";","hanleClck","=","(",")","=","&","#","123",";","ths",".","setState","(","&","#","123",";","al",":","ths",".","state",".","al","&","#","125",";",")",";","&","#","125",";","rener","(",")","&","#","123",";","return","(","button","onClck","=","&","#","123",";","ths",".","hanleClck","&","#","125",";","点击","button","AreEqual","&","#","123",";",".",".",".","ths",".","state","&","#","125",";",")",";","&","#","125",";","&","#","125",";","export","efault","App",";","12345678910111213141516171819202122232425","mport","React","from","'","react","'",";","functon","areEqual","(","preProps",",","nextProps",")","&","#","123",";","*","*","*","如果","把","nextProps","传入","rener","方法","的","返回","结果","与","将","*","preProps","传入","rener","方法","的","返回","结果","一致","则","返回","true","*","否则","返回","false","*","f","(","preProps",".","al","=","=","=","nextProps",".","al",")","&","#","123",";","return","true",";","&","#","125",";","else","&","#","123",";","return","false",";","&","#","125",";","&","#","125",";","functon","AreEqual","(","props",")","&","#","123",";","console",".","log","(","\"","渲染","了","\"",")",";","const","&","#","123",";","al","&","#","125",";","=","props",";","return","&","#","123",";","al","&","#","125",";","&","#","125",";","React",".","memo","(",")","两个","参数","第","一个","是","纯","函数","，","第二个","是","比较","函数","export","efault","React",".","memo","(","AreEqual",",","areEqual",")",";","2",".","React",".","PureComponent","作用","：","React",".","PureComponent","和","React",".","Component","类似","，","都是","定义","一个","组件","类","。","不同的","是","React",".","Component","没有","实现","shoulComponentUpate","(",")","，","而","React",".","PureComponent","通过","props","和","state","的","浅","比较","实现","了","。","React",".","PureComponent","是","作用","在","类","中","，","React",".","memo","是","作用","在","函数","中","12345678910111213","class","Chlren","extens","React",".","PureComponent","&","#","123",";","rener","(",")","&","#","123",";","&","#","123",";","ths",".","props",".","name","&","#","125",";","&","#","125",";","&","#","125",";","export","efault","class","App","extens","React",".","Component","&","#","123",";","rener","(",")","&","#","123",";","Chlren","name","=","&","#","123",";","'","这是","React",".","pureComponent","的","使用方法","'","&","#","125",";","&","#","125",";","&","#","125",";","3",".","使用","useMemo","缓存","大量","的","计算","有时","渲染","是","不可避免","的","，","但","如果","您","的","组件","是","一个","功能","组件","，","重新","渲染","会","导致","每次","都","调用","大型","计算","函数","，","这是","非常","消耗","性能","的","，","我们","可以","使用","新的","useMemo","钩子","来","“","记忆","”","这个","计算","函数","的","计算","结果","。","这样","只有","传入","的","参数","发生","变化","后","，","该","计算","函数","才","会","重新","调用","计算","新的","结果","。","通过","这种","方式","，","您","可以","使用","从","先前","渲染","计算","的","结果","来","挽救","昂贵的","计算","耗时","。","总体目标","是","减少","JaaScrpt","在","呈现","组件","期间","必须","执行","的","工作量","，","以便","主线","程被","阻塞","的","时间","更短","。","1234567891011","避免","这样","做","functon","Component","(","props",")","&","#","123",";","const","someProp","=","heayCalculaton","(","props",".","tem",")",";","return","AnotherComponent","someProp","=","&","#","123",";","someProp","&","#","125",";","&","#","125",";","只","有","`","props",".","tem","`","改变","时","someProp","的","值","才","会","被","重新","计算","functon","Component","(","props",")","&","#","123",";","const","someProp","=","useMemo","(","(",")","=","heayCalculaton","(","props",".","tem",")",",","[","props",".","tem","]",")",";","return","AnotherComponent","someProp","=","&","#","123",";","someProp","&","#","125",";","&","#","125",";","4",".","使用","React",".","PureComponent",",","shoulComponentUpate","父","组件","状态","的","每次","更新","，","都会","导致","子","组件","的","重新","渲染","，","即使","是","传入","相同","props","。","但是","这里","的","重新","渲染","不是","说","会","更新","DOM",",","而是","每次","都会","调用","f","算法","来","判断","是否","需要","更新","DOM","。","这","对于","大型","组件","例如","组件","树","来说","是非","常","消耗","性能","的","。","在","这里","我们","就","可以","使用","React",".","PureComponent",",","shoulComponentUpate","生命周期","来","确保","只有","当","组件","props","状态","改变","时","才","会","重新","渲染","。","如下","例子",":","1234567891011121314151617181920212223","export","efault","functon","ParentComponent","(","props",")","&","#","123",";","return","(","SomeComponent","someProp","=","&","#","123",";","props",".","somePropValue","&","#","125",";","AnotherComponent","someOtherProp","=","&","#","123",";","props",".","someOtherPropValue","&","#","125",";",")","&","#","125",";","export","efault","functon","SomeComponent","(","props",")","&","#","123",";","return","(","&","#","123",";","props",".","someProp","&","#","125",";",")","&","#","125",";","只要","props",".","somePropValue","发生","变化","，","不论","props",".","someOtherPropValue","是否","发生","变化","该","组件","都会","发生","变化","export","efault","functon","AnotherComponent","(","props",")","&","#","123",";","return","(","&","#","123",";","props",".","someOtherProp","&","#","125",";",")","&","#","125",";","使用","React",".","PureComponent","、","shoulComponentUpate","性能","优化","12345678910111213141516","第一种","优化","class","AnotherComponent","extens","React",".","PureComponent","&","#","123",";","rener","(",")","&","#","123",";","return","&","#","123",";","ths",".","props",".","someOtherProp","&","#","125",";","&","#","125",";","&","#","125",";","第","二种","优化","class","AnotherComponent","extens","Component","&","#","123",";","shoulComponentUpate","(","nextProps",")","&","#","123",";","return","ths",".","props","!","=","=","nextProps","&","#","125",";","rener","(",")","&","#","123",";","return","&","#","123",";","ths",".","props",".","someOtherProp","&","#","125",";","&","#","125",";","&","#","125",";","PureComponent","会","进行","浅","比较","来","判断","组件","是否","应该","重新","渲染","，","对于","传入","的","基本","类型","props","，","只要","值","相同","，","浅","比较","就","会","认为","相同","，","对于","传入","的","引用","类型","props","，","浅","比较","只","会","认为","传入","的","props","是不是","同一个","引用","，","如果","不是","，","哪怕","这","两个","对象","中的","内容","完全","一样","，","也","会","被","认为","是","不同的","props","。","需要","注意的","是","在","对于","那些","可以","忽略","渲染","时间","的","组件","或者","是","状态","一直","变化","的","组件","则要","谨慎","使用","PureComponent","，","因为","进行","浅","比较","也","会","花费","时间","，","这种","优化","更","适用于","大型","的","展示","组件","上","。","大型","组件","也","可以","拆分","成","多","个","小","组件","，","并","使用","memo","来","包裹","小","组件","，","也","可以","提升","性能","。","补充","：","PureComponent","浅","比较","部分","核心","源码","123456789101112131415161718192021222324252627282930313233343536","functon","shallowEqual","(","objA",":","mxe",",","objB",":","mxe",")",":","boolean","&","#","123",";","下面","的","s","相当于","=","=","=","的","功能","，","只","是","对","+","0","和","-","0","，","以及","NaN","和","NaN","的","情况","进行","了","特殊","处理","第一","关","：","基础","数据类型","直接","比较","出","结果","f","(","s","(","objA",",","objB",")",")","&","#","123",";","return","true",";","&","#","125",";","第二","关","：","只","要有","一个","不是","对象","数据类型","就","返回","false","f","(","typeof","objA","!","=","=","'","object","'","objA","=","=","=","null","typeof","objB","!","=","=","'","object","'","objB","=","=","=","null",")","&","#","123",";","return","false",";","&","#","125",";","第三","关","：","在","这里","已经","可以","保证","两个","都是","对象","数据类型","，","比较","两者","的","属性","数量","const","keysA","=","Object",".","keys","(","objA",")",";","const","keysB","=","Object",".","keys","(","objB",")",";","f","(","keysA",".","length","!","=","=","keysB",".","length",")","&","#","123",";","return","false",";","&","#","125",";","第四","关","：","比较","两者","的","属性","是否","相等","，","值","是否","相等","for","(","let","=","0",";","keysA",".","length",";","+","+",")","&","#","123",";","f","(","!","hasOwnProperty",".","call","(","objB",",","keysA","[","]",")","!","s","(","objA","[","keysA","[","]","]",",","objB","[","keysA","[","]","]",")",")","&","#","123",";","return","false",";","&","#","125",";","&","#","125",";","return","true",";","&","#","125",";","注意","：","比较","终究","是","浅","比较","，","当","出现","嵌套","情况","就","会","失灵","1","state",":","&","#","123",";","a",":","[","\"","1","\"","]","&","#","125",";","-","state",":","&","#","123",";","a",":","[","\"","1","\"",",","\"","2","\"","]","&","#","125",";","这种","方式","最大","的","弊端","是","由于","JS","引用","赋值","的","原因","，","这种","方式","仅仅","适用于","无","状态","组件","或者","状态","数据","非常","简单的","组件","，","对于","大量","的","应用","组件","无能为力"],"url":"http://yoursite.com/2020/02/05/React%E5%AD%A6%E4%B9%A0%E2%80%94%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%961/","title":"React学习—性能优化1","content":"React性能优化1\nreact凭借virtual DOM和diff算法拥有高效的性能，除此之外也有很多其他的方法和技巧可以进一步提升react性能。\n1. 使用React.Memo()来缓存组件\n父组件的每次状态更新，都会导致子组件...","author":"xiaoxiong","categorie":{},"date":"2020-02-05 13:01:51"},{"word":["React","与","Vue","的","对比","中","1",".","核心","思想","ue","与","react","都","推崇","组件","式","的","开发","理念","，","但是","在","设计","的","核心","思想上","有","很大","差别","。","ueue","的","整体","思想","仍然","式","拥抱","html","(","结构",")","+","css","(","表现",")","+","js","(","行为",")","的","形式","，","ue","鼓励","开发者","使用","template","模板","，","并提","供","指令","供","开发者","使用","(","-","f","、","-","show","、","-","for","等","指令",")","，","在","组件","数据","上","，","ue","2.0","通过","Object",".","efneProperty","对","数据","做","到了","更","细致的","监听","，","精准","实现","组件","级","别的","更新","reactreact","整体","上","是","函数","式","的","思想","，","组件","使用","jsx","语法","，","将","html","与","css","都","融入","jaascrpt","，","jsx","语法","相对","来说","更加","灵活","。","class","组件","调用","setState","或","props","变化","的","时候","，","组件","内部","rener","会","重新","渲染","，","子","组件","也","会","随之","重新","渲染","，","可以","通过","shoulComponentUpate","或者","PureComponent","避免","不必要的","重新","渲染","2",".","组件","形式","ue","组件","定义","使用","xx",".","ue","文件","来","表示","，","ue","组件","将","html","、","css","、","js","组合","到","一起","，","模板","部分","使用","双","括号","渲染","数据","，","形式","如下","：","123456789101112131415161718192021","&","#","x","2","F",";","&","#","x","2","F",";","模板","(","html",")","template","&","#","123",";","&","#","123",";","name","&","#","125",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","template","&","#","x","2","F",";","&","#","x","2","F",";","数据","管理","(","js",")","scrptexport","efault","&","#","123",";","name",":","&","#","39",";","NewComponent","&","#","39",";",",","ata","(",")","&","#","123",";","return","&","#","123",";","name",":","&","#","39",";","xx","&","#","39",";","&","#","125",";","&","#","125",";","&","#","125",";","&","#","x","2","F",";","scrpt","&","#","x","2","F",";","&","#","x","2","F",";","样式","(","css",")","style","scope","&","#","x","2","F",";","style","react","推荐","使用","jsx","或者","js","文件","来","表示","组件","，","react","支持","class","组件","和","functon","组件","两种","形式","，","react","使用","{","}","包裹","变量","class","组件","1234567891011121314151617","mport","React","from","'","react","'",";","class","App","extens","React",".","Component","&","#","123",";","constructor","(","props",")","&","#","123",";","super","(","props",")",";","ths",".","state","=","&","#","123",";","name",":","'","xx","'","&","#","125",";",";","&","#","125",";","rener","(",")","&","#","123",";","return","&","#","123",";","ths",".","state",".","name","&","#","125",";","&","#","125",";","&","#","125",";","export","efault","App",";","函数","组件","hooks","的","出现","赋予","了","functon","组件","管理","state","的","能力","12345678910","mport","React",",","&","#","123",";","useState","&","#","125",";","from","'","react","'",";","const","App","=","(",")","=","&","#","123",";","const","[","name",",","setName","]","=","useState","(","'","'",")",";","return","&","#","123",";","name","&","#","125",";",";","&","#","125",";",";","export","efault","App",";","3",".","数据","管理","（","props","、","ata","、","state","）","组件","数据","来自","父","组件","的","数据","props","与","自身","的","数据","ue","与","react","中的","props","都是","单向","数据流","的","，","父","级","props","的","更新","会","向","下流","动","到","子","组件","中","，","props","用来","接收","父","组件","的","数据","ue","props","ue","中的","props","支持","传递","静态","、","动态","props","静态","：","1","new","-","component","ttle","=","\"","stuy","ue","\"","new","-","component","动态","：","1","new","-","component",":","ttle","=","\"","ttle","\"","new","-","component","ata","ue","中","使用","ata","来","管理","组件","的","数据","，","ue","将会","递归","将","ata","的","属性","转换","为","gettersetter","，","从而","让","ata","的","属性","能够","响应","数据","变化","。","对象","必须","是","纯粹","的","对象","(","含","有零","个","或","多","个","的","keyalue","对",")","。","一旦","观察","过","，","不需要","再次","在","数据","对象","上","添加","响应","式","属性","。","因此","推荐","在","创建","实例","之前","，","就","声明","所","有的","根","级","响应","式","属性","。","注意","：","当","一个","组件","被","定义","，","ata","必须","声明","为","返回","一个","初始","数据","对象","的","函数","。","123456789","export","efault","&","#","123",";","name",":","'","NewComponent","'",",","ata","(",")","&","#","123",";","return","&","#","123",";","name",":","'","xxx","'",",","age",":","12","&","#","125",";","&","#","125",";","&","#","125",";","当","需要","在","组件","内部","修改","数据","时","，","可以","直接","通过","ue","实例","修改","：","12345","methos",":","&","#","123",";","changeName","(",")","&","#","123",";","ths",".","name","=","'","new","Name","'",";","&","#","125",";","&","#","125",";","react","props","react","中的","props","也","与","ue","一样可以","传递","静态","或","动态","props","，","静态","props","一般","传递","字符串","。","函数","组件","和","class","组件","都","可以","使用","props","，","函数","组件","使用","props","参数","获取","父","组件","传下","来","的","props","。","函数","组件","获取","props","：","12345","functon","Welcome","(","props",")","&","#","123",";","return","h","1","Hello",",","&","#","123",";","props",".","name","&","#","125",";","&","#","x","2","F",";","h","1",";","&","#","125",";","const","element","&","#","x","3","D",";","Welcome","name","&","#","x","3","D",";","&","quot",";","Sara","&","quot",";","&","#","x","2","F",";",";","class","组件","使用","ths",".","props","获取","组件","props","：","12345678910","class","Welcome","extens","React",".","Component","&","#","123",";","constructor","(","props",")","&","#","123",";","super","(","props",")",";","&","#","125",";","rener","(",")","&","#","123",";","const","&","#","123",";","name","&","#","125",";","&","#","x","3","D",";","ths",".","props",";","return","&","#","123",";","name","&","#","125",";","&","#","x","2","F",";",";","&","#","125",";","&","#","125",";","复制","代码","动态","props","：","1","Welcome","name","&","#","x","3","D",";","&","#","123",";","name","&","#","125",";","&","#","x","2","F",";","state","react","中","使用","state","来","管理","组件","内","的","数据","，","hooks","的","出现","使得","函数","组件","也","具备","管理","state","的","能力","class","组件","stateclass","组件","在","构造","函数","（","constructor","）","中","定义","组件","内","数据","（","state","）","，","修改","数据","必须","通过","setState","修改","，","不能","直接","修改","state","，","这点","非常重要","。","class","组件","使用","state","：","1234567891011121314151617181920","class","Welcome","extens","React",".","Component","&","#","123",";","constructor","(","props",")","&","#","123",";","super","(","props",")",";","ths",".","state","=","&","#","123",";","name",":","'","xx","'","&","#","125",";",";","ths",".","changeName","=","ths",".","changeName",".","bn","(","ths",")",";","&","#","125",";","changeName","(",")","&","#","123",";","ths",".","setState","(","&","#","123",";","name",":","'","new","name","'","&","#","125",";",")",";","&","#","125",";","rener","(",")","&","#","123",";","const","&","#","123",";","ths",".","state",".","name","&","#","125",";","=","ths",".","state",";","return","onClck","=","&","#","123",";","ths",".","changeName","&","#","125",";","&","#","123",";","name","&","#","125",";",";","&","#","125",";","&","#","125",";","关于","class","组建","的","setState","有","以下","两点","说明","：","1",".","setState","更新","是","异步","的","，","但是","在","setTmeout","和","原生","事件","中","是","同步","的","。","2",".","setState","更新","的","是","组件","的","部分","数据","，","react","会","自动","将","数据","合并","。","当","需要","使用","上一个","state","值时","，","可以","让","setState","(",")","接收","一个","函数","而","不是","一个","对象","。","这个","函数","用上","一个","state","作为","第一个","参数","，","将","此","次","更新","被","应","用时","的","props","做为","第二个","参数","：","123","ths",".","setState","(","(","state",",","props",")","=","(","&","#","123",";","counter",":","state",".","counter","+","props",".","ncrement","&","#","125",";",")",")",";","函数","组件","useStatereact","16.8","之前","函数","组件","只是","纯的","渲染","组件","，","hooks","的","出现","赋予","了","函数","组件","管理","state","的","能力","。","useState","返回","一个","state","，","以及","更新","state","的","函数","。","如果","新的","state","需要","通过","使用","先前","的","state","计算","得出","，","那么","可以","将","函数","传递","给","setState","。","该","函数","将","接收","先前","的","state","，","并","返回","一个","更新","后","的","值","。","12345678910111213","mport","React",",","&","#","123",";","useState","&","#","125",";","from","'","react","'",";","functon","Counter","(","&","#","123",";","ntalCount","&","#","125",";",")","&","#","123",";","const","[","count",",","setCount","]","=","useState","(","ntalCount",")",";","return","(","Count",":","&","#","123",";","count","&","#","125",";","button","onClck","=","&","#","123",";","(",")","=","setCount","(","ntalCount",")","&","#","125",";","Resetbutton","button","onClck","=","&","#","123",";","(",")","=","setCount","(","preCount","=","preCount","-","1",")","&","#","125",";","-","button","button","onClck","=","&","#","123",";","(",")","=","setCount","(","preCount","=","preCount","+","1",")","&","#","125",";","+","button",")",";","&","#","125",";","关于","setState","有","以下","三点","说明","：","1",".","与","class","组件","中的","setState","方法","不同","，","useState","不会","自动","合并","更新","对象","。","2",".","只能","在","函数","最","顶层","调用","Hook","。","不要","在","循环","、","条件","判断","或者","子函数","中","调用","。","3",".","只","能","在","React","的","函数","组件","或","自定义","hook","中","调用","Hook","。","不要","在","其他","JaaScrpt","函数","中","调用","。","4",".","组件","数据","交互","组件","数据","交互","是","指","父子","组件","、","兄弟","组件","、","跨","层","组件","之间","传递","数据","。","兄弟","组件","之间","可以","通过","事件","总线","或者","通过","父","组件","传递","数据","4.1","父子","组件","数据","交互","(","props","+","自定义","事件","s","props","+","回调",")","对于","父子","组件","数据","交互","，","ue","中","使用","prop","+","自","定义","事件","实现","，","react","通过","props","+","回调","ueue","中","父","组件","通过","props","传递","数据","给","子","组件","，","子","组件","使用","$","emt","触发","自定义","事件","，","父","组件","中","监听","子","组件","的","自定义","事件","获取","子","组件","传递","来","的","数据","。","子","组件","使用","$","emt","传递","自","定义","事件","myEent","：","123456789101112131415161718192021","template","@","clck&#x3D",";","&","quot",";","changeName","&","quot",";","&","#","123",";","&","#","123",";","name","&","#","125",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","templatescrptexport","efault","&","#","123",";","name",":","&","#","39",";","NewComponent","&","#","39",";",",","ata","(",")","&","#","123",";","return","&","#","123",";","name",":","&","#","39",";","xxx","&","#","39",";",",","age",":","12","&","#","125",";","&","#","125",";",",","methos",":","&","#","123",";","changeName","(",")","&","#","123",";","ths",".","name","&","#","x","3","D",";","&","#","39",";","new","Name","&","#","39",";",";","ths",".","$","emt","(","&","#","39",";","myEent","&","#","39",";",",","ths",".","name",")",";","&","#","125",";","&","#","125",";","&","#","125",";","&","#","x","2","F",";","scrpt","父","组件","使用","@","myEent","监听","自定义","事件","，","回调","函数","参数","是","子","组件","传回","的","数据","：","1234567891011121314151617181920212223","template","new","-","component","@","myEent&#x3D",";","&","quot",";","getName","&","quot",";","&","#","x","2","F",";","new","-","component","&","#","x","2","F",";","&","#","x","2","F",";","templatescrptmport","NewComponent","from","&","#","39",";",".","&","#","x","2","F",";","NewComponent","&","#","39",";",";","export","efault","&","#","123",";","components",":","&","#","123",";","NewComponent","&","#","125",";",",","ata","(",")","&","#","123",";","return","&","#","123",";","&","#","125",";","&","#","125",";",",","methos",":","&","#","123",";","getName","(","name",")","&","#","123",";","console",".","log","(","name",")","&","#","125",";","&","#","125",";","&","#","125",";","&","#","x","2","F",";","scrpt","reactreact","中","父","组件","使用","props","传递","数据","和","回调","函数","给","子","组件","，","子","组件","通过","props","传下","来","的","回调","函数","返回","数据","，","父","组件","通过","回调","函数","获取","子","组件","传递","上来","的","数据","。","子","组件","通过","props","接收","父","组件","传下","来","的","回调","事件","：","123456789101112","mport","React",",","&","#","123",";","useState","&","#","125",";","from","'","react","'",";","functon","Chlren","(","props",")","&","#","123",";","const","&","#","123",";","myEent","&","#","125",";","=","props",";","const","[","name",",","setName","]","=","useState","(","'","xxx","'",")",";","const","changeName","=","(",")","=","&","#","123",";","setName","(","'","new","name","'",")",";","myEent","(","'","new","name","'",")",";","回调","&","#","125",";",";","return","onClck","=","&","#","123",";","changeName","&","#","125",";","&","#","123",";","name","&","#","125",";",";","&","#","125",";","父","组件","通过","回调","事件","获取","子","组件","传递","的","参数","：","123456","functon","Parent","(",")","&","#","123",";","const","changeName","=","name","=","&","#","123",";","console",".","log","(","name",")",";","&","#","125",";",";","return","Chlren","myEent","=","&","#","123",";","changeName","&","#","125",";","Chlren",";","&","#","125",";","4.2","跨","组件","数据","交互","(","proenject","s","Context",")","ue","和","react","都","支持","跨","组件","传递","数据","，","ue","中","主要","通过","proe","nject","实现","，","react","中","主要","通过","Context","实现","。","ueue","中","通过","proe","nject","在","祖先","组件","向","所有","子孙后代","注入","一个","依赖","，","不论","组件","层次","有","多深","，","并","在","起","上","下游","关系","成立","的","时间","里","始终","生效","。","祖先","组件","中","定义","proe","选项","，","proe","选项","应该是","一个","对象","或","返回","一个","对象","的","函数","。","1234567891011121314151617181920212223242526","template","new","-","component","@","myEent&#x3D",";","&","quot",";","getName","&","quot",";","&","#","x","2","F",";","new","-","component","&","#","x","2","F",";","&","#","x","2","F",";","templatescrptmport","NewComponent","from","&","#","39",";",".","&","#","x","2","F",";","NewComponent","&","#","39",";",";","export","efault","&","#","123",";","proe",":","&","#","123",";","&","#","x","2","F",";","&","#","x","2","F",";","定义","proe","选项","message",":","&","#","39",";","Ths","s","a","bg","news","&","#","39",";","&","#","125",";",",","components",":","&","#","123",";","NewComponent","&","#","125",";",",","ata","(",")","&","#","123",";","return","&","#","123",";","&","#","125",";","&","#","125",";",",","methos",":","&","#","123",";","getName","(","name",")","&","#","123",";","console",".","log","(","name",")","&","#","125",";","&","#","125",";","&","#","125",";","&","#","x","2","F",";","scrpt","子","组件","通过","nject","选项","获取","祖先","组件","的","proe","选项","值","，","nject","选项","应该是","一个","字符串","数组","或者","对象","。","12345678910111213","template","&","#","123",";","&","#","123",";","message","&","#","125",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","templatescrptexport","efault","&","#","123",";","name",":","&","#","39",";","Chlren","&","#","39",";",",","nject",":","[","&","#","39",";","message","&","#","39",";","]",",","ata","(",")","&","#","123",";","return","&","#","123",";","&","#","125",";","&","#","125",";","&","#","125",";","&","#","x","2","F",";","scrpt","注意","：","proe","和","nject","绑定","并","不是","可","响应","的","。","这是","刻意","为","之","的","。","然而","，","如果","你","传入","了","一个","可","监听","的","对象","，","那么","其","对象","的","属性","还是","可","响应","的","。","reactContext","提供","了","一个","无需","为","每","层","组件","手动","添加","props","，","就","能","在","组件","树间","进行","数据","传递","的","方法","。","在","父","组件","创建","一个","Context","对象","，","通过","Context",".","proer","的","alue","属性","向","消费","组件","传值","。","123456789101112131415","mport","React",",","&","#","123",";","useState","&","#","125",";","from","'","react","'",";","创建","Context","对象","const","MyContext","=","React",".","createContext","(","&","#","123",";","theme",":","'","black","'","&","#","125",";",")",";","functon","Parent","(",")","&","#","123",";","const","changeName","=","name","=","&","#","123",";","console",".","log","(","name",")",";","&","#","125",";",";","Context",".","proer","向","消费","组件","传值","return","(","MyContext",".","Proer","alue","=","&","#","123",";","&","#","123",";","theme",":","'","whte","'","&","#","125",";","&","#","125",";","Chlren","myEent","=","&","#","123",";","changeName","&","#","125",";","Chlren",";","MyContext",".","Proer",")",";","&","#","125",";","消费","组件","获取","Context","有","2种","方式","：","（","1","）","class","组件","通过","contextType","获取","最近","Context","上","的","那个","值","。","1234567891011","class","DeepChlren","1","extens","React",".","Component","&","#","123",";","constructor","(","props",")","&","#","123",";","super","(","props",")",";","&","#","125",";","statc","contextType","=","MyContext",";","rener","(",")","&","#","123",";","return","&","#","123",";","ths",".","context",".","theme","&","#","125",";","123",";","&","#","125",";","&","#","125",";","（","2","）","函数","式","组件","通过","Context",".","Consumer","订阅","到","Context","的","变更","。","123456789","functon","DeepChlren","(","props",")","&","#","123",";","return","(","MyContext",".","Consumer","&","#","123",";","(","alue",")","=","(","&","#","123",";","alue",".","theme","&","#","125",";",")","&","#","125",";","MyContext",".","Consumer",")",";","&","#","125",";","关于","Context","需要","注意","：","当","Proer","的","父","组件","进行","重","渲染","时","，","consumers","组件","会","重新","渲染","，","并且","没有办法","避免","，","应该","尽量","避免","使用","Context","。","5",".","生命周期","组件","的","生命周期","一般","包括","：","初始化","、","挂载","、","更新","、","卸载","四大","阶段","，","接下来","分别","看","下","ue","和","react","的","生命周期","ueue","生命周期","图示",":","ue","生命周期","包含",":","beforeCreate","实例","组件","刚","创建","，","元素","DOM","和","数据","都","还没有","初始化","，","暂时","不能","在","这个","周期","里面","进行","任何","操作","。","create","数据","ata","已经","初始化","完成","，","方法","也","已经","可以","调用","，","但是","DOM","未","渲染","。","调用","后台","接口","获取","数据","可以","在","这个","阶段","完成","。","beforeMount","DOM","未完","成","挂载","，","数据","也","初始化","完成","，","但是","数据","的","双向","绑定","还是","显示","双","括号","，","虚拟","DOM","结构","已经","生成","。","mounte","数据","和","DOM","都","完成","挂载","，","在","上一个","周期","占位","的","数据","把","值","给","渲染","进去","。","这个","周期","适合","执行","初始化","需要","操作","DOM","的","方法","。","beforeUpate","页面","数据","改变","了","都会","触发","，","在","更新","前","触发","，","此时","的","数据","还是","未","更新","前","的","数据","，","没有","数据","改变","则","不","执行","。","upate","页面","数据","改变","都会","触发","，","在","更新","完成","之后","触发","，","此时","的","数据","是","更新","后","的","数据","。","注意","：","在","这里","操作","数据","很容易","引起","卡","死","。","beforeDestroy","组件","销毁","之前","执行","，","在","这个","周期","里","仍然","可以","访问","ata","和","metho","，","多","组件","间","通信","需要","发布","信息","时","可以","在","该","阶段","完成","。","estroye","当","离开","组件","对应","页面","时","组件","销毁","时","触发","，","主要","用于","取消","一些","副作用","（","取消","事件","监听","、","取消","定时器","、","取消","不必要的","请求","等","）","react","16.3","以前","的","生命周期","（","1","）","初始化","constructor","是","class","组件","的","默认","方法","，","常用","来","初始化","state","或者","设置","属性","等","。","12345678","class","Counter","extens","React",".","component","&","#","123",";","constructor","(","props",")","&","#","123",";","super","(","props",")",";","声明","constructor时","必须","调用","super","方法","ths",".","state","=","&","#","123",";","count",":","0","&","#","125",";",";","&","#","125",";","&","#","125",";","（","2","）","挂载","阶段","componentWllMount","(",")","组件","挂载","之前","调用","，","并且","只","会","调用","一次","。","renerrener","是","一个","React","组件","必须","定义","的","生命周期","函数","，","用来","渲染","DOM","。","并","必须","return","一个","React","元素","（","描述","组件","，","即","UI","）","，","不","负责","组件","实际","渲染","工作","，","之后","由","React","自身","根据","此","元素","去","渲染","出","页面","DOM","。","不要","在","rener","里面","修改","state",",","会","引起","死","循环","导致","卡","死","。","componentDMount","(",")","组件","挂在","完成","之后","调用","，","在","这个","阶段","可以","获取","真实","om","元素","，","常用","来","发起","异步","请求","获取","数据","。","（","3","）","更新","阶段","当","通过","setState","修改","state","或","父","组件","重新","rener","引起","props","更新","，","都会","引起","子","组件","的","重新","rener","。","componentWllReceeProps","(","nextProps",")","props","发生","变化","以及","父","组件","重新","渲染","时","都会","触发","该","生命","周期函数","。","在","该","阶段","可以","通过","参数","nextProps","获取","变化","后","的","props","参数","，","通过","ths",".","props","访问","之前","的","props","。","该","生命周期","内","可以","进行","setState","。","shoulComponentUpate","(","nextProps",",","nextState",")","组件","每次","setState","或者","父","组件","重新","rener","都会","引起","子","组件","rener","，","可以","使用","该","钩子","比较","nextProps","，","nextState","及","当前","组件","的","ths",".","props","，","ths",".","state","的","状态","用来","判断","是否","需要","重新","渲染","。","默认","返回","true","，","需要","重新","rener","，","返回","false","则","不","触发","渲染","。","一般","我们","通过","该","钩子","来","优化","性能","，","避免","子","组件","不必要的","渲染","。","componentWllUpate","(","nextProps",",","nextState",")","当","组件","收到","新的","props","或","state","时","，","会","在","渲染","之前","调用","。","使用","此","作为","在","更新","发生","之前","执行","准备","更新","的","机会","。","初始","渲染","不会","调用","此","方法","。","注意","：","不能","在","此","方法","中","调用","ths",".","setState","componentDUpate","(","preProps",",","preState",")","此","方法","在","组件","更新","后","被","调用","。","首次","渲染","不会","执行","此","方法","。","当","组件","更新","后","，","可以","在","此","处","对","DOM","进行","操作","。","注意","：","可","以","在","componentDUpate","(",")","中","直接","调用","setState","(",")","，","但是","它","必需","被","包裹","在","一个","条件","语句","里","，","否则","会","导致","死","循环","。","（","4","）","卸载","阶段","componentWllUnmount","(",")","会","在","组件","卸载","及","销毁","之前","直接","调用","。","在","此","方法","中","执行","必要的","清理","操作","，","例如","，","清除","tmer","，","取消","网络","请求","或","清除","在","componentDMount","(",")","中","创建","的","订阅","等","。","注意","：","componentWllUnmount","(",")","中","不","应","调用","setState","(",")","，","因为","该","组件","将","永远","不会","重新","渲染","。","16.4","之后","react","16.0","之后","移","除","的","生命","周期函数","：","componentWllMount","componentWllReceeProps","componentWllUpate","但是","为了","向下","兼容","，","react","并未","删除","这","三个","生命周期","，","新增","以","UNSAFE","_","前缀","为","别名","的","三个","函数","UNSAFE","_","componentWllMount","(",")","、","UNSAFE","_","componentWllReceeProps","(",")","、","UNSAFE","_","componentWllUpate","(",")","。","新增","的","生命周期","函数","：","statc","getDereStateFromProps","(","nextProps",",","preState",")","getSnapshotBeforeUpate","(","preProps",",","preState",")","生命周期","如下","：","总结","：","初始化","阶段","保持","不变","挂载","阶段",":","getDereStateFromProps","=","rener","=","componentDMount","更新","阶段",":","getDereStateFromProps","=","shoueComponentUpate","=","rener","=","getSnapshotBeforeUpate","=","componentDUpate","卸载","阶段","保持","不变","getDereStateFromProps","、","getSnapshotBeforeUpate","两个","方法","。","（","1","）","statc","getDereStateFromProps","(","props",",","state",")","getDereStateFromProps","会","在","调用","rener","方法","之前","调用","，","并且","在","初始","挂载","及","后续","更新","时","都会","被","调用","。","它","应","返回","一个","对象","来","更新","state","，","如果","返回","null","则","不","更","新任","何","内容","。","当","state","的","值","在任","何","时候","都","取决于","props","的","时候","适用","该","方法","。","示例","如下","：","123456789101112131415161718","class","ScrollngLst","extens","React",".","Component","&","#","123",";","constructor","(","props",")","&","#","123",";","super","(","props",")",";","&","#","125",";","statc","getDereStateFromProps","(","nextProps",",","preState",")","&","#","123",";","f","(","nextProps",".","type","!","=","=","preState",".","type",")","&","#","123",";","return","&","#","123",";","type",":","nextProps",".","type",",","&","#","125",";",";","&","#","125",";","return","null",";","&","#","125",";","rener","(",")","&","#","123",";","return","(","&","#","123",";","*",".",".",".","contents",".",".",".","*","&","#","125",";",")",";","&","#","125",";","&","#","125",";","（","2","）","getSnapshotBeforeUpate","(","preProps",",","preState",")","getSnapshotBeforeUpate","(",")","在","最近","一次","渲染","输出","（","提交","到","DOM","节点","）","之前","调用","。","它","使得","组件","能","在","发生","更改","之前","从","DOM","中","捕获","一些","信息","（","例如","，","滚动","位置","）","。","此","生命周期","的","任何","返回","值","将","作为","参数","传递","给","componentDUpate","(",")","。","此","用法","并不","常见","，","但","它","可能","出现","在","UI","处理","中","，","如","需要","以","特殊","方式","处理","滚动","位置","的","聊天","线程","等","。","应","返回","snapshot","的","值","（","或","null","）","。","示例","如下","：","1234567891011121314151617181920212223242526272829303132","class","ScrollngLst","extens","React",".","Component","&","#","123",";","constructor","(","props",")","&","#","123",";","super","(","props",")",";","ths",".","lstRef","=","React",".","createRef","(",")",";","&","#","125",";","getSnapshotBeforeUpate","(","preProps",",","preState",")","&","#","123",";","我们","是否","在","lst","中","添加","新的","tems","？","捕获","滚动","位置","以便","我们","稍后","调整","滚动","位置","。","f","(","preProps",".","lst",".","length","ths",".","props",".","lst",".","length",")","&","#","123",";","const","lst","=","ths",".","lstRef",".","current",";","return","lst",".","scrollHeght","-","lst",".","scrollTop",";","&","#","125",";","return","null",";","&","#","125",";","componentDUpate","(","preProps",",","preState",",","snapshot",")","&","#","123",";","如果","我们","snapshot","有","值","，","说明","我们","刚刚","添加","了","新的","tems","，","调整","滚动","位置","使得","这些","新","tems","不会","将","旧的","tems","推出","视图","。","（","这里","的","snapshot","是","getSnapshotBeforeUpate","的","返回","值","）","f","(","snapshot","!","=","=","null",")","&","#","123",";","const","lst","=","ths",".","lstRef",".","current",";","lst",".","scrollTop","=","lst",".","scrollHeght","-","snapshot",";","&","#","125",";","&","#","125",";","rener","(",")","&","#","123",";","return","(","ref","=","&","#","123",";","ths",".","lstRef","&","#","125",";","&","#","123",";","*",".",".",".","contents",".",".",".","*","&","#","125",";",")",";","&","#","125",";","&","#","125",";"],"url":"http://yoursite.com/2020/02/04/React%E5%AD%A6%E4%B9%A0%E2%80%94React%E4%B8%8EVue%E6%AF%94%E8%BE%832/","title":"React学习—React与Vue比较2","content":"React与Vue的对比中1.核心思想\nvue与react都推崇组件式的开发理念，但是在设计的核心思想上有很大差别。\n\nvuevue的整体思想仍然式拥抱html(结构)+css(表现)+js(行为)的形式，vue鼓励开发者使用temp...","author":"xiaoxiong","categorie":{},"date":"2020-02-04 16:57:36"},{"word":["React","中的","state","1",".","不能","直接","修改","state","12345","wrongths",".","state",".","comment","=","'","Hello","'","correctths",".","setState","(","&","#","123",";","comment",":","'","Hello","'","&","#","125",";",")","2",".","state","中","数据","的","修改","通过","setState","修改","state","中","的","数据","setState","中","的","关键","点","setState","不会","立刻","改变","React","组件","中","state","的","值","setState","通过","引发","一次","组件","的","更新过程","来","引发","重新","绘制","重","绘指","的","就是","引起","React","的","更新","生命周期","函数","4个","函数","：","shoulComponentUpate","（","被","调用","时","ths",".","state","没有","更新","；","如果","返回","了","false","，","生命周期","被","中断","，","虽然","不","调用","之后","的","函数","了","，","但是","state","仍然","会","被","更新","）","componentWllUpate","（","被","调用","时","ths",".","state","没有","更新","）","rener","（","被","调用","时","ths",".","state","得到","更新","）","componentDUpate","多次","setState","函数","调用","产生","的","效果","会合","并","。","1234","ths",".","setState","(","&","#","123",";","name",":","'","Pororo","'","&","#","125",";",")","ths",".","setState","(","&","#","123",";","age",":","20","&","#","125",";",")","相当于","ths",".","setState","(","&","#","123",";","name",":","'","Pororo","'","，","age",":","20","&","#","125",";",")","上面","两块","代码","的","效果","是","一样","的","。","如果","每次","调用","都","引发","一次","生命周期","更新","，","那","性能","就","会","消耗","很大了","。","所以","，","React","会","将","多","个","ths",".","setState","产生","的","修改","放进","一个","队列","里","，","等","差不多","的","时候","就","会","引发","一次","生命周期","更新","。","1234567891011121314151617181920212223242526272829303132333435363738394041","mport","React",",","&","#","123",";","Component","&","#","125",";","from","'","react","'","export","efault","class","Eg","extens","Component","&","#","123",";","constructor","(",")","&","#","123",";","super","(",")","ths",".","state","=","&","#","123",";","alue",":","0",",","nex",":","0","&","#","125",";","&","#","125",";","react","生命周期","componentDMount","(",")","&","#","123",";","ths",".","setState","(","&","#","123",";","alue",":","ths",".","state",".","alue","+","1","&","#","125",";",")","console",".","log","(","ths",".","state",".","alue",")","第一次","输出","ths",".","setState","(","&","#","123",";","alue",":","ths",".","state",".","alue","+","1","&","#","125",";",")","console",".","log","(","ths",".","state",".","alue",")","第二次","输出","setTmeout","(","(",")","=","&","#","123",";","ths",".","setState","(","&","#","123",";","alue",":","ths",".","state",".","alue","+","1","&","#","125",";",")","console",".","log","(","ths",".","state",".","alue",")","第三次","输出","ths",".","setState","(","&","#","123",";","alue",":","ths",".","state",".","alue","+","1","&","#","125",";",")","console",".","log","(","ths",".","state",".","alue",")","第四次","输出","&","#","125",";",",","0",")","通过","aEentLstener","监听","的","会同","步","执行","setState","(",")","ths",".","refs",".","button",".","aEentLstener","(","'","clck","'",",","ths",".","clck",")","&","#","125",";","clck","=","(",")","=","&","#","123",";","ths",".","setState","(","&","#","123",";","nex",":","ths",".","state",".","nex","+","1","&","#","125",";",")","console",".","log","(","ths",".","state",".","nex",")","同步","时","输出","1","异步","时","（","通过","react","事件","机制","定义","的","事件","处理","函数","）","输出","0","ths",".","setState","(","&","#","123",";","nex",":","ths",".","state",".","nex","+","1","&","#","125",";",")","console",".","log","(","ths",".","state",".","nex",")","同步","时","输出","2","异步","时","（","通过","react","事件","机制","定义","的","事件","处理","函数","）","输出","0","&","#","125",";","rener","(",")","&","#","123",";","return","(","spanalue",":","&","#","123",";","ths",".","state",".","alue","&","#","125",";","nex",":","&","#","123",";","ths",".","state",".","nex","&","#","125",";","span","button","ref","=","\"","button","\"","onClck","=","&","#","123",";","ths",".","clck","&","#","125",";","点击","button",")","&","#","125",";","&","#","125",";","分析","：","前","两次","setState","：","123456","异步","ths",".","setState","(","&","#","123",";","alue",":","ths",".","state",".","alue","+","1","&","#","125",";",")",";","console",".","log","(","ths",".","state",".","alue",")",";","第一次","输出","0","ths",".","setState","(","&","#","123",";","alue",":","ths",".","state",".","alue","+","1","&","#","125",";",")",";","console",".","log","(","ths",".","state",".","alue",")",";","第二次","输出","0","由于","setState","不会","立即","改变","React","组件","中","state","的","值","，","所以","两次","setState","中","ths",".","state",".","alue","都是","同一个","值","0","，","故而","，","这","两次","输出","都是","0","。","因而","alue","只","被","加","1","。","既然","这样","，","那么","是不是","可以","直接","操作","ths",".","state","呢","？","比如","：","ths",".","state",".","alue","=","ths",".","state",".","alue","+","1",";","这样","的确","可以","修改","ths",".","state",".","alue","的","状态","但是","却","不可以","引发","重复","渲染","。","所以","，","就","必须","通过","React","设定","的","setState","函数","去","改变","ths",".","state","，","从而","引发","重新","渲染","。","setTmeout","里面","的","两次","setState",":","1234567","同步","setTmeout","(","(",")","=","&","#","123",";","ths",".","setState","(","&","#","123",";","alue",":","ths",".","state",".","alue","+","1","&","#","125",";",")","console",".","log","(","ths",".","state",".","alue",")","第三次","输出","2","ths",".","setState","(","&","#","123",";","alue",":","ths",".","state",".","alue","+","1","&","#","125",";",")","console",".","log","(","ths",".","state",".","alue",")","第四次","输出","3","&","#","125",";",",","0",")","在","React","中","，","如果","是","由","React","引发","的","事件","处理","（","比如","：","onClck","引发","的","事件","处理","）","，","调用","setState","不会","同步","更新","ths",".","state","，","除此之外","的","setState","调用","会同","步","执行","ths",".","setState","。","“","除此之外","”","指","的","是","：","绕过","React","通过","aEentLstener","直接","添加","的","事件","处理","函数","和","setTmeoutsetInteral","产生","的","异步","调用","。","每次","setState","产生","新的","state","会","依次","被","存入","一个","队列","，","然后","会","根据","sBathngUpates","变量","判断","是","直接","更新","ths",".","state","还是","放进","rtyComponent","里","回头","再说","。","sBatchngUpates","默认","是","false","，","也","就","表示","setState","会同","步","更新","ths",".","state","。","但是","，","当","React","在","调用","事件","处理","函数","之前","就","会","调用","batcheUpates","，","这个","函数","会","把","sBatchngUpates","修改","为","true","，","造成","的","后果","就是","由","React","控制","的","事件","处理","过程","setState","不会","同步","更新","ths",".","state","。","3",".","同步","更新","state","的","办法","—","函数","式","setState","如果","ths",".","setState","的","参数","不是","一个","对象","而是","一个","函数","时","，","这个","函数","会","接收","到","两个","参数","，","第","一个","是","当前","的","state","值","，","第二个","是","当前","的","props","，","这个","函数","应该","返回","一个","对象","，","这个","对象","代表","想要","对","ths",".","state","的","更改","，","换句话说","，","之前","你想","给","ths",".","setState","传递","什么","对象","参数","，","在","这种","函数","里","就","返回","什么","对象","。","不过","，","计算","这个","对象","的","方法","有些","改变","，","不再","依赖","于","ths",".","state","，","而是","依赖于","输入","参数","state","。","123","functon","ncrement","(","state",",","props",")","&","#","123",";","return","&","#","123",";","count",":","state",".","count","+","1","&","#","125",";",";","&","#","125",";","12345","functon","ncrementMultple","(",")","&","#","123",";","ths",".","setState","(","ncrement",")",";","ths",".","setState","(","ncrement",")",";","ths",".","setState","(","ncrement",")",";","&","#","125",";","假如","当前","ths",".","state",".","count","的","值","是","0","，","第一次","调用","ths",".","setState","(","ncrement",")","，","传给","ncrement","的","state","参数","是","0","，","第二次","调用","时","，","state","参数","是","1","，","第三次","调用","时","参数","是","2","，","最终","ncrementMultple","让","ths",".","state",".","count","变成","了","3","。","对于","多次","调用","函数","式","setState","的","情况","，","React","会","保证","调用","每次","ncrement","时","，","state","都","已经","合并","了","之前","的","状态","修改","结果","。","4",".","把","两种","setState","的","用法","混用","把","ncrementMultple","改成","这样","123456","functon","ncrementMultple","(",")","&","#","123",";","ths",".","setState","(","ncrement",")",";","ths",".","setState","(","ncrement",")",";","ths",".","setState","(","&","#","123",";","count",":","ths",".","state",".","count","+","1","&","#","125",";",")",";","ths",".","setState","(","ncrement",")",";","&","#","125",";","在","几个","函数","式","setState","调用","中","插入","一个","传统","式","setState","调用","，","最后","得到","的","结果","是","让","ths",".","state",".","count","增加","了","2","，","而不是","增加","4","。","这是","因为","React","会","依次","合并","所有","setState","产生","的","效果","，","虽然","前","两个","函数","式","setState","调用","产生","的","效果","是","count","加","2","，","但是","中间","出现","一个","传统","式","setState","调用","，","一下子","强行","把","积攒","的","效果","清","空","，","用","count","加","1","取代","。","所以","，","传统","式","setState","与","函数","式","setState","一定","不要","混用","。"],"url":"http://yoursite.com/2020/02/04/React%E5%AD%A6%E4%B9%A0%E2%80%94setState/","title":"React学习—setState","content":"React中的state1. 不能直接修改 state12345// wrongthis.state.comment = 'Hello'// correctthis.setState(&#123;comment: 'Hello'&#1...","author":"xiaoxiong","categorie":{},"date":"2020-02-04 15:11:17"},{"word":["React","与","Vue","的","对比","上","1","、","监听","数据","变化","的","实现","原理","不同","Vue","通过","gettersetter","以及","一些","函数","的","劫持","，","能","精确","知道","数据","变化","，","不需要","特","别的","优化","就","能","达到","很好","的","性能","React","默认","是","通过","比较","引用","地址","的","方式","进行","的","，","如果","不","优化","（","PureComponentshoulComponentUpate","）","可能","导致","大量","不必要的","VDOM","的","重新","渲染","为什么","React","不精确","监听","数据","变化","呢","？","这是","因为","Vue","和","React","设计","理念","上","的","区别","，","Vue","使用","的","是","可变","数据","，","而","React","更","强调","数据","的","不","可变","。","所以","应该说","没有","好坏","之","分","，","Vue","更加","简单","，","而","React","构建","大型","应用","的","时候","更加","鲁棒","。","因为","一般","都会","用","一个","数据","层","的","框架","比如","Vuex","和","Reux","，","所以","这","部分","不","作","过多","解释","，","在","最后","的","uex","和","reux","的","区别","中","也","会","讲到","。","2","、","数据流","的","不同","大家","都","知道","Vue","中","默认","是","支持","双向","绑定","的","。","在","Vue","1.0","中","我们","可以","实现","两种","双向","绑定","：","父子","组件","之间","，","props","可以","双向","绑定","组件","与","DOM","之间","可以","通过","-","moel","双向","绑定","在","Vue","2",".","x","中","去掉","了","第一种","，","也就是","父子","组件","之间","不能","双向","绑定","了","（","但是","提供","了","一个","语法","糖","自动","帮","你","通过","事件","的","方式","修改","）","，","并且","Vue","2",".","x","已经","不","鼓励","组件","对","自己","的","props","进行","任何","修改","了","。","所以","现在","我们","只","有","组件","––","DOM","之间","的","双向","绑定","这","一种","。","然而","React","从","诞生","之","初","就","不支持","双向","绑定","，","React","一直","提倡","的","是","单向","数据流","，","他","称之为","onChangesetState","(",")","模式","。","不过","由于","我们","一般","都会","用","Vuex","以及","Reux","等","单向","数据流","的","状态","管理","框架","，","因此","很多","时候","我们","感受","不到","这一点","的","区别","了","。","3","、","模板","渲染","方式","的","不","同在","表层","上","，","模板","的","语法","不同","React","是","通过","JSX","渲染","模板","而","Vue","是","通过","一种","拓展","的","HTML","语法","进行","渲染","但","其实","这","只","是","表面","现象","，","毕竟","React","并不","必须","依赖","JSX","。","在","深层","上","，","模板","的","原理","不同","，","这","才是","他们","的","本质","区别","：","React","是","在","组件","JS","代码","中","，","通过","原生","JS","实现","模板","中的","常见","语法","，","比如","插","值","，","条件","，","循环","等","，","都是","通过","JS","语法","实现","的","Vue","是","在","和","组件","JS","代码","分离","的","单独","的","模板","中","，","通过","指令","来","实现","的","，","比如","条件","语句","就","需要","-","f","来","实现","4","、","Vuex","和","Reux","的","区别","从","表面","上来","说","，","store","注入","和","使用","方式","有一些","区别","。","在","Vuex","中","，","$","store","被","直接","注入","到了","组件","实例","中","，","因此","可以","比较","灵活的","使用","：","使用","spatch","和","commt","提交","更新","通过","mapState","或者","直","接通","过","ths",".","$","store","来","读取","数据","在","Reux","中","，","我们","每一个","组件","都","需要","显示","的","用","connect","把","需要","的","props","和","spatch","连接","起来","。","另外","Vuex","更加","灵活","一些","，","组件","中","既","可以","spatch","acton","也","可以","commt","upates","，","而","Reux","中","只","能","进行","spatch","，","并不","能","直接","调用","reucer","进行","修改","。","从","实现","原理","上","来说","，","最大","的","区别","是","两点","：","Reux","使用","的","是","不","可变","数据","，","而","Vuex","的","数据","是","可变","的","。","Reux","每次","都是","用","新的","state","替换","旧的","state","，","而","Vuex","是","直接","修改","Reux","在","检测","数据","变化","的","时候","，","是","通过","ff","的","方式","比较","差异","的","，","而","Vuex","其实","和","Vue","的","原理","一样","，","是","通过","gettersetter","来","比较","的","（","如果","看","Vuex","源码","会","知道","，","其实","他","内部","直接","创建","一个","Vue","实例","用来","跟踪","数据","变化","）"],"url":"http://yoursite.com/2020/02/04/React%E5%AD%A6%E4%B9%A0%E2%80%94React%E4%B8%8EVue%E6%AF%94%E8%BE%831/","title":"React学习—React与Vue比较1","content":"React与Vue的对比上1、监听数据变化的实现原理不同\nVue 通过 getter/setter 以及一些函数的劫持，能精确知道数据变化，不需要特别的优化就能达到很好的性能\nReact 默认是通过比较引用地址的方式进行的，如果不优化...","author":"xiaoxiong","categorie":{},"date":"2020-02-04 14:58:44"},{"word":["1",".","create","-","react","-","app","创建","及","使用","Create","React","App","是","FaceBook","的","React","团队","官方","出","的","一个","构建","React","单","页面","应用","的","脚手架","工具","。","它本身","集成","了","Webpack","，","并","配置","了","一系列","内置","的","loaer","和","默认","的","npm","的","脚本","，","可以","很","轻松的","实现","零","配置","就","可以","快速","开发","React","的","应用","12345678910","#","全局","安装","npm","nstall","-","g","create","-","react","-","app","#","构建","一个","my","-","app","的","项目","(","my","-","app","是","你","的","项目","的","名称",")","npx","create","-","react","-","app","my","-","appc","my","-","app","#","启动","编译","当前","的","React","项目","，","并","自动","打开","http",":","localhost",":","3000","npm","start","#","oryar","start","注意","：","如果","你","不能","确保","最新","版本","，","可以","尝试","卸载","：","npm","unnstall","-","g","create","-","react","-","app","然后","全局","安装","1.1","项目","目录","（","默认","）","：","对于","要","创建","的","项目","，","这些","文件","必须","以","明确的","文件名","存在","：","publcnex",".","html","是","页面","模板",";","srcnex",".","js","是","JaaScrpt","入口","点","。","在","src","中","创建","子目","录","。","为了","加快","重新","构建","的","速度","，","Webpack","只","处理","src","中的","文件","。","你","需要","将","任何","JS","和","CSS","文件","放","在","src","中","，","否则","Webpack","将","发现","不了","它们","在","package",".","json","中","：","只有","三个","依赖","，","分","别","是","react","，","react","-","om",",","react","-","scrpts",",","依赖","为什么","这么","少","，","是","因","为","像","webpack","，","babel","等等","都是","被","creat","-","react","-","app","封装","到了","react","-","scrpts","这个","项目","当中","，","包括","基本","启动","命令","都是","通过","调用","react","-","scrpts","这个","依赖","下面","的","命令","进行","启动","的",",","creat","-","react","-","app","搭建","出来","的","项目","默认","支持","这","4种","命令","，","start","以","开发","模式","启动","项目","，","bul","将","整个","项目","进行","构建","，","test","进行","测试","，","eject","会","将","原本","creat","-","react","-","app","对","webpack","，","babel","等","相关","配置","的","封装","弹射","出来","，","如果","我们","要","将","creat","-","react","-","app","配置","文件","进行","修改","，","现有","目录","下","是","没有","地方","修改","的","，","此时","，","我们","就","可以","通过","eject","命令","将","原本","被","封装","到","脚手架","当中","的","命令","弹射","出来","，","然后","就","可以","在","项目","的","目录","下","看到","很多","配置文件","1.1.1","可用","的","Scrpts","npm","start","在","开发","模式","下","运行","应用","程序","npm","test","以","交互式","监视","模式","启动","测试","运行","器","npm","run","bul","将","生产","应用","程序","构建","到","bul","文件夹","npm","run","eject","1.2","在","create","-","react","-","app","中","使用","css","moule","两种","方式","1.2.1","使用","css","moule","的","第一种","方式","create","-","react","-","app","中","内置","了","使用","CSS","Moules","的","配置","，","当前","方式","就是","使用","create","-","react","-","app","内置","的","用法","方式","：","将","所有","的",".","css",".","scss","等","样式","文件","都","修改","成",".","moule",".","css",".","moule",".","scss","等","。","即可","使用","CSS","Moules","的","方式","进行","引入","使用","了","用法","：","编写","一个","css","文件","：","unon",".","moule",".","css","123",".","error","&","#","123",";","backgroun","-","color",":","re","&","#","125",";","在编","写","一个","普通的","css","文件","：","common",".","css","123",".","error","&","#","123",";","color",":","pnk",";","&","#","125",";","在","App",".","jsx","文件","中","使用","CSS","Moules","的","方式","进行","引用","：","unon",".","moule",".","css","123456789101112131415","mport","React","from","'","react","'",";","mport","unon","from","'",".","cssunon",".","moule",".","css","'","mport","'",".","csscommon",".","css","'","console",".","log","(","unon",")","functon","App","(",")","&","#","123",";","return","(","p","className","=","&","#","123",";","unon",".","error","&","#","125",";","悲催","的","一天","开始","了","p",")",";","&","#","125",";","export","efault","App",";","在","浏览器","中","查看","效果",":","此时","App","组件","的","背景","颜色","是","红色","，","但是","字体","颜色","却","不是","红色","，","因","为","使用","了","Css","Moules","之后","，","普通的","css","样式","就","不起","效果","了","，","需要","用","全局","的","方式","编写","才","可以","(",":","global",")","。","最后","添加","到","元素","上","的","样式","结果","为","：","1","p","class","=","\"","unon","_","error","_","3","UaRT","\"","悲催","的","一天","开始","了","p","使用","scss","的","效果","和","css","效果","一样",",","但是","使用","scsss","时","需要","安装","：","1","npm","noe","-","sass","-","D","因为","create","-","react","-","app","中","没有","内置","然后","就","可以","使用",".","scss","的","文件","编译","了","1.2.2","使用","css","Moule","的","第","二种","方式","方式","：","在","命令行","运行","npm","run","eject","命令",",","此","命令","会","将","脚手架","中","隐藏","的","配置","都","展示","出来","，","此","过程","不","可逆","运行","完成","之后","，","打开","confg","目录","下","的","webpack",".","confg",".","js","文件","，","找到","test",":","cssRegex","这","一行","在","use","属性","执行","的","方法","中","添加","moules",":","true","，","如","下图","：","用法","：","和","第一种","方式","的","用法","一致","，","只","是","不需要","在","css","文件","后面","加",".","moule","后缀","了","在","浏览器","中","查看","效果",":","1","p","class","=","\"","_","2","elxDxw","6","P","93","-","x","9","qDZkogR","\"","悲催","的","一天","开始","了","p","如","想","使用","第二种","方式","对","sass","和","less","也","使用","CSS","Moules","的","方式","进行","引用","，","则","类似的","在","sass","和","less","解析","配置","上","也","添加","moules",":","true","即可","。","注意","：","默认","create","-","react","-","app","脚手架","不能","直接","使用","sass","和","less","直接","编写","css","，","需要","先进","行","相应","配置","1.3","在","Create","-","React","-","App","中","启用","Sass","和","Less","1.3.1","启用","sass","语法","编写","css","create","-","react","-","app","脚手架","中","已经","添加","了","sass","-","loaer","的","支","持","，","所以","只","需要","安装","noe","-","sass","插件","即可","安装","：","noe","-","sass","插","件","123","npm","nstall","noe","-","sass","-","-","sae","#","oryarn","a","noe","-","sass","用法","：","编写","sass","文件","：","App",".","scss","12345678910",".","App","&","#","123",";","wth",":","100%",";","heght",":","100","px",";","backgroun",":","hotpnk",";",".","common","&","#","123",";","text","-","algn",":","center",";","color",":","pnk",";","lne","-","heght",":","100","px",";","&","#","125",";","&","#","125",";","在","js","文件","中","直接","使用","：","1234567891011121314151617181920","mport","React","from","'","react","'",";","mport","User","from","'",".","componentsUser","'","mport","'",".","App",".","scss","'","functon","App","(",")","&","#","123",";","return","(","className","=","\"","App","\"","p","className","=","\"","common","\"","悲催","的","一天","开始","了","p","User",")",";","&","#","125",";","export","efault","App",";","*","因为","此时","scss","中","没有","开启","模块化","所以","在","全局","中","引用","该","样式","属性","都会","被","使用","该类","的","样式","*","1.3.2","启用","less","语法","编写","css","由于","create","-","react","-","app","脚手架","中","并没有","配置","关于","less","文件","的","解析","，","所以","我们","需要","自己","进行","配置","。","需要","安装","的","插件","less","，","less","-","loaer","安装","：","less","、","less","-","loaer","12","npm","less","-","Snpm","less","-","loaer","-","S","打开","web",".","confg",".","js","文件","找到","style","fles","regexes","注释","位置","，","仿照","其","解析","sass","的","规则","，","在下","面","添加","两","行","代码","123","添加","less","解析","规则","const","lessRegex","=","\\",".","less","$",";","const","lessMouleRegex","=","\\",".","moule","\\",".","less","$",";","找到","rules","属性","配置","，","在","其中","添加","less","解析","配置","注意","：","这里","有","一个","需要","注意的","地方","，","下面","的","这些","less","配置","规则","放","在","sass","的","解析","规则","下面","即可","，","如果","放","在","了","fle","-","loaer","的","解析","规则","下面","，","less","文件","解析","不会","生效","。","12345678910111213141516171819202122232425","Less","解析","配置","&","#","123",";","test",":","lessRegex",",","exclue",":","lessMouleRegex",",","use",":","getStyleLoaers","(","&","#","123",";","mportLoaers",":","2",",","sourceMap",":","sEnProucton","&","amp",";","&","amp",";","shoulUseSourceMap",",","&","#","125",";",",","'","less","-","loaer","'",")",",","seEffects",":","true",",","&","#","125",";",",","&","#","123",";","test",":","lessMouleRegex",",","use",":","getStyleLoaers","(","&","#","123",";","mportLoaers",":","2",",","sourceMap",":","sEnProucton","&","amp",";","&","amp",";","shoulUseSourceMap",",","moules",":","true",",","getLocalIent",":","getCSSMouleLocalIent",",","&","#","125",";",",","'","less","-","loaer","'",")","&","#","125",";",",","用法",":","编写","less","文件","：","App",".","less","12345678910",".","App","&","#","123",";","wth",":","100%",";","heght",":","150","px",";","backgroun",":","#","00","a","4","ff",";",".","common","&","#","123",";","text","-","algn",":","center",";","lne","-","heght",":","150","px",";","color",":","hotpnk",";","&","#","125",";","&","#","125",";","在","js","文件","中","直接","使用","：","改写","App",".","js","12345678910111213141516","mport","React","from","'","react","'",";","mport","User","from","'",".","componentsUser","'","mport","'",".","App",".","less","'","functon","App","(",")","&","#","123",";","return","(","className","=","\"","App","\"","p","className","=","\"","common","\"","悲催","的","一天","开始","了","p","User",")",";","&","#","125",";","export","efault","App",";","注意","：","刚刚","启用","的","scss","、","less","是","没有","启动","模块化","的","，","在","web",".","confg",".","js","中","启动","模块化","然后","在","css","中","不要","启动","模块化",",","确保","引入","第三方","插件","时","能够","正常","使用","123456789101112131415","Less","解析","配置","&","#","123",";","test",":","lessRegex",",","exclue",":","lessMouleRegex",",","use",":","getStyleLoaers","(","&","#","123",";","mportLoaers",":","2",",","moules",":","true",",","localIentName",":","'","[","name","]","_","_","[","local","]","-","[","hash",":","base","64",":","5","]","'",",","sourceMap",":","sEnProucton","&","amp",";","&","amp",";","shoulUseSourceMap",",","&","#","125",";",",","'","less","-","loaer","'",")",",","seEffects",":","true",",","&","#","125",";",",","1.4","添加","图片","、","字体","图标","、","文件","使用","：","在","js","文件","中","使用",":","12345","引用","例如","mport","logo","from","'",".","logo",".","png","'","mg","src","=","&","#","123",";","logo","&","#","125",";","alt","=","\"","Logo","\"","在","css","文件","中","使用","：","1234","例如",".","Logo","&","#","123",";","backgroun","-","mage",":","url","(",".","logo",".","png",")",";","&","#","125",";","使用","：","在","nex",".","js","或者","App","根","组件","中","直接","引入","confont",".","css","12345","例如","mport","'",".","styleconfont",".","css","'","引用","p","className","=","\"","con","-","fenxang","\"","子","组件","p","2",".","配置","代理","环境变量","：","在","根目录","直接","新建","文件","：",".","en",".","proucton","就是","生产","环境","的","变量","变量","规则","：","必须","是","REACT","_","APP","_","开头","的","1","REACT","_","APP","_","ROOT","=","'","ap","'","读取","不变","还是","1","let","root","=","process",".","en",".","REACT","_","APP","_","ROOT","设置","代理","在","src","根目录","新建","：","setupProxy",".","js","配置","还是","一样","的","1234567891011","const","proxy","=","requre","(","'","http","-","proxy","-","mleware","'",")","moule",".","exports","=","functon","(","app",")","&","#","123",";","app",".","use","(","proxy","(","'","ap","'",",","&","#","123",";","target",":","'","http",":","192.168.152.55",":","6666","'",",","changeOrgn",":","true",",","pathRewrte",":","&","#","123",";","\"","^","ap","\"",":","\"","\"","&","#","125",";","&","#","125",";",")",")","&","#","125",";","*","react","会","自动","加载","这个","文件","*","3",".","Reux","使用","3.1","Reux","介绍","Reux","是","一个","用来","管理","管理","数据","状态","和","UI","状态","的","JaaScrpt","应用","工具","。","随着","JaaScrpt","单页","应用","（","SPA","）","开发","日趋","复杂","，","JaaScrpt","需要","管理","比","任何","时候","都","要多","的","state","（","状态","）","，","Reux","就是","降低","管理","难度","的","安装","：","1","npm","reux","-","S","项目","src","下","新建","TooLst",".","jsx","：","1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556","mport","React",",","&","#","123",";","Component","&","#","125",";","from","'","react","'","mport","store","from","'",".","storenex","'","src","下","的","创建","的","store","文件","mport","&","#","123",";","changeInputActon",",","aItemActon",",","eleteItemActon",",","getLst","&","#","125",";","from","'",".","storeactonCreators","'","mport","TooLstUI","from","'",".","TooLstUI","'","mport","axos","from","'","axos","'","class","TooLst","extens","Component","&","#","123",";","constructor","(","props",")","&","#","123",";","super","(","props",")",";","store",".","getState","(",")","会","拿到","store","中","存储","的","值","ths",".","state","=","store",".","getState","(",")","ths",".","changeInputValue","=","ths",".","changeInputValue",".","bn","(","ths",")","ths",".","storeChange","=","ths",".","storeChange",".","bn","(","ths",")","ths",".","clckBtn","=","ths",".","clckBtn",".","bn","(","ths",")","ths",".","eleteItem","=","ths",".","eleteItem",".","bn","(","ths",")","订阅","Reux","的","状态","store",".","subscrbe","(","ths",".","storeChange",")","&","#","125",";","rener","(",")","&","#","123",";","return","TooLstUI","nputValue","=","&","#","123",";","ths",".","state",".","nputValue","&","#","125",";","lst","=","&","#","123",";","ths",".","state",".","lst","&","#","125",";","changeInputValue","=","&","#","123",";","ths",".","changeInputValue","&","#","125",";","clckBtn","=","&","#","123",";","ths",".","clckBtn","&","#","125",";","eleteItem","=","&","#","123",";","ths",".","eleteItem","&","#","125",";","&","#","125",";","componentDMount","(",")","&","#","123",";","axos",".","get","(","'","http",":","localhost",":","3000","Lst",".","json","'",")",".","then","(","res","=","&","#","123",";","console",".","log","(","res",".","ata",")","const","acton","=","getLst","(","res",".","ata",".","ata",")","store",".","spatch","(","acton",")","&","#","125",";",")","&","#","125",";","changeInputValue","(","e",")","&","#","123",";","const","acton","=","changeInputActon","(","e",".","target",".","alue",")","store",".","spatch","(","acton",")","&","#","125",";","clckBtn","(",")","&","#","123",";","const","acton","=","aItemActon","(",")","store",".","spatch","(","acton",")","&","#","125",";","eleteItem","(","nex",")","&","#","123",";","const","acton","=","eleteItemActon","(","nex",")","store",".","spatch","(","acton",")","&","#","125",";","订阅","Reux","的","状态","storeChange","(",")","&","#","123",";","ths",".","setState","(","store",".","getState","(",")",")","&","#","125",";","&","#","125",";","export","efault","TooLst",";","项目","src","下","新建","TooLstUI",".","jsx","1234567891011121314151617181920212223242526272829","mport","React","from","'","react","'","mport","'","antstant",".","css","'","mport","&","#","123",";","Input",",","Button",",","Lst","&","#","125",";","from","'","ant","'","const","TooLstUI","=","(","props",")","=","&","#","123",";","console",".","log","(","props",")","return","(","Input","placeholer","=","&","#","123",";","props",".","nputValue","&","#","125",";","style","=","&","#","123",";","&","#","123",";","wth",":","'","250","px","'",",","margnRght",":","'","10","px","'","&","#","125",";","&","#","125",";","onChange","=","&","#","123",";","props",".","changeInputValue","&","#","125",";","alue","=","&","#","123",";","props",".","nputValue","&","#","125",";","Button","type","=","\"","prmary","\"","onClck","=","&","#","123",";","props",".","clckBtn","&","#","125",";","增加","Button","style","=","&","#","123",";","&","#","123",";","margn",":","'","10","px","'",",","wth",":","'","300","px","'","&","#","125",";","&","#","125",";","Lst","borere","ataSource","=","&","#","123",";","props",".","lst","&","#","125",";","renerItem","=","&","#","123",";","(","tem",",","nex",")","=","(","Lst",".","Item","onClck","=","&","#","123",";","(",")","=","&","#","123",";","props",".","eleteItem","(","nex",")","&","#","125",";","&","#","125",";","&","#","123",";","tem","&","#","125",";","Lst",".","Item",")","&","#","125",";",")","&","#","125",";","export","efault","TooLstUI",";","项目","src","下","新建","store","文件夹","，","然后","创建","nex",".","js","1234567891011","引入","createStore","方法","mport","&","#","123",";","createStore","&","#","125",";","from","'","reux","'","mport","reucer","from","'",".","reucer","'","创建","数据","存储","仓库","const","store","=","createStore","(","reucer",",","wnow",".","_","_","REDUX","_","DEVTOOLS","_","EXTENSION","_","_","&","amp",";","&","amp",";","wnow",".","_","_","REDUX","_","DEVTOOLS","_","EXTENSION","_","_","(",")",")","export","efault","store","在","创建","reucer",".","jsx","(","reucer","配合","nex",".","js","使用",")","12345678910111213141516171819202122232425262728293031323334353637","mport","&","#","123",";","CHANGE","_","INPUT",",","ADD","_","ITEM",",","DELETE","_","ITEM",",","GET","_","LIST","&","#","125",";","from","'",".","actonType","'","默认","数据","const","efaultState","=","&","#","123",";","nputValue",":","'","Wrte","SomeThng",".",".",".","'",",","lst",":","[","]","&","#","125",";","Reucer","里","只","能","接收","state","，","不能","改变","stateexport","efault","(","state","=","efaultState",",","acton",")","=","&","#","123",";","就是","一个","方法","函数","*","*","*","state",":","指","的","是","原始","仓库","里","的","状态","*","acton",":","指","的","是","acton","新","传递","的","状态","*","f","(","acton",".","type","=","=","=","CHANGE","_","INPUT",")","&","#","123",";","let","newState","=","JSON",".","parse","(","JSON",".","strngfy","(","state",")",")","深度","拷贝","newState",".","nputValue","=","acton",".","alue","return","newState","&","#","125",";","f","(","acton",".","type","=","=","=","ADD","_","ITEM",")","&","#","123",";","let","newState","=","JSON",".","parse","(","JSON",".","strngfy","(","state",")",")","深度","拷贝","newState",".","lst",".","unshft","(","newState",".","nputValue",")","newState",".","nputValue","=","'","'","return","newState","&","#","125",";","f","(","acton",".","type","=","=","=","DELETE","_","ITEM",")","&","#","123",";","let","newState","=","JSON",".","parse","(","JSON",".","strngfy","(","state",")",")","深度","拷贝","newState",".","lst",".","splce","(","acton",".","nex",",","1",")","return","newState","&","#","125",";","f","(","acton",".","type","=","=","=","GET","_","LIST",")","&","#","123",";","console",".","log","(","acton",")","let","newState","=","JSON",".","parse","(","JSON",".","strngfy","(","state",")",")","newState",".","lst","=","acton",".","lst",".","lst","return","newState","&","#","125",";","return","state","&","#","125",";","publc","文件夹","下","创建","Lst",".","json","1234567891011","当作","axos","请求","的","数据","&","#","123",";","\"","ata","\"",":","&","#","123",";","\"","lst","\"",":","[","\"","早上","起","不","来","，","起床","困难","族","\"",",","\"","中午","没","精神",",","没","办法",",","我","太","难了","\"",",","\"","别","说","了",",","晚上","加班","搞","工作","、","学习","、","学习","使","我","快乐","\"",",","\"","我","要","加班","、","我","要","加班","、","我","要","加班","、","重要的","事情","说","三遍","!","!","!","\"","]","&","#","125",";","&","#","125",";","Reux","的","三个","小","坑","1",".","store","必须","是","唯一","的","，","多","个","store","是","坚决","不","被","允许","的","，","只能","有","一个","store","空间","2",".","只","有","store","能","改变","自己","的","内容","，","Reucer","不能","改变","3",".","Reucer","必须","是","纯","函数","纯","函数","的","定义","是","：","如果","函数","的","调用","参数","相同","，","则","永远","返回","相同","的","结果","。","它","不依赖","于","程序","执行","期间","函数","外部","任何","状态","或","数据","的","变化","，","必须","只","依赖于","其","输入","参数"],"url":"http://yoursite.com/2020/02/04/React%E5%AD%A6%E4%B9%A0%E2%80%94Create-React-App/","title":"React学习—Create-React-App","content":"1. create-react-app 创建及使用\nCreate React App是FaceBook的React团队官方出的一个构建React单页面应用的脚手架工具。它本身集成了Webpack，并配置了一系列内置的loader和默认...","author":"xiaoxiong","categorie":{},"date":"2020-02-04 14:37:18"},{"word":["1",".","React","Router","4","react","-","router","React","Router","核心","react","-","router","-","om","用于","DOM","绑定","的","React","Router","react","-","router","-","nate","用于","React","Nate","的","React","Router","react","-","router","-","reux","React","Router","和","Reux","的","集成","react","-","router","-","confg","用于","配置","静态","路由","因此","，","在","实际","的","web","项目","开发","中","，","react","-","router","和","react","-","router","-","om","不必","同时","引用","。","在","react","-","router","-","om","中","包含","BrowserRouter","类似","的","DOM","类","组件","，","所以","只","需要","引入","react","-","router","-","om","包","就","可以","了","使用方法",":","1","mport","&","#","123",";","BrowserRouter","as","Router",",","Route",",","Lnk",",","Swtch","&","#","125",";","from","\"","react","-","router","-","om","\"",";","2",".","页面","中","多","个","模块","同时","渲染","问题","12345678910","ReactDOM",".","rener","(","(","BrowserRouter","className","=","\"","contaner","\"","Route","path","=","\"","\"","component","=","&","#","123",";","Inex","&","#","125",";","Route","path","=","\"","car","\"","component","=","&","#","123",";","Car","&","#","125",";","BrowserRouter",")",",","ocument",".","getElementByI","(","'","app","'",")",")",";","当","访问","path","=","&","quot",";","car","&","quot",";","的","页面","时","，","path","=","&","quot",";","&","quot",";","的","页面","也","会","被","渲染","出来","。","匹配","path","=","&","quot",";","car","&","quot",";","的","路由","会","匹配","path","=","&","quot",";","&","quot",";","的","路由","。","那么","这个问题","怎么","解决","呢","？","有","以下","两种","方法","使用","Router","的","exact","关键字","12345678910","ReactDOM",".","rener","(","(","BrowserRouter","className","=","\"","contaner","\"","Route","path","=","\"","\"","exact","component","=","&","#","123",";","Inex","&","#","125",";","Route","path","=","\"","car","\"","component","=","&","#","123",";","Car","&","#","125",";","BrowserRouter",")",",","ocument",".","getElementByI","(","'","app","'",")",")",";","使用","独立","路由","：","swtch","1234567891011121314","mport","&","#","123",";","BrowserRouter",",","Route",",","Swtch",",","Rerect","&","#","125",";","from","'","react","-","router","-","om","'",";","ReactDOM",".","rener","(","(","BrowserRouter","Swtch","className","=","\"","contaner","\"","Route","path","=","\"","\"","exact","component","=","&","#","123",";","Inex","&","#","125",";","Route","path","=","\"","car","\"","component","=","&","#","123",";","Car","&","#","125",";","Swtch","BrowserRouter",")",",","ocument",".","getElementByI","(","'","app","'",")",")",";","首先","需要","了","解下","Router","。","它是","所有","路由","组件","共用","的","底层","接口","，","你","可以","将","各种","组件","及","标签","放进","Router","组件","中","，","比如","：","12345678910","Router","ul","lLnk","to","=","\"","\"","HomeLnkl","ul","hr","Route","exact","path","=","\"","\"","component","=","&","#","123",";","Home","&","#","125",";","Route","path","=","\"","about","\"","component","=","&","#","123",";","About","&","#","125",";","Router","需要","注意的","是","：","下","值","允许","存在","一","个子","元素","，","如","存在","多","个","则","会报","错","。","所以","上面","的","代码","中","，","需要","使用","包裹","起来","在","实际","的","项目","中","，","我们","一般","不会","直接","使用","Router",",","而是","使用","如下","的","更高","级","的","路由","。","在","这里","将","介绍","到","第","一个","问题","中用","到","的","BrowserRouter","以及","其他","常用的","高级","路由","。","BrowserRouter","使用","HTML","5","提供","的","hstory","API","(","pushState",",","replaceState","和","popstate","事件",")","来","保持","UI","和","url","的","同步","。","下面","介绍","一下","该","路由","组件","中的","5","个","属性","：","basename",":","strng","当前位置","的","基准","url","。","如果","你","的","页面","部署","在","服务器","的","二级","（","子","）","目录","，","你","需要","将","basename","设置","到","此","子目录","。","正确的","url","格式","是","前面","有","一个","前导","斜杠","，","但","不能","有","尾部","斜杠","。","12","BrowserRouter","basename","=","\"","calenar","\"","Lnk","to","=","\"","toay","\"","渲染","为","a","href","=","\"","calenartoay","\"","getUserConfrmaton",":","func","当","导航","需要","确认","时","执行","的","函数","。","默认","使用","wnow",".","confrm","。","123456","使用","默认","的确","认","函数","const","getConfrmaton","=","(","message",",","callback",")","=","&","#","123",";","const","allowTranston","=","wnow",".","confrm","(","message",")","callback","(","allowTranston",")","&","#","125",";","BrowserRouter","getUserConfrmaton","=","&","#","123",";","getConfrmaton","&","#","125",";","forceRefresh",":","bool","当","设置","为","true","时","，","在","导航","的","过程","中","整个","页面","将会","刷新","。","只有","当","浏览器","不支持","HTML","5","的","hstory","API","时","，","才","设置","为","true","。","12","const","supportsHstory","=","'","pushState","'","n","wnow",".","hstoryBrowserRouter","forceRefresh","=","&","#","123",";","!","supportsHstory","&","#","125",";","keyLength",":","number","locaton",".","key","的","长度","，","默认","是","6","。","点击","同一个","链接","时","，","每次","该","路由","下","的","locaton",".","key","都会","改变","，","可以","通过","key","的","变化","来","刷新","页面","。","1","BrowserRouter","keyLength","=","&","#","123",";","12","&","#","125",";","chlren",":","noe","渲染","单一","子","组件","（","元素","）","。","HashRouter","HashRouter","是","一种","特定","的","Router","，","HashRouter","使用","url","的","hash","(","例如","：","wnow",".","locaton",".","hash",")","来","保持","UI","和","url","的","同步","。","由于","使用","hash","的","方式","记录","导航","历史","不支持","locaton",".","key","和","locaton",".","state","，","该","技术","仅","用于","支持","传统","的","浏览器","。","介绍","完","，","当然","也","要说","下","，","我们","使用","最","频繁的","组件","，","主要职责","是","当","页面","的","访问","地址","与","Route","上","的","path","匹配","时","渲染","出","对应","的","UI","界面","。","Route","属性","值","主要","有","：","path",":","strng","可以","被","path","-","to","-","regexp","解析","的","有效","url","路径","。","如果","没有","path","，","路由","将","总是","被","匹配","。","1","Route","path","=","\"","users",":","\"","component","=","&","#","123",";","User","&","#","125",";","exact",":","bool","为","true","时","，","则","要求","路径","与","locaton",".","pathname","必须","完全","匹配","。","通过","下","表解","释","一下","：","strct",":","bool","为","true","时","，","有","结尾","斜线","的","路径","只能","匹配","有","斜线","的","locaton",".","pathname","。","见","下","表","：","第二个","属性","值","exact","就是","我们","用来","解决","多","个","模块","同时","渲染","问题","的","，","默认","值","为","true","。","在","这里","简要","提","下","Route","渲染","的","三种","方法","：","Route","component","当","访问","地址","和","路由","匹配","时","，","一个","React","component","将会","被","渲染","Route","rener","此","方法","适用于","内联","渲染","，","而且","不会","产生","重复","装载","问题","Route","chlren","当","需要","判断","访问","地址","与","路由","是否","匹配","时","，","可以","使用","此","方法","。","当","不","匹配","时","，","match","为","null","。","我们","上面","代码","示例","中","使用","的","是","第一种","方法","Route","Component","，","这","三种","渲染","方法","都会","用到","match","、","locaton","、","hstory","这些","属性","值","。","需要","注意的","是","：","每一种","渲染","方法","都","有","其","适用","背景",",","Route","component","的","优先级","比","Route","rener","高","，","而","他们","又","都","优先","于","Route","chlren","，","所以","在","同一个","Route","应该","只","使用","一种","方法","，","我们","大多数","使用","的","是","component","方法","。","说完","第一种","解决方法","的","原理","，","来","剖析","下第","二种","方法","：","Swtch","。","该","组件","只","渲染","第","一个","与","当前","访问","地址","匹配","的","Route","或","Rerect","。","它","和","多","个","堆叠","的","Route","组件","之间","的","区别","是","：","Swtch","只","渲染","一个","路由","。","在","解决方法","（","2","）","中","，","当","我们","访问","car","，","Swtch","将会","开始","寻找","与之","匹配","的","路由","，","查找","到","Route","path","=","&","quot",";","car","&","quot",";","匹配","后","，","Swtch","将会","停止","寻找","然后","开始","渲染","car","。","chlren",":","noe","Swtch","下","的","子","节点","只","能","是","Route","或","Rerect","元素","且","只有","与","当前","访问","地址","匹配","的","第一","个子","节点","才","会","被","渲染","。","3",".","如何","定义","默认","访问","页面","有时","我们","需要","定义","一个","默认","页面","，","重新","引导","用户","的","操作","使用","Rerect","。","比如","当","用户","手动","输入","test","之后","，","我们","需要","跳转","至","首页","，","则","代码","如下","所","示","：","12345678910111213","ReactDOM",".","rener","(","(","BrowserRouter","className","=","\"","contaner","\"","Swtch","Route","path","=","&","#","123",";","routePaths",".","INDEX","&","#","125",";","exact","component","=","&","#","123",";","Inex","&","#","125",";","Route","path","=","&","#","123",";","routePaths",".","CARD","&","#","125",";","component","=","&","#","123",";","Car","&","#","125",";","Rerect","to","=","\"","\"","Swtch","BrowserRouter",")",",","ocument",".","getElementByI","(","'","app","'",")",")",";","方法","解析","：","Rerect","渲染","时","将会","导向","一个","新的","地址","，","这个","新的","地址","将会","覆盖","掉","hstory","堆栈","中的","当前","地址","。","Rerect","其","常用的","属性","是","：","to",":","strng","重","定向","的","url","地址","。","1","Rerect","to","=","\"","somewhereelse","\"","to",":","object","重","定向","的","locaton","对象","。","12345","Rerect","to","=","&","#","123",";","&","#","123",";","pathname",":","'","logn","'",",","search",":","'","?","utm","=","your","+","face","'",",","state",":","&","#","123",";","referrer",":","currentLocaton","&","#","125",";","&","#","125",";","&","#","125",";","push",":","bool","取","值","为","true","时","，","重","定向","操作","将会","把","新","地址","加入","到访","问","的","历史记录","里面","，","并不","会","替换","掉","当前","的","地址","。","1","Rerect","push","to","=","\"","somewhereelse","\"","from",":","strng","需要","匹配","的","将要","被","重","定向","的","路径","。","1234","Swtch","Rerect","from","=","'","ol","-","path","'","to","=","'","new","-","path","'","Route","path","=","'","new","-","path","'","component","=","&","#","123",";","Place","&","#","125",";","Swtch","需要","注意的","是","：","Route","元素","使用","path","属性","进行","匹配","，","Rerect","元素","使用","from","属性","进行","匹配","。","如果","元素","中","没有","对应","的","path","或","from","，","那么","它们","将","匹配","任何","当前","的","访问","地址","。","4",".","路由","激活","状态","的","控制","使用","组件","或者","例如","：","1234","NaLnk","to","=","\"","faq","\"","acteClassName","=","\"","selecte","\"","FAQsNaLnk","NaLnk","是","Lnk","的","特殊","版本","，","当","遇到","匹配","的","URL","渲染","元素","时会","添加","样式","属性","，","适用于","页面","导航","部分","。","acteClassName",":","strng","导航","选中","时","的","样式","名","，","默认","样式","名为","acte","。","1234","NaLnk","to","=","\"","faq","\"","acteClassName","=","\"","selecte","\"","FAQsNaLnk","acteStyle",":","object","导航","选中","时","的","样式","。","1234567","NaLnk","to","=","\"","faq","\"","acteStyle","=","&","#","123",";","&","#","123",";","fontWeght",":","'","bol","'",",","color",":","'","re","'","&","#","125",";","&","#","125",";","FAQsNaLnk","exact",":","bool","若值","为","true","，","当","访问","地址","严格","匹配","时","激活","样式","才","会","生效","。","1234","NaLnk","exact","to","=","\"","profle","\"","ProfleNaLnk","strct",":","bool","若值","为","true","，","只有","当","访问","地址","后缀","斜杠","严格","匹配","（","有","或","无","）","时","激活","样式","才","会","生效","1234","NaLnk","strct","to","=","\"","eents","\"","EentsNaLnk","sActe",":","func","用于","添加","页面","激活","时","的","操作","逻辑","。","123456789101112","const","oEent","=","(","match",",","locaton",")","=","&","#","123",";","f","(","!","match",")","&","#","123",";","return","false","&","#","125",";","const","eentID","=","parseInt","(","match",".","params",".","eentID",")","return","!","sNaN","(","eentID",")","&","amp",";","&","amp",";","eentID","%","2","=","=","=","1","&","#","125",";","NaLnk","to","=","\"","eents","123","\"","sActe","=","&","#","123",";","oEent","&","#","125",";","Eent","123","NaLnk","5",".","页面","跳转","使用","hstory","控制","路由","的","跳转","1","ths",".","props",".","hstory",".","push","(","'","somepath","'",")",";","hstory","指","的","是","hstory","包","，","是","4",".","x","中的","重要","依赖","之一","。","常见的","hstory","路由","方案","有","三种","形式","，","分","别","是","：","browser","hstory","在","DOM","上","的","实现","，","用于","支持","HTML","5","hstory","API","的","浏览器","；","hash","hstory","在","DOM","上","的","实现","，","用于","旧版","浏览器","；","memory","hstory","在","内存","上","的","实现","，","用于","测试","或","非","DOM","环境","（","如","React","Nate","）","hstory","对象","包含","的","属性","和","方法","如下","所","示","：","length",":","number","hstory","堆栈","中的","地址","数目","acton",":","strng","当前","的","动作","(","PUSH",",","REPLACE",",","或者","是","POP",")","locaton",":","object","当前","访问","地址","信息","组成","的","对象","push","(","path",",","[","state","]",")",":","func","在","hstory","堆栈","信息","里加","入","一个","新","路径","replace","(","path",",","[","state","]",")",":","func","替换","hstory","堆栈","信息","里","的","当前","路径","go","(","n",")",":","func","将","hstory","堆栈","中的","指针","向前","移动","n","goBack","(",")",":","func","等同于","go","(","-","1",")","goForwar","(",")",":","func","等同于","go","(","1",")","block","(","prompt",")",":","func","阻止","跳转","需要","注意的","是","：","hstory","对象","是","可变","的","，","所以","不要","从","hstory",".","locaton","直接","获取","，","而是","需要","通过","Route","的","prop","来","获取","locaton","。","使用","Context","，","获得","router","对象","12345678910111213141516","mport","React","from","\"","react","\"",";","mport","PropTypes","from","\"","prop","-","types","\"",";","class","MyComponent","extens","React",".","Component","&","#","123",";","statc","contextTypes","=","&","#","123",";","router",":","PropTypes",".","object","&","#","125",";","constructor","(","props",",","context",")","&","#","123",";","super","(","props",",","context",")",";","&","#","125",";",".",".",".","myFuncton","(",")","&","#","123",";","ths",".","context",".","router",".","hstory",".","push","(","\"","somePath","\"",")",";","&","#","125",";",".",".",".","&","#","125",";","6",".","切换","路由","后","，","页面","仍然","停留","在","上一个","页面","的","位置","问题","：","由","A","页面","跳转","到","B","页面","，","B","页面","停留","在","A","页面","的","位置","，","没有","返回","到顶","部","。","用户","可以","对","wnow","和","独立","组件","的","滚动","位置","进行","管理","。","可以","使用","wthRouter","组件","：","wthRouter","可以","访问","历史","对象","的","属性","和","最近","的","Route","匹配","项","，","当路","由","的","属性","值","{","match",",","locaton",",","hstory","}","改变","时","，","wthRouter","都会","重新","渲染","。","该","组件","可以","携带","组件","的","路由","信息","，","避免","组件","之间","一层层","传递","。","使用方法","如下","：","1","wthRouter","(","MyComponent",")","这样","就","可以","获取","到","MyComponent","组件","的","路由","信息","了","。","解决方法","：","使用","wthRouter","封装","ScrollToTop","组件","。","这里","就","用到","了","wthRouter","携带","路由","信息","的","特性","，","通过","对比","props","中","locaton","的","变化","，","实现","页面","的","滚动","定义","ScrollToTop","组件","，","代码","如下","：","1234567891011121314","mport","React",",","&","#","123",";","Component","&","#","125",";","from","'","react","'",";","mport","&","#","123",";","Route",",","wthRouter","&","#","125",";","from","'","react","-","router","-","om","'",";","class","ScrollToTop","extens","Component","&","#","123",";","componentDUpate","(","preProps",")","&","#","123",";","f","(","ths",".","props",".","locaton","!","=","=","preProps",".","locaton",")","&","#","123",";","wnow",".","scrollTo","(","0",",","0",")","&","#","125",";","&","#","125",";","rener","(",")","&","#","123",";","return","ths",".","props",".","chlren","&","#","125",";","&","#","125",";","export","efault","wthRouter","(","ScrollToTop",")",";","在","定义","路由","处","引用","该","组件","，","例如","：","123456789101112","ReactDOM",".","rener","(","(","BrowserRouter","ScrollToTop","className","=","\"","contaner","\"","Route","path","=","&","#","123",";","routePaths",".","INDEX","&","#","125",";","exact","component","=","&","#","123",";","Inex","&","#","125",";","Route","path","=","&","#","123",";","routePaths",".","CARD","&","#","125",";","component","=","&","#","123",";","Car","&","#","125",";","ScrollToTop","BrowserRouter",")",",","ocument",".","getElementByI","(","'","app","'",")",")",";","这样","处理","之后","，","当","跳转","页面","时","都会","自动","回到","该","页面","的","顶部","位置","。","7",".","页面","之间","如何","传值","问题","背景","：","当路","由","发生","跳转","时","我们","可能","需要","携带","一些","参数","解决方法","：","使用","props","属性","，","介绍","以下","三种","传值","方法","：","props",".","params","指定","一个","path","，","然后","指定","通配符","可以","携带","参数","到","指定","的","path","：","1","Route","path","=","'","user",":","name","'","component","=","&","#","123",";","UserPage","&","#","125",";","Route","跳转","UserPage","页面","时","，","可以","这样","写","1234","lnk","方法","Lnk","to","=","\"","usersam","\"","用户","Lnkpush","方法","ths",".","props",".","hstory",".","push","(","\"","usersam","\"",")",";","在","UserPage","页面","中","通过","ths",".","props",".","params",".","name","获取","值","。","上面","的","方法","可以","传递","一个","或","多","个","值","，","但是","每个","值","的","类型","都是","字符串","，","没法","传递","一个","对象","。","如果","要传","的话","可以","将","json","对象","转换","为","字符串","，","传递","过去","之后","再","将","json","字符串","转换","为","对象","。","123456","let","ata","=","&","#","123",";",":","3",",","name",":","sam",",","age",":","36","&","#","125",";",";","ata","=","JSON",".","strngfy","(","ata",")",";","let","path","=","'","user","$","&","#","123",";","ata","&","#","125",";","'",";","在","页面","中","获取","值时","let","ata","=","JSON",".","parse","(","ths",".","props",".","params",".","ata",")",";","queryquery","方式","可以","传递","任意","类型","的","值","，","但是","页面","的","url","也是","由","query","的","值","拼接","的","，","url","很","长","且","是","明文","传输","。","1234567891011121314151617","定义","路由","Route","path","=","'","user","'","component","=","&","#","123",";","UserPage","&","#","125",";","Route","数据","定义","let","ata","=","&","#","123",";",":","3",",","name",":","sam",",","age",":","36","&","#","125",";",";","let","path","=","&","#","123",";","pathname",":","'","user","'",",","query",":","ata",",","&","#","125",";","页面","跳转","Lnk","to","=","&","#","123",";","path","&","#","125",";","用户","Lnkths",".","props",".","hstory",".","push","(","path",")",";","页面","取","值","let","ata","=","ths",".","props",".","locaton",".","query",";","let","&","#","123",";",",","name",",","age","&","#","125",";","=","ata",";","statestate","方式","类似于","post","，","依然","可以","传递","任意","类型","的","数据","，","而且","可以","不","以","明文","方式","传输","。","1234567891011121314151617","定义","路由","Route","path","=","'","user","'","component","=","&","#","123",";","UserPage","&","#","125",";","Route","数据","定义","let","ata","=","&","#","123",";",":","3",",","name",":","sam",",","age",":","36","&","#","125",";",";","let","path","=","&","#","123",";","pathname",":","'","user","'",",","state",":","ata",",","&","#","125",";","页面","跳转","Lnk","to","=","&","#","123",";","path","&","#","125",";","用户","Lnkths",".","props",".","hstory",".","push","(","path",")",";","页面","取","值","let","ata","=","ths",".","props",".","locaton",".","state",";","let","&","#","123",";",",","name",",","age","&","#","125",";","=","ata",";","8",".","使用","BrowserRouter","配置","路由","，","上传","页面","至","服务器","后","页面","出现","404","问题","背景","：","项目","中","控制","路由","跳转","使用","的","是","BrowserRouter","，","代码","如下","：","12345678910","ReactDOM",".","rener","(","(","BrowserRouter","className","=","\"","contaner","\"","Route","path","=","&","#","123",";","routePaths",".","INDEX","&","#","125",";","exact","component","=","&","#","123",";","Inex","&","#","125",";","Route","path","=","&","#","123",";","routePaths",".","CARD","&","#","125",";","component","=","&","#","123",";","Car","&","#","125",";","BrowserRouter",")",",","ocument",".","getElementByI","(","'","app","'",")",")",";","在","开发","过程","中","使用","是","没有","问题","的","，","但是","将","页面","上传","至","服务器","之后","，","问题","就","来","了","：","用户","访问","的","资源","不存在","，","页面","是","空白","的","。","问题","分析","：","`","`","是","使用","React","-","Router","应用","推荐","的","hstory","方案","。","它","使用","浏览器","中的","Hstory","API","用于","处理","url","，","创建","一个","像","example",".","comlst","123","这样","真实的","url","。","当","通过","真实","url","访问","网站","的","时候","，","由于","路径","是","指向","服务器","的","真实","路径","，","但","该","路径","下","并没有","相关","资源","，","所以","用户","访问","的","资源","不存在","。","解决方法","：","1",".","使用","HashRouter","。","它","使用","url","中的","hash","（","#","）","部分","去","创建","路由","，","举例","来说","，","用户","访问","http",":","www",".","example",".","com","，","实际","会","看到","的","是","http",":","www",".","example",".","com","#","。","为什么","本地","开发","时","没有","问题","呢","？","那是","因为","我们","的","React","脚手架","中","使用","webpack","-","e","-","serer","做","了","配置","。","123456","webpackConfg",".","eSerer","=","&","#","123",";","sableHostCheck",":","true",",","contentBase",":","path",".","resole","(","_","_","rname",",","'","bul","'",")",",","compress",":","true",",","gzp","压缩","hstoryApFallback",":","true","&","#","125",";",";","2",".","如果","要","使用","BrowserRouter","的话","，","服务器","需要","进行","相关","路由","配置"],"url":"http://yoursite.com/2020/02/03/React%E5%AD%A6%E4%B9%A0%E2%80%94React%20Router4/","title":"React学习—React Router4","content":"1. React Router 4\nreact-router React Router核心\nreact-router-dom 用于DOM绑定的React Router\nreact-router-native用于React Native...","author":"xiaoxiong","categorie":{},"date":"2020-02-03 23:58:29"},{"word":["1",".","Express","中","路由","和","中间件","路由","：","就是","如何","处理","HTTP","请求","中的","路径","部分","中间件","：","就是","在","收到","请求","后","和","发送","响应","之前","这个","阶段","执行","的","一些","函数","1.1","应用","及","中间件","123456789101112131415161718192021","next","方法","的","作用","就是","将","请求","传递","到","下一个","中间件","*","当","请求","进来","，","会","从","第一个","中间件","开始","进行","匹配","如果","匹配","，","则","进来","如果","请求","进入","中间件","之后","，","没有","调用","next","则","代码","会","停在","当前","中间件","如果","调用","了","next","则","继续","向后","找到","第","一个","匹配","的","中间件","如果","不","匹配","，","则","继续","判断","匹配","下一个","中间件","*","不关心","请求","路径","的","请求","不管","以","什么","路径","请求","只","要有","next","(",")","传递","app",".","use","(","(","req",",","res",",","next",")","=","&","#","123",";","console",".","log","(","'","1","'",")","1","next","(",")","&","#","125",";",")","app",".","use","(","(","req",",","res",",","next",")","=","&","#","123",";","console",".","log","(","'","2","'",")","2","next","(",")","&","#","125",";",")","app",".","use","(","(","req",",","res",".","next",")","=","&","#","123",";","console",".","log","(","'","3","'",")","3","&","#","125",";",")","1234567891011121314151617181920212223","关心","请求","路径","的","请求","app",".","use","(","(","req",",","res",",","next",")","=","&","#","123",";","console",".","log","(","'","1","'",")","next","(",")","&","#","125",";",")","app",".","use","(","'","b","'",",","(","req",",","res",",","next",")","=","&","#","123",";","console",".","log","(","'","b","'",")","&","#","125",";",")","以","a","开头","的","路径","中间件","app",".","use","(","'","a","'",",","(","req",",","res",",","next",")","=","&","#","123",";","console",".","log","(","'","a","'",")","next","(",")","&","#","125",";",")","app",".","use","(","(","req",",","res",",","next",")","=","&","#","123",";","console",".","log","(","'","2","'",")","&","#","125",";",")","当","在","浏览器","中","以","a","开头","的","请求","时","，","会","输出","1","a","2","当","在","浏览器","中","以","b","开头","的","请求","时","，","会","输出","1","b",",","这里","不会","输出","2","因为","当","请求","b","开头","的","请求","后","没有","next","(",")","方法","传递","就","会","停留","在","那个","请求","中","1.2","错误","处理","中间","件","1234567891011121314","app",".","use","(","'","user","'",",","(","req",",","res",",","next",")","=","&","#","123",";","try","&","#","123",";","console",".","log","(","has","error",")","next","(",")","&","#","125",";","catch","(","err",")","&","#","123",";","console",".","log","(","'","error","'",")","next","(","err",")","&","#","125",";","&","#","125",";",")","全局","错误","处理","中间件","app",".","use","(","(","err",",","req",",","res",",","next",")","=","&","#","123",";","console",".","log","(","err",".","stack",")","res",".","status","(","500",")",".","sen","(","'","error","message","'",")","&","#","125",";",")","12345678910111213141516171819202122232425262728293031323334","const","express","=","requre","(","'","express","'",")","const","fs","=","requre","(","'","fs","'",")","const","path","=","requre","(","'","path","'",")","const","app","=","express","(",")","app",".","get","(","'","a","'",",","(","req",",","res",",","next",")","=","&","#","123",";","fs",".","reaFle","(","path",".","jon","(","_","_","rname",",","'",".","atas",".","txt","'",")",",","'","utf","8","'",",","(","err",",","ata",")","=","&","#","123",";","f","(","err",")","&","#","123",";","return","next","(","err",")","&","#","125",";","console",".","log","(","ata",")","next","(",")","&","#","125",";",")","&","#","125",";",")","app",".","get","(","'","a","'",",","(","req",",","res",",","next",")","=","&","#","123",";","console",".","log","(","'","a","'",")","res",".","sen","(","'","a","'",")","&","#","125",";",")","当","不","匹配","任何","请求","路径","时","会","进去","此","错误","处理","app",".","use","(","(","req",",","res",",","next",")","=","&","#","123",";","res",".","sen","(","'","404","not","Foun","'",")","&","#","125",";",")","全局","错误","处理","中间件","app",".","use","(","(","err",",","req",",","res",",","next",")","=","&","#","123",";","res",".","status","(","500",")",".","sen","(","err",".","message",")","&","#","125",";",")","app",".","lsten","(","3000",",","(",")","=","&","#","123",";","console",".","log","(","'","runnng",".",".",".","'",")","&","#","125",";",")","1.3","express","中的","router","12345678910111213141516171819202122232425262728293031323334353637","app",".","jsconst","express","=","requre","(","'","express","'",")","const","publc","=","requre","(","'",".","routerpublc","'",")","const","user","=","requre","(","'",".","routeruser","'",")","const","app","=","express","(",")","app",".","use","(","'","publc","'",",","publc",")","当","请求","以","publc","开头","的","路径","时","才","会","进来","app",".","use","(","'","user","'",",","user",")","当","请求","以","uer","开头","的","路径","时","才","会","进来","app",".","lsten","(","3000",",","(",")","=","&","#","123",";","console",".","log","(","'","runnng",".",".",".","'",")","&","#","125",";",")","router","1",".","user",".","jsconst","express","=","requre","(","'","express","'",")","const","router","=","express",".","Router","(",")","router",".","get","(","'","a","'",",","(","req",",","res",")","=","&","#","123",";","res",".","sen","(","'","hello","noe","'",")","&","#","125",";",")","moule",".","exports","=","router","2",".","publc",".","jsconst","express","=","requre","(","'","express","'",")","const","router","=","express",".","Router","(",")","router",".","get","(","'","b","'",",","(","req",",","res",")","=","&","#","123",";","res",".","sen","(","'","hello","worl","'",")","&","#","125",";",")","moule",".","exports","=","router","app",".","router","(",")","要挂载","在","所有","第三方","中间件","的","后面","，","因为","前面","配置","的","中间件","是","app",".","router","(",")","中","请求","处理","函数","的","依赖"],"url":"http://yoursite.com/2020/01/13/Node%E5%AD%A6%E4%B9%A0%E2%80%94app.use%E4%B8%AD%E9%97%B4%E4%BB%B6/","title":"Node学习—app.use中间件","content":"1. Express中路由和中间件路由：就是如何处理HTTP请求中的路径部分中间件：就是在收到请求后和发送响应之前这个阶段执行的一些函数1.1 应用及中间件123456789101112131415161718192021// nex...","author":"xiaoxiong","categorie":{},"date":"2020-01-13 16:00:19"},{"word":["1",".","Cooke","和","Sesson","​","会话","管理","：","客户端","和","服务端","通信","过程","中的","数据","是","如何","管理","的","​","会话","管理","的","技术","：","数据","存","在","客户端","Cooke","​","数据","存","在","服务端","Sesson","​","Cooke",":","http","请","求是","无","状态","的","。","也就是说","即使","第一次","和","服务器","连接","后","并且","登录","成功","后","，","第二次","请求","服务器","依然","不能","知道","当前","请","求是","哪个","用户","。","cooke","的","出现","就是","为了","解决","这个问题","，","第一次","登录","后","服务器","返回","一些","数据","（","cooke","）","给","浏览器","，","然后","浏览器","保存","在","本地","，","当","该","用户","发送","第二次","请求","的","时候","，","就","会","自动","的","把","上次","请求","存储","的","cooke","数据","自动","的","携带","给","服务器","，","服务器","通过","浏览器","携带","的","数据","就","能","判断","当前","用户","是","哪个","了","。","cooke","存储","的","数据量","有限","，","不同的","浏览器","有","不同的","存储","大小","，","但","一般","不超过","4","KB","。","因此","使用","cooke","只能","存储","一些","小量","的","数据","​","Sesson",":","sesson","和","cooke","的","作用","有点","类似","，","都是","为了","存储","用户","相关","的","信息","。","不同的","是","，","cooke","是","存储","在","本地","浏览器","，","而","sesson","存储","在","服务器","。","存储","在","服务器","的","数据","会","更加","的","安全","，","不容易","被","窃取","。","但","存储","在","服务器","也","有","一定","的","弊端","，","就是","会","占用","服务器","的","资源","1.1","express","中","使用","cooke","-","parser","中间件","1.1.1","安装","：","npm","nstall","cooke","-","parser","-","S","1.1.2","引","包","：","const","cookeParser","=","requre","(","‘","cooke","-","parser","’",")","1.1.3","配置","cooke","-","parser","中间件","123","const","cookeParser","=","requre","(","'","cooke","-","parser","'",")","app",".","use","(","cookeParser","(","'","secret","'",")",")","1.1.4","在","服务器","通过","res",".","cooke","(",")","方法","创建","一个","cooke","12345678","cooke","的","配置","参数","：","maxAge",":","是","cooke","最大","的","有效","时间","单位","为","毫秒","expres","：","是","cooke","的","过期","时间","是","一个","ate","对象","httpOnly","：","当前","cooke","是否","只","能","被","web","服务器","获取","snge",":","是否","对","cooke","进行","签名","(","防止","cooke","被","用户","在","浏览器","修改",")","path","：","是","cooke","的","有效","访问","路径","(","如果","没有","设置","，","则","默认","为","根","路径",")","比如","我们","设置","了","path",":","&","quot",";","&","#","x","2","F",";","&","quot",";","，","即","意味着","访问","当前","网站","的","任何","接口","都会","携带","cooke","比如","我们","设置","了","path",":","&","quot",";","&","#","x","2","F",";","user","&","quot",";","，","即","意味着","只有","访问","有","&","#","x","2","F",";","user","开头","的","接口","才","会","在","请求","中","携带","cooke","1.1.5","设置","cooke","的","请求","1234","app",".","get","(","\"","setCooke","\"",",","(","req",",","res",")","=","&","#","123",";","res",".","cooke","(","\"","name","\"",",","\"","cookename","\"",",","&","#","123",";","path",":","\"","user","\"",",","maxAge",":","600000",",","httpOnly",":","true",",","'","sgne","'",":","true","&","#","125",";",")","res",".","sen","(","'","setcooke","'",")","&","#","125",";",")","1.1.6","浏览器","再次","请求","服务器","的","时候","会","将","之前","创建","的","cooke","放","在","请求","头","中","发送","给","服务器",",","服务器","此时","可以","通过","req",".","cookes","来","查看","当前","的","cooke","1234567891011","app",".","get","(","\"","getCooke","\"",",","(","req",",","res",")","=","&","#","123",";","如果","没有","对","cooke","进行","签名","，","则","通过","req",".","cookes","来","获取","cooke","如果","对","cooke","进行","了","签名","，","则","通过","req",".","sgneCookes","来","获取","cooke","console",".","log","(","req",".","cookes",",","req",".","sgneCookes",")","&","#","123",";","&","#","125",";","&","#","123",";","&","#","125",";","res",".","sen","(","'","getcooke","'",")","&","#","125",";",")","app",".","get","(","\"","user","\"",",","(","req",",","res",")","=","&","#","123",";","console",".","log","(","req",".","cookes",",","req",".","sgneCookes",")","&","#","123",";","&","#","125",";","&","#","123",";","name",":","'","cookename","'","&","#","125",";","res",".","sen","(","'","getcooke","'",")","&","#","125",";",")","1.1.7","Cooke","记住","用户名","123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263","const","express","&","#","x","3","D",";","requre","(","&","#","39",";","express","&","#","39",";",")","const","boyParser","&","#","x","3","D",";","requre","(","&","#","39",";","boy","-","parser","&","#","39",";",")","const","cookeParser","&","#","x","3","D",";","requre","(","&","#","39",";","cooke","-","parser","&","#","39",";",")","const","app","&","#","x","3","D",";","express","(",")","app",".","use","(","boyParser",".","urlencoe","(","&","#","123",";","extene",":","false","&","#","125",";",")",")","app",".","use","(","boyParser",".","json","(",")",")","app",".","engne","(","&","#","39",";","html","&","#","39",";",",","requre","(","&","#","39",";","express","-","art","-","template","&","#","39",";",")",")","app",".","set","(","&","#","39",";","ews","&","#","39",";",",","_","_","rname","+","&","#","39",";","&","#","x","2","F",";","ews","&","#","39",";",")","app",".","use","(","cookeParser","(","&","#","39",";","xaoxong","&","#","39",";",")",")","app",".","get","(","&","#","39",";","&","#","x","2","F",";","logn","&","#","39",";",",","(","req",",","res",")","&","#","x","3","D",";","&","#","123",";","f","(","req",".","sgneCookes",".","name",")","&","#","123",";","res",".","rener","(","&","#","39",";","logn",".","html","&","#","39",";",",","&","#","123",";","name",":","req",".","sgneCookes",".","name","&","#","125",";",")","&","#","125",";","res",".","rener","(","&","#","39",";","logn",".","html","&","#","39",";",")","&","#","125",";",")","app",".","get","(","&","#","39",";","&","#","x","2","F",";","usercenter","&","#","39",";",",","(","req",",","res",")","&","#","x","3","D",";","&","#","123",";","f","(","req",".","sgneCookes",".","name",")","&","#","123",";","res",".","rener","(","&","#","39",";","usercenter",".","html","&","#","39",";",",","&","#","123",";","name",":","req",".","sgneCookes",".","name","&","#","125",";",")","&","#","125",";","res",".","rener","(","&","#","39",";","usercenter",".","html","&","#","39",";",")","&","#","125",";",")","app",".","post","(","&","#","39",";","&","#","x","2","F",";","logn","&","#","39",";",",","(","req",",","res",")","&","#","x","3","D",";","&","#","123",";","let","name","&","#","x","3","D",";","req",".","boy",".","name","let","pw","&","#","x","3","D",";","req",".","boy",".","pw","let","rmbname","&","#","x","3","D",";","req",".","boy",".","rmbname","&","#","x","2","F",";","&","#","x","2","F",";","console",".","log","(","name","+","&","#","39",";","-","-","-","&","#","39",";","+","pw","+","&","#","39",";","-","-","-","&","#","39",";","+","&","#","39",";","-","-","-","&","#","39",";","+","rmbname",")","f","(","rmbname","&","#","x","3","D",";","&","#","x","3","D",";","&","#","39",";","on","&","#","39",";",")","&","#","123",";","f","(","name","&","#","x","3","D",";","&","#","x","3","D",";","&","#","39",";","朱艳","&","#","39",";","&","amp",";","&","amp",";","pw","&","#","x","3","D",";","&","#","x","3","D",";","&","#","39",";","zhuyan","&","#","39",";",")","&","#","123",";","res",".","cooke","(","&","#","39",";","name","&","#","39",";",",","name",",","&","#","123",";","maxAge",":","60000",",","httpOnly",":","true",",","&","#","39",";","sgne","&","#","39",";",":","true","&","#","125",";",")","res",".","rerect","(","&","#","39",";","&","#","x","2","F",";","usercenter","&","#","39",";",")","&","#","125",";","else","&","#","123",";","res",".","sen","(","&","#","39",";","账号","或者","密码","有误","&","#","39",";",")","&","#","125",";","&","#","125",";","else","&","#","123",";","f","(","name","&","#","x","3","D",";","&","#","x","3","D",";","&","#","39",";","朱艳","&","#","39",";","&","amp",";","&","amp",";","pw","&","#","x","3","D",";","&","#","x","3","D",";","&","#","39",";","zhuyan","&","#","39",";",")","&","#","123",";","res",".","rerect","(","&","#","39",";","&","#","x","2","F",";","usercenter","&","#","39",";",")","&","#","125",";","else","&","#","123",";","res",".","sen","(","&","#","39",";","账号","或者","密码","错误","&","#","39",";",")","&","#","125",";","&","#","125",";","&","#","125",";",")","app",".","lsten","(","3000",",","(",")","&","#","x","3","D",";","&","#","123",";","console",".","log","(","&","#","39",";","runnng",".",".","&","#","39",";",")","&","#","125",";",")","2.1","express","中","express","-","sesson","中间件","2.1.1","安装","：","npm","nstall","express","-","sesson","-","S","2.1.2","引","包","：","const","expressSesson","=","requre","(","‘","express","-","sesson","’",")","2.1.3","配置","中间件","12345678910111213141516","app",".","use","(","expressSesson","(","&","#","123",";","name",":","\"","cooke","\"",",","指定","所","创建","的","sesson","对应","的","cooke","的","名字","secret",":","'","secret","'",",","指定","是否","要","签名","这个","cooke","resae",":","强制","保存","sesson","即使","它","并没有","变化",",","。","默认","为","true","。","建议","设置","成","false","。","但是","这个","并不一定","是","必须","的","，","如果","客户端","有","两个","并行","的","请求","到","你","的","服务端","，","一个","请求","对","sesson","的","修改","可能","被","另外","一个","请求","覆盖","掉","，","即使","第二个","请求","并没有","修改","sesson","resae",":","false",",","rollng",":","强制","在","每一个","response","中都","发送","sesson","标识符","的","cooke","。","rolng","默认","是","false","。","如果","把","这个","值","设置","为","true","但是","saeUntalze","设置","为","false",",","没","有","初始化","的","sesson","的","cooke","不会","被","包含","在","响应","中","。","主要","作用","：","每次","请求","都","重置","cooke","过期","时间","rollng",":","true",",","强制","没有","“","初始化","”","的","sesson","保存","到","storage","(","store",":","保存","sesson","的","地方",")","中","，","没","有","初始化","的","sesson","指","的","是","刚","被","创建","没","有","被","修改","。","默认","是","true",",","但是","不","建议","使用","默认值","saeUnntalze",":","false",",","cooke",":","&","#","123",";","maxAge",":","1000","*","60","*","3",",","指定","sesson","对应","的","cooke","的","有效","时间","&","#","125",";",",","&","#","125",";",")",")","2.1.4","设置","sesson","1234","app",".","get","(","&","#","39",";","&","#","x","2","F",";","setsesson","&","#","39",";",",","(","req",",","res",")","&","#","x","3","D",";","&","#","123",";","req",".","sesson",".","usernfo","&","#","x","3","D",";","&","#","39",";","xaoyang","&","#","39",";","res",".","sen","(","&","#","39",";","setsesson","&","#","39",";",")","&","#","125",";",")","2.1.5","得","到","sesson","1234","app",".","get","(","'","getsesson","'",",","(","req",",","res",")","=","&","#","123",";","console",".","log","(","req",".","sesson",")","res",".","sen","(","req",".","sesson",".","usernfo",")","&","#","125",";",")","2.1.6","sesson","登录","案例","123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081","const","express","=","requre","(","'","express","'",")","const","expressSesson","=","requre","(","'","express","-","sesson","'",")","const","boyParser","=","requre","(","'","boy","-","parser","'",")","const","app","=","express","(",")","app",".","use","(","boyParser",".","urlencoe","(","&","#","123",";","extene",":","false","&","#","125",";",")",")","app",".","use","(","boyParser",".","json","(",")",")","app",".","engne","(","'","html","'",",","requre","(","'","express","-","art","-","template","'",")",")","app",".","set","(","'","ews","'",",","_","_","rname","+","'","ews","'",")","app",".","use","(","expressSesson","(","&","#","123",";","name",":","\"","cooke","\"",",","指定","所","创建","的","sesson","对应","的","cooke","的","名字","secret",":","'","secret","'",",","指定","是否","要","签名","这个","cooke","resae",":","false",",","rollng",":","true",",","saeUnntalze",":","false",",","cooke",":","&","#","123",";","maxAge",":","1000","*","60","*","3",",","指定","sesson","对应","的","cooke","的","有效","时间","&","#","125",";",",","&","#","125",";",")",")","app",".","get","(","'","logn","'",",","(","req",",","res",")","=","&","#","123",";","let","user","=","req",".","sesson",".","user","console",".","log","(","user",")","res",".","rener","(","'","logn",".","html","'",",","user",")","&","#","125",";",")","app",".","post","(","'","logn","'",",","(","req",",","res",")","=","&","#","123",";","获取","请求","参数","信息","let","name","=","req",".","boy",".","name","let","pw","=","req",".","boy",".","pw","如果","用户","登录","成功","则","把","用户","的","信息","存储","到","sesson","中","f","(","name","=","=","'","sessonName","'","&","amp",";","&","amp",";","pw","=","=","'","123","'",")","&","#","123",";","存储","会话","数据","req",".","sesson",".","user","=","req",".","boy","跳转","到","用户","中心","页面","res",".","rerect","(","'","usercenter","'",")","&","#","125",";","else","&","#","123",";","res",".","sen","(","'","账号","或者","密码","错误","'",")","&","#","125",";","&","#","125",";",")","app",".","get","(","'","usercenter","'",",","(","req",",","res",")","=","&","#","123",";","从","sesson","中","获取","之前","保存","的","数据","let","user","=","req",".","sesson",".","user","console",".","log","(","user",")","f","(","user","&","amp",";","&","amp",";","user",".","name",")","&","#","123",";","res",".","rener","(","'","usercenter",".","html","'",",","&","#","123",";","name",":","user",".","name","&","#","125",";",")","&","#","125",";","else","&","#","123",";","res",".","rener","(","'","usercenter",".","html","'",",","&","#","123",";","name",":","'","efault","'","&","#","125",";",")","&","#","125",";","&","#","125",";",")","退出","的","登录","app",".","get","(","'","layout","'",",","(","req",",","res",")","=","&","#","123",";","清","空","sesson","req",".","sesson",".","estroy","(",")","res",".","rerect","(","'","home","'",")","&","#","125",";",")","app",".","get","(","'","home","'",",","(","req",",","res",")","=","&","#","123",";","let","user","=","req",".","sesson",".","user","f","(","user","&","amp",";","&","amp",";","user",".","name",")","&","#","123",";","res",".","rener","(","\"","home",".","html","\"",",","&","#","123",";","name",":","user",".","name","&","#","125",";",")","&","#","125",";","else","&","#","123",";","res",".","rener","(","\"","home",".","html","\"",",","&","#","123",";","name",":","\"","efault","\"","&","#","125",";",")","&","#","125",";","&","#","125",";",")","app",".","lsten","(","3000",",","(",")","=","&","#","123",";","console",".","log","(","'","runnng",".",".",".","'",")","&","#","125",";",")"],"url":"http://yoursite.com/2020/01/13/Node%E5%AD%A6%E4%B9%A0%E2%80%94express%E4%B8%ADcookie%E5%92%8Csession/","title":"Node学习—express中cookie和session","content":"1.Cookie 和 Session​       会话管理：客户端和服务端通信过程中的数据是如何管理的\n​       会话管理的技术：数据存在客户端  Cookie\n​                               ...","author":"xiaoxiong","categorie":{},"date":"2020-01-13 16:00:19"}]